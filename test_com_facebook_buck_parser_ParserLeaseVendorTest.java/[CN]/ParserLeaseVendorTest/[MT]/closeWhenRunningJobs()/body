{
  Cell cell=EasyMock.createMock(Cell.class);
  ListeningExecutorService executorService=MoreExecutors.listeningDecorator(Executors.newFixedThreadPool(1));
  try (ParserLeaseVendor<ParserForTest> vendor=new ParserLeaseVendor<>(1,new Function<Cell,ParserForTest>(){
    @Override public ParserForTest apply(    Cell input){
      return new ParserForTest();
    }
  }
)){
    for (int i=0; i < 5; ++i) {
      vendor.leaseParser(cell,new AsyncFunction<ParserForTest,Void>(){
        @Override public ListenableFuture<Void> apply(        ParserForTest input) throws Exception {
          Preconditions.checkNotNull(input);
          Thread.sleep(50);
          return Futures.immediateFuture(null);
        }
      }
,executorService);
    }
  }
  finally {
    executorService.shutdown();
  }
}
