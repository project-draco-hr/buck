{
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"build_then_test",temporaryFolder);
  workspace.setUp();
  ProcessResult buildResult=workspace.runBuckCommand("build","//:example");
  buildResult.assertSuccess("Successful build should exit with 0.");
  ProcessResult testResult=workspace.runBuckCommand("test","//:example");
  assertEquals("",testResult.getStdout());
  assertTrue("Test output is incorrect:\n=====\n" + testResult.getStderr() + "=====\n",testResult.getStderr().contains("TESTING //:example\n" + "PASS <100ms  1 Passed   0 Failed   com.example.MyTest\n" + "TESTS PASSED\n"));
  testResult.assertSuccess("Passing tests should exit with 0.");
  workspace.verify();
}
