{
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"build_then_test",temporaryFolder);
  workspace.setUp();
  ProcessResult buildResult=workspace.runBuckCommand("build","//:example");
  assertEquals("Successful build should exit with 0.",0,buildResult.getExitCode());
  ProcessResult testResult=workspace.runBuckCommand("test","//:example");
  assertEquals("",testResult.getStdout());
  assertEquals(Joiner.on("\n").join("BUILDING //:example","BUILD SUCCESSFUL","TESTING //:example","PASS <100ms  1 Passed   0 Failed   com.example.MyTest","TESTS PASSED") + '\n',testResult.getStderr());
  assertEquals("Passing tests should exit with 0.",0,testResult.getExitCode());
  workspace.verify();
}
