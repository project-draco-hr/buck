{
  ProjectFilesystem filesystem=EasyMock.createMock(ProjectFilesystem.class);
  EasyMock.expect(filesystem.getAbsolutifier()).andReturn(IdentityPathAbsolutifier.getIdentityAbsolutifier()).times(2);
  EasyMock.replay(filesystem);
  BuildTargetParser parser=new BuildTargetParser();
  Reader reader=new StringReader(Joiner.on('\n').join("[project]","ignore = .git, foo, bar/, baz//, a/b/c"));
  BuckConfig config=BuckConfig.createFromReader(reader,filesystem,parser,Platform.detect(),ImmutableMap.copyOf(System.getenv()));
  ImmutableSet<Path> ignorePaths=config.getIgnorePaths();
  assertEquals("Should ignore paths, sans trailing slashes",ignorePaths,MorePaths.asPaths(ImmutableSet.of(BuckConstant.BUCK_OUTPUT_DIRECTORY,".idea",System.getProperty(BuckConfig.BUCK_BUCKD_DIR_KEY,".buckd"),config.getCacheDir().toString(),".git","foo","bar","baz","a/b/c")));
  EasyMock.verify(filesystem);
}
