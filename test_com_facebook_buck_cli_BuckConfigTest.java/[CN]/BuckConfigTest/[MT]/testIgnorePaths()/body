{
  ProjectFilesystem filesystem=EasyMock.createMock(ProjectFilesystem.class);
  EasyMock.expect(filesystem.getPathRelativizer()).andReturn(IdentityPathRelativizer.getIdentityRelativizer()).times(2);
  BuildTargetParser parser=EasyMock.createMock(BuildTargetParser.class);
  EasyMock.replay(filesystem,parser);
  Reader reader=new StringReader(Joiner.on('\n').join("[project]","ignore = .git, foo, bar/, baz//, a/b/c"));
  BuckConfig config=BuckConfig.createFromReader(reader,filesystem,parser,Platform.detect());
  ImmutableSet<String> ignorePaths=config.getIgnorePaths();
  assertEquals("Should ignore paths, sans trailing slashes",ignorePaths,ImmutableSet.of(BuckConstant.BUCK_OUTPUT_DIRECTORY,".idea",System.getProperty(BuckConfig.BUCK_BUCKD_DIR_KEY,".buckd"),config.getCacheDir().toString(),".git","foo","bar","baz","a/b/c"));
  EasyMock.verify(filesystem,parser);
}
