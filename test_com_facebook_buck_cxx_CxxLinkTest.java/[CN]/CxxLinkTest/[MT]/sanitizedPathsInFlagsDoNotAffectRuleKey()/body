{
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  RuleKeyBuilderFactory ruleKeyBuilderFactory=new DefaultRuleKeyBuilderFactory(FakeFileHashCache.createFromStrings(ImmutableMap.of("ld",Strings.repeat("0",40),"a.o",Strings.repeat("a",40),"b.o",Strings.repeat("b",40),"libc.a",Strings.repeat("c",40),"different",Strings.repeat("d",40))),pathResolver);
  int pathSize=10;
  DebugPathSanitizer sanitizer1=new DebugPathSanitizer(pathSize,File.separatorChar,Paths.get("PWD"),ImmutableBiMap.of(Paths.get("something"),Paths.get("A")));
  DebugPathSanitizer sanitizer2=new DebugPathSanitizer(pathSize,File.separatorChar,Paths.get("PWD"),ImmutableBiMap.of(Paths.get("different"),Paths.get("A")));
  ImmutableList<String> args1=ImmutableList.of("-Lsomething/foo");
  RuleKey ruleKey1=generateRuleKey(ruleKeyBuilderFactory,new CxxLink(params,pathResolver,DEFAULT_LINKER,DEFAULT_OUTPUT,DEFAULT_INPUTS,args1,sanitizer1));
  ImmutableList<String> args2=ImmutableList.of("-Ldifferent/foo");
  RuleKey ruleKey2=generateRuleKey(ruleKeyBuilderFactory,new CxxLink(params,pathResolver,DEFAULT_LINKER,DEFAULT_OUTPUT,DEFAULT_INPUTS,args2,sanitizer2));
  assertEquals(ruleKey1,ruleKey2);
}
