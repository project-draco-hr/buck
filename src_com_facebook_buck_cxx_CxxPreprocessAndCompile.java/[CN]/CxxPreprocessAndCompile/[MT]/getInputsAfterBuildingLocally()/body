{
  SourcePathResolver resolver=getResolver();
  ImmutableList.Builder<Path> inputs=ImmutableList.builder();
  if (preprocessor.isPresent()) {
    inputs.addAll(Ordering.natural().immutableSortedCopy(resolver.getAllPaths(preprocessor.get().getInputs())));
  }
  if (compiler.isPresent()) {
    inputs.addAll(Ordering.natural().immutableSortedCopy(resolver.getAllPaths(compiler.get().getInputs())));
  }
  inputs.add(resolver.getPath(input));
  if (prefixHeader.isPresent()) {
    inputs.add(resolver.getPath(prefixHeader.get()));
  }
  inputs.addAll(Iterables.transform(getProjectFilesystem().readLines(getDepFilePath()),MorePaths.TO_PATH));
  return inputs.build();
}
