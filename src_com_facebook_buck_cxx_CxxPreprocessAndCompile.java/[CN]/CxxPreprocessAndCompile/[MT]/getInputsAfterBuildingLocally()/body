{
  ImmutableList.Builder<SourcePath> inputs=ImmutableList.builder();
  if (preprocessDelegate.isPresent()) {
    inputs.addAll(preprocessDelegate.get().getInputsAfterBuildingLocally(readDepFileLines()));
  }
  if (compiler.isPresent()) {
    inputs.addAll(Ordering.natural().immutableSortedCopy(compiler.get().getInputs()));
  }
  inputs.add(input);
  return inputs.build();
}
