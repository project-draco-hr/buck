{
  ImmutableList.Builder<SourcePath> inputs=ImmutableList.builder();
  if (preprocessDelegate.isPresent()) {
    inputs.addAll(preprocessDelegate.get().getInputsAfterBuildingLocally(readDepFileLines()));
  }
  if (compilerDelegate.isPresent()) {
    inputs.addAll(compilerDelegate.get().getInputsAfterBuildingLocally());
  }
  inputs.add(input);
  return inputs.build();
}
