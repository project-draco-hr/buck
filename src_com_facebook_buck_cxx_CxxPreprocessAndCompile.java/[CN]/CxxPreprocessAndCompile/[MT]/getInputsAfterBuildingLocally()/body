{
  SourcePathResolver resolver=getResolver();
  ImmutableList.Builder<Path> inputs=ImmutableList.builder();
  if (preprocessor.isPresent()) {
    inputs.addAll(Ordering.natural().immutableSortedCopy(resolver.deprecatedAllPaths(preprocessor.get().getInputs())));
  }
  if (compiler.isPresent()) {
    inputs.addAll(Ordering.natural().immutableSortedCopy(resolver.deprecatedAllPaths(compiler.get().getInputs())));
  }
  inputs.add(resolver.deprecatedGetPath(input));
  if (prefixHeader.isPresent()) {
    inputs.add(resolver.deprecatedGetPath(prefixHeader.get()));
  }
  inputs.addAll(Iterables.transform(getProjectFilesystem().readLines(getDepFilePath()),MorePaths.TO_PATH));
  return inputs.build();
}
