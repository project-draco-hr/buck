{
  SourcePathResolver resolver=getResolver();
  ImmutableList.Builder<Path> inputs=ImmutableList.builder();
  if (preprocessDelegate.isPresent()) {
    inputs.addAll(preprocessDelegate.get().getInputsAfterBuildingLocally(readDepFileLines()));
  }
  if (compiler.isPresent()) {
    inputs.addAll(Ordering.natural().immutableSortedCopy(resolver.deprecatedAllPaths(compiler.get().getInputs())));
  }
  inputs.add(resolver.deprecatedGetPath(input));
  return inputs.build();
}
