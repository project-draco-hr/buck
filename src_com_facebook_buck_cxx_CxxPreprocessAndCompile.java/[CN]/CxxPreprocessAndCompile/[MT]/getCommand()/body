{
  ImmutableList.Builder<String> cmd=ImmutableList.builder();
  cmd.addAll(compiler.getCommandPrefix(getResolver()));
  cmd.add(operation.getFlag());
  cmd.addAll(getCommandSuffix());
  if (operation == CxxPreprocessAndCompileStep.Operation.COMPILE) {
    cmd.add("-o",output.toString());
  }
  cmd.add(getResolver().getPath(input).toString());
  return cmd.build();
}
