{
  ImmutableList.Builder<String> cmd=ImmutableList.builder();
  cmd.addAll(compiler.getCommandPrefix(getResolver()));
  cmd.add(operation.getFlag());
  cmd.addAll(ImmutableList.<String>builder().addAll(flags).addAll(MoreIterables.zipAndConcat(Iterables.cycle("-include"),FluentIterable.from(includes.getPrefixHeaders()).transform(getResolver().getPathFunction()).transform(Functions.toStringFunction()))).addAll(MoreIterables.zipAndConcat(Iterables.cycle("-I"),Iterables.transform(includeRoots,Functions.toStringFunction()))).addAll(MoreIterables.zipAndConcat(Iterables.cycle("-isystem"),Iterables.transform(systemIncludeRoots,Functions.toStringFunction()))).addAll(MoreIterables.zipAndConcat(Iterables.cycle("-F"),Iterables.transform(frameworkRoots,Functions.toStringFunction()))).build());
  if (operation == CxxPreprocessAndCompileStep.Operation.COMPILE) {
    cmd.add("-o",output.toString());
  }
  cmd.add(getResolver().getPath(input).toString());
  return cmd.build();
}
