{
  ImmutableMap.Builder<Path,Path> replacementPathsBuilder=ImmutableMap.builder();
  for (  Map.Entry<Path,SourcePath> entry : includes.getFullNameToPathMap().entrySet()) {
    replacementPathsBuilder.put(entry.getKey(),getResolver().getPath(entry.getValue()));
  }
  ImmutableMap<Path,Path> replacementPaths=replacementPathsBuilder.build();
  return new CxxPreprocessAndCompileStep(operation,output,getResolver().getPath(input),inputType,compiler.getCommandPrefix(getResolver()),getCommandSuffix(),replacementPaths,sanitizer);
}
