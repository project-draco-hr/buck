{
  ImmutableList<String> flags=this.flags;
  if (sanitizer.isPresent()) {
    flags=FluentIterable.from(flags).transform(sanitizer.get().sanitize(Optional.<Path>absent(),false)).toList();
  }
  builder.setReflectively(key + ".flags",flags);
  if (sanitizer.isPresent() && operation == CxxPreprocessAndCompileStep.Operation.COMPILE) {
    builder.setReflectively(key + ".compilationDirectory",sanitizer.get().getCompilationDirectory());
  }
  return builder;
}
