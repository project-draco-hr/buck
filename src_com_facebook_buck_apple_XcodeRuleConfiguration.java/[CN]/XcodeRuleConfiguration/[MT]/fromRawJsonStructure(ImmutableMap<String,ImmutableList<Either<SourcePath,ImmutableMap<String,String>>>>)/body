{
  ImmutableMap.Builder<String,XcodeRuleConfiguration> builder=ImmutableMap.builder();
  for (  ImmutableMap.Entry<String,ImmutableList<Either<SourcePath,ImmutableMap<String,String>>>> entry : configurations.entrySet()) {
    ImmutableList.Builder<Layer> layers=ImmutableList.builder();
    for (    Either<SourcePath,ImmutableMap<String,String>> value : entry.getValue()) {
      if (value.isLeft()) {
        layers.add(new Layer(value.getLeft()));
      }
 else       if (value.isRight()) {
        layers.add(new Layer(value.getRight()));
      }
    }
    builder.put(entry.getKey(),new XcodeRuleConfiguration(layers.build()));
  }
  return builder.build();
}
