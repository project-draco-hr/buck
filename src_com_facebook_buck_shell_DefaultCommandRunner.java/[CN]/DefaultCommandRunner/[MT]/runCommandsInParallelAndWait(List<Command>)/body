{
  List<Callable<Void>> callables=Lists.transform(commands,new Function<Command,Callable<Void>>(){
    @Override public Callable<Void> apply(    final Command command){
      return new Callable<Void>(){
        @Override public Void call() throws Exception {
          runCommand(command);
          return null;
        }
      }
;
    }
  }
);
  try {
    MoreFutures.getAllUninterruptibly(getListeningExecutorService(),callables);
  }
 catch (  ExecutionException e) {
    Throwable cause=e.getCause();
    Throwables.propagateIfInstanceOf(cause,CommandFailedException.class);
    throw new RuntimeException(cause);
  }
}
