{
  Optional<BuildRule> existingRule=buildRuleResolver.getRuleOptional(compileTarget);
  if (existingRule.isPresent()) {
    return (DCompileBuildRule)existingRule.get();
  }
 else {
    ImmutableList<String> flags=ImmutableList.<String>builder().addAll(compilerFlags).add("-c").build();
    DCompileBuildRule rule=new DCompileBuildRule(params.copyWithBuildTarget(compileTarget),sourcePathResolver,ImmutableSortedSet.of(src),flags,dBuckConfig.getDCompiler());
    buildRuleResolver.addToIndex(rule);
    return rule;
  }
}
