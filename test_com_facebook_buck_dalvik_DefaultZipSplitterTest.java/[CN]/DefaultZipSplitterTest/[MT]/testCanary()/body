{
  DefaultZipSplitter.splitZip(new ProjectFilesystem(tmpDir.getRoot()),Collections.singleton(testInZip),outPrimary,tmpDir.getRoot(),secondaryPattern,80,80,processor,ZipSplitter.DexSplitStrategy.MINIMIZE_PRIMARY_DEX_SIZE,ZipSplitter.CanaryStrategy.INCLUDE_CANARIES,tmpDir.newFolder("report")).execute();
  assertTrue(nthSecondaryZipContains(1,"secondary/dex01/Canary"));
  assertTrue(nthSecondaryZipContains(2,"secondary/dex02/Canary"));
  assertTrue(nthSecondaryZipContains(3,"secondary/dex03/Canary"));
  assertTrue(nthSecondaryZipContains(4,"secondary/dex04/Canary"));
}
