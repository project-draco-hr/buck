{
  BuckEventBus eb=new BuckEventBus(new DefaultClock(),BuckEventBusFactory.BUILD_ID_FOR_TEST);
  eb.register(new SleepSubscriber());
  eb.post(new SleepEvent(1));
  long start=System.nanoTime();
  boolean success=eb.shutdown(2500,TimeUnit.MILLISECONDS);
  long durationNanos=System.nanoTime() - start;
  long durationMillis=TimeUnit.MILLISECONDS.convert(durationNanos,TimeUnit.NANOSECONDS);
  assertTrue("Bus should shut down successfully",success);
  assertThat("Shutdown should not take a long time.",durationMillis,lessThanOrEqualTo(2400L));
}
