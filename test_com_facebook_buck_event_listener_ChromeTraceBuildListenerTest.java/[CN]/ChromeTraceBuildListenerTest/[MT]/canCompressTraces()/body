{
  ProjectFilesystem projectFilesystem=new ProjectFilesystem(tmpDir.getRoot().toPath());
  BuildId buildId=new BuildId("BUILD_ID");
  ChromeTraceBuildListener listener=new ChromeTraceBuildListener(projectFilesystem,buildId,new FakeClock(1409702151000000000L),ObjectMappers.newDefaultInstance(),Locale.US,TimeZone.getTimeZone("America/Los_Angeles"),1,true);
  listener.outputTrace(buildId);
  Path tracePath=Paths.get("buck-out/log/traces/build.2014-09-02.16-55-51.BUILD_ID.trace.gz");
  assertTrue(projectFilesystem.exists(tracePath));
  BufferedReader reader=new BufferedReader(new InputStreamReader(new GZIPInputStream(projectFilesystem.newFileInputStream(tracePath))));
  List<?> elements=new Gson().fromJson(reader,List.class);
  assertThat(elements,notNullValue());
}
