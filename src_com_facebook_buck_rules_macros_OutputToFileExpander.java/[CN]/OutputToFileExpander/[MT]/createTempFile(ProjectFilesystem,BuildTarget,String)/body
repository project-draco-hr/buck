{
  Path directory=BuildTargets.getScratchPath(target,"%s/tmp");
  filesystem.mkdirs(directory);
  String prefix=Hashing.sha1().newHasher().putString(delegate.getClass().getName(),UTF_8).putString(input,UTF_8).hash().toString();
  Path absolute=filesystem.resolve(directory);
  Path temp=filesystem.createTempFile(absolute,prefix,".macro");
  return directory.resolve(temp.getFileName());
}
