{
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"remote_log",temporaryFolder);
  workspace.setUp();
  workspace.replaceFileContents(".buckconfig","<remote_log_url>",httpd.getUri("").toString());
  ProjectWorkspace.ProcessResult result=workspace.runBuckCommand("build","//test:test");
  result.assertSuccess("buck project should exit cleanly");
  assertThat(putRequestsHandler.getPutRequestsPaths(),Matchers.contains("/"));
  List<String> contents=putRequestsHandler.getContents("/");
  ImmutableList.Builder<JsonNode> eventsBuilder=ImmutableList.builder();
  for (  String batch : contents) {
    JsonNode jsonNode=objectMapper.readTree(batch);
    assertThat(jsonNode,Matchers.hasProperty("array",Matchers.is(true)));
    eventsBuilder.addAll(jsonNode);
  }
  ImmutableList<JsonNode> events=eventsBuilder.build();
  assertThat(events,Matchers.hasItem(new HasJsonField(objectMapper,"type",Matchers.equalTo(objectMapper.valueToTree("CommandStarted")))));
}
