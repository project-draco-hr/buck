{
  if (!inputDir.isPresent()) {
    return ImmutableSortedSet.of();
  }
  ImmutableSortedSet.Builder<Path> paths=ImmutableSortedSet.naturalOrder();
  try {
    paths.addAll(filesystem.getFilesUnderPath(inputDir.get(),EnumSet.of(FileVisitOption.FOLLOW_LINKS),Predicates.<Path>alwaysTrue()));
  }
 catch (  IOException e) {
    throw new HumanReadableException(e,"Error traversing directory: %s.",inputDir.get());
  }
  return paths.build();
}
