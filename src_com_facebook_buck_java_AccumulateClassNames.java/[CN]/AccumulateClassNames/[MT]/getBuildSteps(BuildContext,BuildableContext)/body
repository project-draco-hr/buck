{
  ImmutableList.Builder<Step> steps=ImmutableList.builder();
  steps.add(new RmStep(getPathToOutputFile(),true));
  steps.add(new MkdirStep(pathToOutputFile.getParent()));
  final AccumulateClassNamesStep accumulateClassNamesStep=new AccumulateClassNamesStep(Paths.get(javaLibraryRule.getPathToOutputFile()),Paths.get(getPathToOutputFile()));
  steps.add(accumulateClassNamesStep);
  AbstractExecutionStep recordAbiStep=new AbstractExecutionStep("record_abi"){
    @Override public int execute(    ExecutionContext context){
      Sha1HashCode abiKey=computeAbiKey(accumulateClassNamesStep);
      buildableContext.addMetadata(AbiRule.ABI_KEY_ON_DISK_METADATA,abiKey.toString());
      return 0;
    }
  }
;
  steps.add(recordAbiStep);
  return steps.build();
}
