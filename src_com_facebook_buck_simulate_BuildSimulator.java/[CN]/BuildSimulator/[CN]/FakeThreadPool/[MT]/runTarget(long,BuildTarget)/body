{
  for (int i=0; i < runningNodes.length; ++i) {
    if (runningNodes[i] == null) {
      SimulationNode node=new SimulationNode(expectedFinishMillis,target,i);
      runningNodes[i]=node;
      ++runningNodesCount;
      return node;
    }
  }
  throw new IllegalStateException("Tried to schedule a task without any available threads.");
}
