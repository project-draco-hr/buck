{
  if (!(env instanceof BuckQueryEnvironment)) {
    throw new QueryException("The environment should be an instance of BuckQueryEnvironment");
  }
  BuckQueryEnvironment buckEnv=(BuckQueryEnvironment)env;
  Set<T> inputs=args.get(1).getExpression().eval(env);
  String label=CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL,args.get(0).getWord());
  ImmutableSortedSet.Builder<QueryTarget> builder=ImmutableSortedSet.naturalOrder();
  for (  T input : inputs) {
    builder.addAll(buckEnv.getAttributeValue((QueryTarget)input,label));
  }
  return (ImmutableSet<T>)builder.build();
}
