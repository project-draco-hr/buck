{
  String javaBin="/usr/bin/my_java_wrapper.sh";
  JarFattener jarFattener=createJarFattener(Optional.of(javaBin));
  BuildRuleResolver buildResolver=new BuildRuleResolver();
  SourcePathResolver sourceResolver=new SourcePathResolver(buildResolver);
  buildResolver.addToIndex(jarFattener);
  BuildTargetSourcePath jarSourcePath=new BuildTargetSourcePath(jarFattener.getBuildTarget());
  String expectedJarPath=sourceResolver.getResolvedPath(jarSourcePath).toString();
  ImmutableList<String> expected=ImmutableList.of("java","-Dbuck.java.java_bin=/usr/bin/my_java_wrapper.sh","-jar",expectedJarPath);
  ImmutableList<String> args=jarFattener.getExecutableCommand().getCommandPrefix(sourceResolver);
  assertThat(args,is(equalTo(expected)));
}
