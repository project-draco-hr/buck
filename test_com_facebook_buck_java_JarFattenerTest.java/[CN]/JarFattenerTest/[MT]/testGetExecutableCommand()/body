{
  JarFattener jarFattener=createJarFattener(Optional.<String>absent());
  BuildRuleResolver buildResolver=new BuildRuleResolver();
  SourcePathResolver sourceResolver=new SourcePathResolver(buildResolver);
  buildResolver.addToIndex(jarFattener);
  BuildTargetSourcePath jarSourcePath=new BuildTargetSourcePath(jarFattener.getBuildTarget());
  String expectedJarPath=sourceResolver.getResolvedPath(jarSourcePath).toString();
  ImmutableList<String> expected=ImmutableList.of("java","-jar",expectedJarPath);
  ImmutableList<String> args=jarFattener.getExecutableCommand().getCommandPrefix(sourceResolver);
  assertThat(args,is(equalTo(expected)));
}
