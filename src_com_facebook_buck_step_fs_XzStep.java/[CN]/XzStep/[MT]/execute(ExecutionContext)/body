{
  try (InputStream in=new BufferedInputStream(new FileInputStream(sourceFile));OutputStream out=new BufferedOutputStream(new FileOutputStream(getDestinationFile()));XZOutputStream xzOut=new XZOutputStream(out,new LZMA2Options(compressionLevel),check)){
    ByteStreams.copy(in,xzOut);
    xzOut.finish();
  }
 catch (  IOException e) {
    e.printStackTrace(context.getStdErr());
    return 1;
  }
  if (!keep && !context.getProjectFilesystem().deleteFileAtPath(sourceFile)) {
    return 1;
  }
  return 0;
}
