{
  ProjectFilesystem filesystem=context.getProjectFilesystem();
  try (InputStream in=filesystem.newFileInputStream(sourceFile);OutputStream out=filesystem.newFileOutputStream(destinationFile);XZOutputStream xzOut=new XZOutputStream(out,new LZMA2Options(compressionLevel),check)){
    ByteStreams.copy(in,xzOut);
    xzOut.finish();
    if (!keep) {
      context.getProjectFilesystem().deleteFileAtPath(sourceFile);
    }
  }
 catch (  IOException e) {
    LOG.error(e);
    return 1;
  }
  return 0;
}
