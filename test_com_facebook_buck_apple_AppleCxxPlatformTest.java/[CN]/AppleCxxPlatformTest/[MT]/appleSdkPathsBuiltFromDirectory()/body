{
  Path root=Paths.get("test/com/facebook/buck/apple/testdata/apple-cxx-platform");
  AppleSdkPaths appleSdkPaths=ImmutableAppleSdkPaths.builder().toolchainPath(root.resolve("Toolchains/XcodeDefault.xctoolchain")).platformDeveloperPath(root.resolve("Platforms/iPhoneOS.platform/Developer")).sdkPath(root.resolve("Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS8.0.sdk")).build();
  AppleCxxPlatform appleCxxPlatform=new AppleCxxPlatform(Platform.MACOS,ApplePlatform.IPHONEOS,"iphoneos8.0","7.0","armv7",appleSdkPaths);
  assertEquals(new Flavor("iphoneos8.0-armv7"),appleCxxPlatform.asFlavor());
  assertEquals(root.resolve("Toolchains/XcodeDefault.xctoolchain/usr/bin/clang").toString(),appleCxxPlatform.getCc().toString());
  assertThat(appleCxxPlatform.getCflags(),hasConsecutiveItems("-isysroot",root.resolve("Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS8.0.sdk").toString()));
  assertThat(appleCxxPlatform.getCflags(),hasConsecutiveItems("-arch","armv7"));
  assertThat(appleCxxPlatform.getCflags(),hasConsecutiveItems("-mios-version-min=7.0"));
  assertEquals(root.resolve("Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++").toString(),appleCxxPlatform.getCxx().toString());
  assertEquals(root.resolve("Platforms/iPhoneOS.platform/Developer/usr/bin/ar").toString(),appleCxxPlatform.getAr().toString());
}
