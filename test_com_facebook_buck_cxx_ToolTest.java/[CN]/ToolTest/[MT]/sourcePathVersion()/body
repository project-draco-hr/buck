{
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  RuleKeyBuilderFactory ruleKeyBuilderFactory=new FakeRuleKeyBuilderFactory(FakeFileHashCache.createFromStrings(ImmutableMap.<String,String>builder().put("path",Strings.repeat("a",40)).build()));
  SourcePath path=new TestSourcePath("path");
  RuleKey.Builder.RuleKeyPair pathRuleKey=createRuleKeyBuilder(ruleKeyBuilderFactory,pathResolver).setReflectively("tool",path).build();
  Tool tool1=new SourcePathTool(path);
  RuleKey.Builder.RuleKeyPair tool1RuleKey=createRuleKeyBuilder(ruleKeyBuilderFactory,pathResolver).setReflectively("tool",tool1).build();
  assertEquals(pathRuleKey,tool1RuleKey);
  Tool tool2=new SourcePathTool(path);
  RuleKey.Builder.RuleKeyPair tool2RuleKey=createRuleKeyBuilder(ruleKeyBuilderFactory,pathResolver).setReflectively("tool",tool2).build();
  assertEquals(pathRuleKey,tool2RuleKey);
}
