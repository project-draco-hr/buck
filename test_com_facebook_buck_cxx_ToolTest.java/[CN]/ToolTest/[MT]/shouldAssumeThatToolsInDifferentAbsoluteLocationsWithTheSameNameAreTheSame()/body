{
  HashedFileTool tool1=new HashedFileTool(Paths.get("/usr/local/bin/python2.7"));
  HashedFileTool tool2=new HashedFileTool(Paths.get("/opt/bin/python2.7"));
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  RuleKeyBuilderFactory ruleKeyBuilderFactory=new FakeRuleKeyBuilderFactory(FakeFileHashCache.createFromStrings(ImmutableMap.<String,String>builder().put("/usr/local/bin/python2.7",Strings.repeat("a",40)).put("/opt/bin/python2.7",Strings.repeat("a",40)).build()));
  RuleKeyPair tool1RuleKey=createRuleKeyBuilder(ruleKeyBuilderFactory,pathResolver).setReflectively("tool",tool1).build();
  RuleKeyPair tool2RuleKey=createRuleKeyBuilder(ruleKeyBuilderFactory,pathResolver).setReflectively("tool",tool2).build();
  assertEquals(tool1RuleKey,tool2RuleKey);
}
