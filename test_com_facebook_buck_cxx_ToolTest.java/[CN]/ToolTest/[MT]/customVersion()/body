{
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  RuleKeyBuilderFactory ruleKeyBuilderFactory=new FakeRuleKeyBuilderFactory(FakeFileHashCache.createFromStrings(ImmutableMap.<String,String>of()));
  String tool="tool";
  String version="version";
  RuleKey.Builder.RuleKeyPair versionRuleKey=createRuleKeyBuilder(ruleKeyBuilderFactory,pathResolver).setReflectively("tool",String.format("%s (%s)",tool,version)).build();
  Tool tool1=new VersionedTool(new TestSourcePath("something"),ImmutableList.<String>of(),tool,version);
  RuleKey.Builder.RuleKeyPair tool1RuleKey=createRuleKeyBuilder(ruleKeyBuilderFactory,pathResolver).setReflectively("tool",tool1).build();
  assertEquals(versionRuleKey,tool1RuleKey);
  Tool tool2=new VersionedTool(new TestSourcePath("something-else"),ImmutableList.<String>of(),tool,version);
  RuleKey.Builder.RuleKeyPair tool2RuleKey=createRuleKeyBuilder(ruleKeyBuilderFactory,pathResolver).setReflectively("tool",tool2).build();
  assertEquals(versionRuleKey,tool2RuleKey);
}
