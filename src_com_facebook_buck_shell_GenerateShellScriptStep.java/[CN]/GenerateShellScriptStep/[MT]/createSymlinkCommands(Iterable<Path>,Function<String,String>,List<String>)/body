{
  for (  Path path : paths) {
    Preconditions.checkArgument(basePath.toString().isEmpty() || path.startsWith(basePath),"%s should start with %s",path,basePath);
    if (path.getNameCount() > 1) {
      lines.add(String.format("mkdir -p %s",Escaper.escapeAsBashString(path.getParent())));
    }
    lines.add(String.format("ln -s %s $BUCK_PROJECT_ROOT/%s",Escaper.escapeAsBashString(pathRelativizer.apply(path.toString())),Escaper.escapeAsBashString(path)));
  }
}
