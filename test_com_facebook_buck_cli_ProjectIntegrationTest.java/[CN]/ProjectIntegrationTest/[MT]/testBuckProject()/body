{
  File templateDir=new File("test/com/facebook/buck/cli/testdata/project1/");
  File destDir=temporaryFolder.getRoot();
  workspace=new ProjectWorkspace(templateDir,destDir);
  workspace.setUp();
  CapturingPrintStream stdout=new CapturingPrintStream();
  CapturingPrintStream stderr=new CapturingPrintStream();
  Main main=new Main(stdout,stderr);
  int exitCode=main.runMainWithExitCode(destDir,"project");
  assertEquals("buck project should exit cleanly",0,exitCode);
  workspace.verify();
  String stdErrOutput=stderr.getContentsAsString(Charsets.UTF_8);
  assertTrue("Nothing should be written to stderr except possibly an Android platform warning.",stdErrOutput.isEmpty() || stdErrOutput.startsWith("No Android platform target specified."));
  assertEquals("`buck project` should report the files it modified.",Joiner.on('\n').join("MODIFIED FILES:",".idea/compiler.xml",".idea/libraries/guava.xml",".idea/libraries/jsr305.xml",".idea/libraries/junit.xml",".idea/modules.xml",".idea/runConfigurations/Debug_Buck_test.xml","modules/dep1/module_modules_dep1.iml","modules/tip/module_modules_tip.iml") + '\n',stdout.getContentsAsString(Charsets.UTF_8));
}
