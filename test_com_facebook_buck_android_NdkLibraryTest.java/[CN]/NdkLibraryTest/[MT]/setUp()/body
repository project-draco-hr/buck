{
  AssumeAndroidPlatform.assumeNdkIsAvailable();
  projectFilesystem=new ProjectFilesystem(Paths.get(".").toAbsolutePath());
  AndroidDirectoryResolver resolver=new DefaultAndroidDirectoryResolver(projectFilesystem,Optional.<String>absent(),Optional.<String>absent(),new DefaultPropertyFinder(projectFilesystem,ImmutableMap.copyOf(System.getenv())));
  AndroidPlatformTarget androidPlatformTarget=AndroidPlatformTarget.getDefaultPlatformTarget(resolver,Optional.<Path>absent());
  executionContext=TestExecutionContext.newBuilder().setAndroidPlatformTargetSupplier(Suppliers.ofInstance(androidPlatformTarget)).build();
  ndkBuildCommand=new ExecutableFinder().getOptionalExecutable(Paths.get("ndk-build"),resolver.findAndroidNdkDir().get()).get().toAbsolutePath().toString();
}
