{
  StringBuilder b=new StringBuilder();
  Closer closer=Closer.create();
  PrintWriter writer=closer.register(new PrintWriter(CharStreams.asWriter(b)));
  try {
    writeJavaCodeForPackageAndResources(writer,packageName,resources);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    try {
      closer.close();
    }
 catch (    IOException e) {
      Throwables.propagate(e);
    }
  }
  return b.toString();
}
