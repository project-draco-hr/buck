{
  JavaLibrary accumulateClassNames=createMock(JavaLibrary.class);
  expect(accumulateClassNames.getClassNamesToHashes()).andReturn(ImmutableSortedMap.of("com/example/Foo",HashCode.fromString("cafebabe"))).anyTimes();
  replayAll();
  BuildTarget buildTarget=BuildTarget.builder("//foo","bar").build();
  BuildRuleParams params=new FakeBuildRuleParamsBuilder(buildTarget).build();
  DexProducedFromJavaLibrary preDexWithClasses=new DexProducedFromJavaLibrary(params,new SourcePathResolver(new BuildRuleResolver()),accumulateClassNames);
  assertNull(preDexWithClasses.getPathToOutputFile());
  assertEquals(Paths.get("buck-out/gen/foo/bar.dex.jar"),preDexWithClasses.getPathToDex());
  verifyAll();
}
