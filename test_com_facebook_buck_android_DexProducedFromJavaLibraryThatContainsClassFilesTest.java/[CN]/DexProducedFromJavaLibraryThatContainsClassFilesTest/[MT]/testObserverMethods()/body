{
  JavaLibrary accumulateClassNames=createMock(JavaLibrary.class);
  expect(accumulateClassNames.getClassNamesToHashes()).andReturn(ImmutableSortedMap.of("com/example/Foo",HashCode.fromString("cafebabe"))).anyTimes();
  replayAll();
  BuildTarget buildTarget=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=new FakeBuildRuleParamsBuilder(buildTarget).build();
  DexProducedFromJavaLibrary preDexWithClasses=new DexProducedFromJavaLibrary(params,new SourcePathResolver(new BuildRuleResolver(TargetGraph.EMPTY,new BuildTargetNodeToBuildRuleTransformer())),accumulateClassNames);
  assertNull(preDexWithClasses.getPathToOutput());
  assertEquals(Paths.get("buck-out/gen/foo/bar.dex.jar"),preDexWithClasses.getPathToDex());
  verifyAll();
}
