{
  if (!WatchEvents.isPathChangeEvent(event)) {
    LOG.debug("Parser invalidating entire cache on overflow.");
    invalidateAllCaches();
    return;
  }
  Path path=(Path)event.context();
  for (  Cell cell : knownCells) {
    try {
      if (isPathCreateOrDeleteEvent(event)) {
        BuildFileTree buildFiles=buildFileTrees.get(cell);
        if (path.endsWith(cell.getBuildFileName())) {
          buildFileTrees.invalidate(cell);
        }
        if (!isTempFile(cell,path)) {
          invalidateContainingBuildFile(cell,buildFiles,path);
        }
 else {
          LOG.debug("Not invalidating the owning build file of %s because it is a temporary file.",cell.getFilesystem().resolve(path).toAbsolutePath().toString());
        }
      }
    }
 catch (    ExecutionException|UncheckedExecutionException e) {
      try {
        Throwables.propagateIfInstanceOf(e,BuildFileParseException.class);
        Throwables.propagate(e);
      }
 catch (      BuildFileParseException bfpe) {
        LOG.warn("Unable to parse already parsed build file.",bfpe);
      }
    }
  }
  invalidatePath(path);
}
