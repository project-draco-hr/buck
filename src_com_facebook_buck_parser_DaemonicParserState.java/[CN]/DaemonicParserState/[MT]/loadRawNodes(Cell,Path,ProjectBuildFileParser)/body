{
  return allRawNodes.get(buildFile,new Callable<ImmutableList<Map<String,Object>>>(){
    @SuppressWarnings("unchecked") @Override public ImmutableList<Map<String,Object>> call() throws Exception {
      List<Map<String,Object>> rawNodes=parser.getAllRulesAndMetaRules(buildFile);
      ImmutableSet<Path> dependentsOfEveryNode=ImmutableSet.of();
      ImmutableList.Builder<Map<String,Object>> toReturn=ImmutableList.builder();
      for (      Map<String,Object> rawNode : rawNodes) {
        if (rawNode.containsKey(INCLUDES_META_RULE)) {
          List<String> fileNames=((List<String>)rawNode.get(INCLUDES_META_RULE));
          Preconditions.checkNotNull(fileNames);
          dependentsOfEveryNode=FluentIterable.from(fileNames).transform(new Function<String,Path>(){
            @Override public Path apply(            String path){
              return cell.getFilesystem().resolve(Paths.get(path));
            }
          }
).toSet();
        }
 else {
          toReturn.add(rawNode);
        }
      }
synchronized (this) {
        for (        Path dependent : dependentsOfEveryNode) {
          buildFileDependents.put(dependent,buildFile);
        }
      }
      Iterable<String> defaultIncludes=new ParserConfig(cell.getBuckConfig()).getDefaultIncludes();
synchronized (this) {
        for (        String include : defaultIncludes) {
          int slashesIndex=include.indexOf("//");
          Preconditions.checkState(slashesIndex != -1);
          buildFileDependents.put(cell.getFilesystem().resolve(include.substring(2)),buildFile);
        }
      }
      return toReturn.build();
    }
  }
);
}
