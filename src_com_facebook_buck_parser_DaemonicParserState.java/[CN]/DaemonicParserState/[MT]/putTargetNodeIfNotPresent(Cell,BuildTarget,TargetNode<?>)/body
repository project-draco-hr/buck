{
  invalidateIfProjectBuildFileParserStateChanged(cell);
  final Path buildFile=cell.getAbsolutePathToBuildFile(target);
  invalidateIfBuckConfigHasChanged(cell,buildFile);
  try (AutoCloseableLock writeLock=nodesAndTargetsLock.writeLock()){
    TargetNode<?> updatedNode=allTargetNodes.get(target,targetNode);
    if (updatedNode == targetNode) {
      targetsCornucopia.put(target.getUnflavoredBuildTarget(),target);
    }
    return updatedNode;
  }
 }
