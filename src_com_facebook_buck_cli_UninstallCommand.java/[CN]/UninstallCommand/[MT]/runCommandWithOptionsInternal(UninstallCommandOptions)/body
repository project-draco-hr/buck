{
  Verbosity verbosity=console.getVerbosity();
  Logging.setLoggingLevelForVerbosity(verbosity);
  if (options.getArguments().size() != 1) {
    getStdErr().println("Must specify exactly one android_binary() rule.");
    return 1;
  }
  Parser parser=getParser();
  BuildTargetParser buildTargetParser=parser.getBuildTargetParser();
  String buildTargetName=options.getArgumentsFormattedAsBuildTargets().get(0);
  DependencyGraph dependencyGraph;
  BuildTarget buildTarget;
  try {
    buildTarget=buildTargetParser.parse(buildTargetName,ParseContext.fullyQualified());
    dependencyGraph=parser.parseBuildFilesForTargets(ImmutableList.of(buildTarget),options.getDefaultIncludes(),getBuckEventBus());
  }
 catch (  BuildTargetException|BuildFileParseException e) {
    console.printBuildFailureWithoutStacktrace(e);
    return 1;
  }
  BuildRule buildRule=dependencyGraph.findBuildRuleByTarget(buildTarget);
  if (!(buildRule instanceof InstallableApk)) {
    console.printBuildFailure(String.format("Specified rule %s must be of type android_binary() or apk_genrule() but was %s().\n",buildRule.getFullyQualifiedName(),buildRule.getType().getName()));
    return 1;
  }
  InstallableApk installableApk=(InstallableApk)buildRule;
  ExecutionContext context=createExecutionContext(options,dependencyGraph);
  final AdbHelper adbHelper=new AdbHelper(console,getBuckEventBus());
  String appId=AdbHelper.tryToExtractPackageNameFromManifest(installableApk);
  return adbHelper.uninstallApk(appId,options.adbOptions(),options.targetDeviceOptions(),options.uninstallOptions(),context,options.getBuckConfig()) ? 0 : 1;
}
