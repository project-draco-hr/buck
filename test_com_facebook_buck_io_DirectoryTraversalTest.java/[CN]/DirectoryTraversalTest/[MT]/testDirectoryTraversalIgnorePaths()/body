{
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"directory_traversal_ignore_paths",temporaryFolder);
  workspace.setUp();
  Files.createDirectories(workspace.resolve(Paths.get("loop/1")));
  Files.createSymbolicLink(workspace.resolve(Paths.get("loop/1/upwards")),Paths.get("../"));
  Files.deleteIfExists(workspace.resolve(Paths.get("local.properties")));
  final ImmutableSet<String> expectedVisitedPaths=ImmutableSet.of(Paths.get("b/b_file").toString(),Paths.get("b/d/b_d_file").toString(),Paths.get(".buckconfig.local").toString(),Paths.get("file").toString());
  final ImmutableSet.Builder<String> visitedPaths=ImmutableSet.builder();
  new DirectoryTraversal(temporaryFolder.getRoot(),MorePaths.asPaths(ImmutableSet.of("a","b/c","loop","loop/1"))){
    @Override public void visit(    Path file,    String relativePath){
      visitedPaths.add(relativePath);
    }
  }
.traverse();
  assertEquals("Visited paths should match expected set",expectedVisitedPaths,visitedPaths.build());
}
