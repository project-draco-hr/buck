{
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"directory_traversal_ignore_paths",temporaryFolder);
  workspace.setUp();
  Files.createDirectories(workspace.resolve(Paths.get("loop/1")));
  Files.createSymbolicLink(workspace.resolve(Paths.get("loop/1/upwards")),Paths.get("../"));
  Files.deleteIfExists(workspace.resolve(Paths.get("local.properties")));
  final ImmutableSet<String> expectedVisitedPaths=ImmutableSet.of("b/b_file","b/d/b_d_file","file");
  final ImmutableSet.Builder<String> visitedPaths=ImmutableSet.builder();
  new DirectoryTraversal(temporaryFolder.getRoot(),MorePaths.asPaths(ImmutableSet.of("a","b/c","loop","loop/1"))){
    @Override public void visit(    Path file,    String relativePath){
      visitedPaths.add(relativePath);
    }
  }
.traverse();
  assertEquals("Visited paths should match expected set",expectedVisitedPaths,visitedPaths.build());
}
