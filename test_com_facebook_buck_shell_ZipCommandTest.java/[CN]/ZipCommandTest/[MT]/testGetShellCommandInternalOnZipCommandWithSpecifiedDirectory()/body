{
  final String zipFile="/path/to/file.zip";
  final int compressionLevel=ZipCommand.DEFAULT_COMPRESSION_LEVEL;
  final File directory=new File("/some/other/path");
  ExecutionContext context=createMock(ExecutionContext.class);
  expect(context.getVerbosity()).andReturn(Verbosity.STANDARD_INFORMATION);
  replay(context);
  List<String> expectedShellCommand=new ImmutableList.Builder<String>().add("zip").add("-q").add("-X").add("-r").add("-" + compressionLevel).add(zipFile).add("-i*").add(".").build();
  ZipCommand command=new ZipCommand(zipFile,directory);
  MoreAsserts.assertListEquals(expectedShellCommand,command.getShellCommandInternal(context));
  assertEquals(directory,command.getWorkingDirectory());
  verify(context);
}
