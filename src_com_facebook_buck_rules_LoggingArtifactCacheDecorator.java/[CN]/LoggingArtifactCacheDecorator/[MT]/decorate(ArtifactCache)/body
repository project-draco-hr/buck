{
  return new ArtifactCache(){
    @Override public CacheResult fetch(    RuleKey ruleKey,    File output){
      eventBus.post(ArtifactCacheEvent.started(ArtifactCacheEvent.Operation.FETCH));
      CacheResult fetchResult=delegate.fetch(ruleKey,output);
      eventBus.post(ArtifactCacheEvent.finished(ArtifactCacheEvent.Operation.FETCH,fetchResult));
      return fetchResult;
    }
    @Override public void store(    RuleKey ruleKey,    File output){
      eventBus.post(ArtifactCacheEvent.started(ArtifactCacheEvent.Operation.STORE));
      delegate.store(ruleKey,output);
      eventBus.post(ArtifactCacheEvent.finished(ArtifactCacheEvent.Operation.STORE));
    }
  }
;
}
