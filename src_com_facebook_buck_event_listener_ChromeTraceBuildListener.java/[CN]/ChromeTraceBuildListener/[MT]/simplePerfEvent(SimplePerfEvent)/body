{
  ChromeTraceEvent.Phase phase=null;
switch (perfEvent.getEventType()) {
case STARTED:
    phase=ChromeTraceEvent.Phase.BEGIN;
  break;
case FINISHED:
phase=ChromeTraceEvent.Phase.END;
break;
case UPDATED:
phase=ChromeTraceEvent.Phase.IMMEDIATE;
break;
}
if (phase == null) {
throw new IllegalStateException("Unsupported perf event type: " + perfEvent.getEventType());
}
writeChromeTraceEvent("buck",CaseFormat.UPPER_CAMEL.converterTo(CaseFormat.LOWER_UNDERSCORE).convert(perfEvent.getEventId().getValue()),phase,ImmutableMap.copyOf(Maps.transformValues(perfEvent.getEventInfo(),Functions.toStringFunction())),perfEvent);
}
