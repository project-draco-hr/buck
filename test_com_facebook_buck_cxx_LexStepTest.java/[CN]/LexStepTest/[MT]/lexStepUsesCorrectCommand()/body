{
  ProjectFilesystem projectFilesystem=new FakeProjectFilesystem();
  ExecutionContext context=TestExecutionContext.newBuilder().setProjectFilesystem(projectFilesystem).build();
  ImmutableList<String> lexPrefix=ImmutableList.of("lex");
  ImmutableList<String> flags=ImmutableList.of("-flag");
  Path outputSource=Paths.get("outputSource");
  Path outputHeader=Paths.get("outputHeader");
  Path input=Paths.get("input");
  LexStep lexStep=new LexStep(lexPrefix,flags,outputSource,outputHeader,input);
  ImmutableList<String> expected=ImmutableList.<String>builder().addAll(lexPrefix).addAll(flags).add("--outfile=" + outputSource.toString()).add("--header-file=" + outputHeader.toString()).add(input.toString()).build();
  ImmutableList<String> actual=lexStep.getShellCommand(context);
  assertEquals(expected,actual);
}
