{
  ImmutableList.Builder<String> flagsBuilder=ImmutableList.builder();
  flagsBuilder.addAll(flags.or(ImmutableList.<String>of()));
  for (  Pair<String,ImmutableList<String>> pair : platformFlags.or(ImmutableList.<Pair<String,ImmutableList<String>>>of())) {
    Pattern pattern=patternCache.getUnchecked(pair.getFirst());
    Matcher matcher=pattern.matcher(platform.toString());
    if (matcher.find()) {
      flagsBuilder.addAll(pair.getSecond());
      break;
    }
  }
  return flagsBuilder.build();
}
