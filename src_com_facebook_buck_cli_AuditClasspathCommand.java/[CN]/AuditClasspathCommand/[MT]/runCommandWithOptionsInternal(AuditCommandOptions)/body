{
  final ImmutableSet<String> fullyQualifiedBuildTargets=ImmutableSet.copyOf(options.getArgumentsFormattedAsBuildTargets());
  if (fullyQualifiedBuildTargets.isEmpty()) {
    console.printBuildFailure("Please specify at least one build target.");
    return 1;
  }
  PartialGraph partialGraph;
  try {
    partialGraph=PartialGraph.createPartialGraph(new Predicate<TargetNode<?>>(){
      @Override public boolean apply(      TargetNode<?> input){
        return fullyQualifiedBuildTargets.contains(input.getBuildTarget().getFullyQualifiedName());
      }
    }
,getProjectFilesystem(),options.getDefaultIncludes(),getParser(),getBuckEventBus(),console,environment,false);
  }
 catch (  BuildTargetException|BuildFileParseException e) {
    console.printBuildFailureWithoutStacktrace(e);
    return 1;
  }
  if (options.shouldGenerateDotOutput()) {
    return printDotOutput(partialGraph.getActionGraph());
  }
 else   if (options.shouldGenerateJsonOutput()) {
    return printJsonClasspath(partialGraph);
  }
 else {
    return printClasspath(partialGraph);
  }
}
