{
  List<String> vmArgs=ImmutableList.of("--one");
  JavaTestRule rule=newRule(vmArgs);
  TargetDevice device=new TargetDevice(TargetDevice.Type.REAL_DEVICE,null);
  List<String> amended=rule.amendVmArgs(vmArgs,Optional.of(device));
  List<String> expected=ImmutableList.of("--one","-Dbuck.device=device");
  assertEquals(expected,amended);
}
