{
  Preconditions.checkNotNull(platformId);
  Preconditions.checkNotNull(androidSdkDir);
  Pattern platformPattern=Pattern.compile("Google Inc\\.:Google APIs:(\\d+)");
  Matcher platformMatcher=platformPattern.matcher(platformId);
  if (platformMatcher.matches()) {
    try {
      int apiLevel=Integer.parseInt(platformMatcher.group(1));
      return Optional.of(new AndroidWithGoogleApisFactory().newInstance(androidSdkDir,apiLevel));
    }
 catch (    NumberFormatException e) {
      return Optional.absent();
    }
  }
 else {
    return Optional.absent();
  }
}
