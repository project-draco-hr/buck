{
  String addonPath=String.format("/add-ons/addon-google_apis-google-%d/libs/",apiLevel);
  File addonDirectory=new File(androidSdkDir.getPath() + addonPath);
  String[] addonFiles;
  if (!addonDirectory.isDirectory() || (addonFiles=addonDirectory.list(new AddonFilter())) == null || addonFiles.length == 0) {
    throw new HumanReadableException("Google APIs not found in %s.\n" + "Please run '%s/tools/android sdk' and select both 'SDK Platform' and " + "'Google APIs' under Android (API %d)",addonDirectory.getAbsolutePath(),androidSdkDir.getPath(),apiLevel);
  }
  ImmutableSet.Builder<String> builder=ImmutableSet.builder();
  Arrays.sort(addonFiles);
  for (  String filename : addonFiles) {
    builder.add(addonPath + filename);
  }
  Set<String> additionalJarPaths=builder.build();
  return createFromDefaultDirectoryStructure(String.format("Google Inc.:Google APIs:%d",apiLevel),androidSdkDir,String.format("platforms/android-%d",apiLevel),additionalJarPaths);
}
