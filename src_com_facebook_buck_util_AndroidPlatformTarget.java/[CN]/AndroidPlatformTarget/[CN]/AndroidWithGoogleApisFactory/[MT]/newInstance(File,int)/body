{
  String addonPath=String.format("/add-ons/addon-google_apis-google-%d/libs/",apiLevel);
  File addonDirectory=new File(androidSdkDir.getPath() + addonPath);
  String[] addonFiles=addonDirectory.list(new AddonFilter());
  if (addonFiles == null || addonFiles.length == 0) {
    throw new HumanReadableException("Google APIs not found in %s.\n" + "Please run '$ANDROID_SDK/tools/android sdk' and select both 'SDK Platform' and " + "'Google APIs' under Android (API %d)",addonDirectory.getAbsolutePath(),apiLevel);
  }
  ImmutableSet.Builder<String> builder=ImmutableSet.builder();
  for (  String filename : addonFiles) {
    builder.add(addonPath + filename);
  }
  Set<String> ADDITIONAL_JAR_PATHS=builder.build();
  return createFromDefaultDirectoryStructure(String.format("Google Inc.:Google APIs:%d",apiLevel),androidSdkDir,String.format("platforms/android-%d",apiLevel),ADDITIONAL_JAR_PATHS);
}
