def test_relpath(self):
    real_getcwd = os.getcwd
    try:
        os.getcwd = (lambda : '/home/user/bar')
        curdir = os.path.split(os.getcwd())[(-1)]
        self.assertRaises(ValueError, relpath, '')
        self.assertEqual('a', relpath('a'))
        self.assertEqual('a', relpath(posixpath.abspath('a')))
        self.assertEqual('a/b', relpath('a/b'))
        self.assertEqual('../a/b', relpath('../a/b'))
        self.assertEqual((('../' + curdir) + '/a'), relpath('a', '../b'))
        self.assertEqual((('../' + curdir) + '/a/b'), relpath('a/b', '../c'))
        self.assertEqual('../../a', relpath('a', 'b/c'))
    finally:
        os.getcwd = real_getcwd
