{
  Optional<Path> infoPlistPath;
  if (bundle.getInfoPlist().isPresent()) {
    infoPlistPath=Optional.of(bundle.getInfoPlist().get().resolve());
  }
 else {
    infoPlistPath=Optional.absent();
  }
  PBXNativeTarget target=generateBinaryTarget(project,rule,(AbstractAppleNativeTargetBuildRule)bundle.getBinary(),bundleToTargetProductType(bundle),"%s." + bundle.getExtensionString(),infoPlistPath,true,true);
  Iterable<BuildRule> copiedRules=AppleBuildRules.getRecursiveRuleDependenciesOfType(AppleBuildRules.RecursiveRuleDependenciesMode.COPYING,rule,AppleLibraryDescription.TYPE,AppleBinaryDescription.TYPE,AppleBundleDescription.TYPE);
  generateCopyFilesBuildPhases(project,target,copiedRules);
  addPostBuildScriptPhasesForDependencies(rule,target);
  project.getTargets().add(target);
  LOG.debug("Generated iOS bundle target %s",target);
  return target;
}
