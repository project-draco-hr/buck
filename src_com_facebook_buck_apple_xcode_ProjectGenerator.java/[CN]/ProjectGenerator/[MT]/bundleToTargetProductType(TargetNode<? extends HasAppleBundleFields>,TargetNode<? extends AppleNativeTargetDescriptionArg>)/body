{
  if (targetNode.getConstructorArg().getExtension().isLeft()) {
    AppleBundleExtension extension=targetNode.getConstructorArg().getExtension().getLeft();
    if (binaryNode.getType().equals(AppleLibraryDescription.TYPE)) {
      if (binaryNode.getBuildTarget().getFlavors().contains(CxxDescriptionEnhancer.SHARED_FLAVOR)) {
        Optional<PBXTarget.ProductType> productType=dylibProductTypeByBundleExtension(extension);
        if (productType.isPresent()) {
          return productType.get();
        }
      }
 else {
switch (extension) {
case FRAMEWORK:
          return PBXTarget.ProductType.STATIC_FRAMEWORK;
      }
    }
  }
 else   if (binaryNode.getType().equals(AppleBinaryDescription.TYPE)) {
switch (extension) {
case APP:
      return PBXTarget.ProductType.APPLICATION;
  }
}
 else if (binaryNode.getType().equals(AppleTestDescription.TYPE)) {
switch (extension) {
case OCTEST:
    return PBXTarget.ProductType.BUNDLE;
case XCTEST:
  return PBXTarget.ProductType.UNIT_TEST;
}
}
}
return PBXTarget.ProductType.BUNDLE;
}
