{
  if (targetNode.getConstructorArg().getExtension().isLeft()) {
    AppleBundleExtension extension=targetNode.getConstructorArg().getExtension().getLeft();
    if (binaryNode.getType().equals(AppleLibraryDescription.TYPE)) {
      if (binaryNode.getBuildTarget().getFlavors().contains(AppleLibraryDescription.DYNAMIC_LIBRARY)) {
switch (extension) {
case FRAMEWORK:
          return PBXTarget.ProductType.FRAMEWORK;
case APPEX:
        return PBXTarget.ProductType.APP_EXTENSION;
case BUNDLE:
      return PBXTarget.ProductType.BUNDLE;
case OCTEST:
    return PBXTarget.ProductType.BUNDLE;
case XCTEST:
  return PBXTarget.ProductType.UNIT_TEST;
}
}
 else {
switch (extension) {
case FRAMEWORK:
return PBXTarget.ProductType.STATIC_FRAMEWORK;
}
}
}
 else if (binaryNode.getType().equals(AppleBinaryDescription.TYPE)) {
switch (extension) {
case APP:
return PBXTarget.ProductType.APPLICATION;
}
}
 else if (binaryNode.getType().equals(AppleTestDescription.TYPE)) {
switch (extension) {
case OCTEST:
return PBXTarget.ProductType.BUNDLE;
case XCTEST:
return PBXTarget.ProductType.UNIT_TEST;
}
}
}
return PBXTarget.ProductType.BUNDLE;
}
