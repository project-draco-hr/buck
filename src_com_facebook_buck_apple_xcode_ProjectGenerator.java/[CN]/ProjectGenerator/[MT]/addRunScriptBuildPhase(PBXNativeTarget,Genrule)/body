{
  PBXShellScriptBuildPhase shellScriptBuildPhase=new PBXShellScriptBuildPhase();
  target.getBuildPhases().add(shellScriptBuildPhase);
  for (  Path path : rule.getSrcs()) {
    shellScriptBuildPhase.getInputPaths().add(repoRootRelativeToOutputDirectory.resolve(path).toString());
  }
  StringBuilder bashCommandBuilder=new StringBuilder();
  ShellStep genruleStep=rule.createGenruleStep();
  for (  String commandElement : genruleStep.getShellCommand(executionContext)) {
    if (bashCommandBuilder.length() > 0) {
      bashCommandBuilder.append(' ');
    }
    bashCommandBuilder.append(Escaper.escapeAsBashString(commandElement));
  }
  shellScriptBuildPhase.setShellScript(bashCommandBuilder.toString());
}
