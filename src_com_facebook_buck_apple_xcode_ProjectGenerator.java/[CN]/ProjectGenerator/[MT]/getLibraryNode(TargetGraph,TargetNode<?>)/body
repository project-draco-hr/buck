{
  Optional<TargetNode<AppleNativeTargetDescriptionArg>> library=Optional.absent();
  if (targetNode.getType().equals(AppleLibraryDescription.TYPE)) {
    library=Optional.of((TargetNode<AppleNativeTargetDescriptionArg>)targetNode);
  }
 else   if (targetNode.getType().equals(AppleBundleDescription.TYPE)) {
    TargetNode<AppleBundleDescription.Arg> bundle=(TargetNode<AppleBundleDescription.Arg>)targetNode;
    if (isFrameworkBundle(bundle.getConstructorArg())) {
      library=Optional.of(Preconditions.checkNotNull((TargetNode<AppleNativeTargetDescriptionArg>)targetGraph.get(bundle.getConstructorArg().binary)));
    }
  }
  return library;
}
