{
  ConfigInXcodeLayout extractedLayers=null;
  ImmutableList<XcodeRuleConfiguration.Layer> layers=configuration.getLayers();
switch (layers.size()) {
case 2:
    if (layers.get(0).getLayerType() == XcodeRuleConfiguration.LayerType.FILE && layers.get(1).getLayerType() == XcodeRuleConfiguration.LayerType.FILE) {
      extractedLayers=new ConfigInXcodeLayout(buildTarget,layers.get(0).getPath(),ImmutableMap.<String,String>of(),layers.get(1).getPath(),ImmutableMap.<String,String>of());
    }
  break;
case 4:
if (layers.get(0).getLayerType() == XcodeRuleConfiguration.LayerType.FILE && layers.get(1).getLayerType() == XcodeRuleConfiguration.LayerType.INLINE_SETTINGS && layers.get(2).getLayerType() == XcodeRuleConfiguration.LayerType.FILE && layers.get(3).getLayerType() == XcodeRuleConfiguration.LayerType.INLINE_SETTINGS) {
  extractedLayers=new ConfigInXcodeLayout(buildTarget,layers.get(0).getPath(),layers.get(1).getInlineSettings().or(ImmutableMap.<String,String>of()),layers.get(2).getPath(),layers.get(3).getInlineSettings().or(ImmutableMap.<String,String>of()));
}
break;
default :
break;
}
if (extractedLayers == null) {
throw new HumanReadableException("Configuration layers cannot be expressed in xcode for target: " + buildTarget + "\n"+ "   expected: [File, Inline settings, File, Inline settings]");
}
return extractedLayers;
}
