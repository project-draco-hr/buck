{
  final ImmutableSet<BuildRuleType> requestedTypes=ImmutableSet.copyOf(types);
  return Iterables.filter(rules,new Predicate<BuildRule>(){
    @Override public boolean apply(    BuildRule input){
      return requestedTypes.contains(input.getType());
    }
  }
);
}
