{
  ArtifactCache artifactCache=new NoopArtifactCache();
  BuckEventBus eventBus=BuckEventBusFactory.newInstance();
  AndroidDirectoryResolver androidDirectoryResolver=new FakeAndroidDirectoryResolver();
  Repository repository=new TestRepositoryBuilder().setFilesystem(filesystem).build();
  return CommandRunnerParamsForTesting.createCommandRunnerParamsForTesting(console,repository,androidDirectoryResolver,new InstanceArtifactCacheFactory(artifactCache),eventBus,buckConfig,Platform.detect(),ImmutableMap.copyOf(System.getenv()),new FakeJavaPackageFinder(),new ObjectMapper(),Optional.<WebServer>absent());
}
