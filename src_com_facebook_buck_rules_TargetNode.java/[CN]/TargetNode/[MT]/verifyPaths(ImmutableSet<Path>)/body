{
  Path basePath=getBuildTarget().getBasePath();
  BuildFileTree buildFileTree=ruleFactoryParams.getBuildFileTree();
  for (  Path path : paths) {
    if (!basePath.toString().isEmpty() && !path.startsWith(basePath)) {
      throw new InvalidSourcePathInputException("'%s' in '%s' refers to a parent directory.",basePath.relativize(path),getBuildTarget());
    }
    Optional<Path> ancestor=buildFileTree.getBasePathOfAncestorTarget(path);
    if (!ancestor.isPresent()) {
      throw new InvalidSourcePathInputException("'%s' in '%s' crosses a buck package boundary.  This is probably caused by " + "specifying one of the folders in '%s' in your .buckconfig under `project.ignore`.",path,getBuildTarget(),path);
    }
    if (!ancestor.get().equals(basePath)) {
      throw new InvalidSourcePathInputException("'%s' in '%s' crosses a buck package boundary.  This file is owned by '%s'.  Find " + "the owning rule that references '%s', and use a reference to that rule instead " + "of referencing the desired file directly.",path,getBuildTarget(),ancestor.get(),path);
    }
  }
  return paths;
}
