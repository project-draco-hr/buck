{
  if (string == null)   throw new IllegalArgumentException("null input: string");
  final int stringLength=string.length;
  final char[] pattern=m_pattern;
  final int patternLength=m_patternLength;
  int si=0, pi=0;
  boolean star=false;
  next:   while (true) {
    int i=0;
    for (; pi + i < patternLength; ++i) {
      final char patternChar=pattern[pi + i];
      if (patternChar == '*') {
        si+=i;
        pi+=(i + 1);
        star=true;
        continue next;
      }
      final int si_i=si + i;
      if (si_i == stringLength)       return false;
      if (patternChar != string[si_i]) {
        if (patternChar == '?')         continue;
        if (!star)         return false;
        ++si;
        continue next;
      }
    }
    if (si + i == stringLength)     return true;
    if (!star)     return false;
    ++si;
  }
}
