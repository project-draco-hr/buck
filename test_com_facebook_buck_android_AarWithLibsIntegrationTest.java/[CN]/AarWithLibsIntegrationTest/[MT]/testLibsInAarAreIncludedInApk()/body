{
  AssumeAndroidPlatform.assumeSdkIsAvailable();
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"android_project",tmp);
  workspace.setUp();
  workspace.runBuckCommand("build","//java/com/example/aar:extract-classes-dex").assertSuccess();
  String smali=workspace.getFileContents("buck-out/gen/java/com/example/aar/smali-files.txt");
  String primaryClass=MorePaths.pathWithPlatformSeparators("com/example/PrimaryClass.smali");
  String dependency=MorePaths.pathWithPlatformSeparators("com/example/dependency/Dependency.smali");
  assertThat("A class from the classes.jar in the .aar should make it into the APK.",smali,containsString(primaryClass));
  assertThat("A class from a jar in the libs directory in the .aar should make it into the APK.",smali,containsString(dependency));
}
