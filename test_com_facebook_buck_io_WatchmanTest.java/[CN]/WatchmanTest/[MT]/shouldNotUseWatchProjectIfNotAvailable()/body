{
  Map<ProcessExecutorParams,FakeProcess> processMap=new HashMap<>();
  processMap.put(ProcessExecutorParams.ofCommand(exe,"version"),new FakeProcess(0,"{\"version\":\"3.0.0\"}",""));
  processMap.put(ProcessExecutorParams.ofCommand(exe,"watch",root),new FakeProcess(0,"{\"version\":\"3.0.0\",\"watch\":\"" + root + "\"}",""));
  ProcessExecutor executor=new FakeProcessExecutor(processMap);
  Watchman watchman=Watchman.build(executor,Paths.get(root),env,finder,new TestConsole());
  assertEquals("3.0.0",watchman.getVersion().get());
  assertEquals(root,watchman.getWatchRoot().get());
  assertEquals(Optional.absent(),watchman.getProjectPrefix());
}
