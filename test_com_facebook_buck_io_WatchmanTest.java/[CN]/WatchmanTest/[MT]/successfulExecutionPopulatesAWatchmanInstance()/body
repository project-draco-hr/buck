{
  SettableFakeClock clock=new SettableFakeClock(0,0);
  FakeListeningProcessExecutor executor=new FakeListeningProcessExecutor(ImmutableMultimap.<ProcessExecutorParams,FakeListeningProcessState>builder().putAll(ProcessExecutorParams.ofCommand(exe,"version"),FakeListeningProcessState.ofStdout("{\"version\":\"3.4.0\"}"),FakeListeningProcessState.ofExit(0)).putAll(ProcessExecutorParams.ofCommand(exe,"watch-project",root),FakeListeningProcessState.ofStdout("{\"version\":\"3.4.0\",\"watch\":\"" + root + "\"}"),FakeListeningProcessState.ofExit(0)).build(),clock);
  Watchman watchman=Watchman.build(executor,Paths.get(root),env,finder,new TestConsole(),clock);
  assertEquals("3.4.0",watchman.getVersion().get());
  assertEquals(root,watchman.getWatchRoot().get());
  assertEquals(Optional.absent(),watchman.getProjectPrefix());
}
