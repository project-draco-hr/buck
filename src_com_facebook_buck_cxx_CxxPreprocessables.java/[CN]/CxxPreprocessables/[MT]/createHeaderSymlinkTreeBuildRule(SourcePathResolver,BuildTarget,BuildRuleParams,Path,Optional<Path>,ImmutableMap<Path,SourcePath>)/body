{
  BuildRuleParams paramsWithoutDeps=params.copyWithChanges(target,Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of()),Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of()));
  try {
    if (headerMapPath.isPresent()) {
      return new HeaderSymlinkTreeWithHeaderMap(paramsWithoutDeps,resolver,root,headerMapPath.get(),links);
    }
 else {
      return new HeaderSymlinkTree(paramsWithoutDeps,resolver,root,links);
    }
  }
 catch (  SymlinkTree.InvalidSymlinkTreeException e) {
    throw e.getHumanReadableExceptionForBuildTarget(target.getUnflavoredBuildTarget());
  }
}
