{
{
    BuildRule rootRule=createBuildRuleWithDefaults(BuildTarget.builder("//foo","root").build(),ImmutableSortedSet.<BuildRule>of(),iosLibraryDescription);
    PartialGraph partialGraph=createPartialGraphFromBuildRules(ImmutableSet.of(rootRule));
    SchemeGenerator schemeGenerator=new SchemeGenerator(projectFilesystem,partialGraph,rootRule,ImmutableSet.of(rootRule),ImmutableSet.<BuildRule>of(),"TestScheme",Paths.get("_gen/Foo.xcworkspace/scshareddata/xcshemes"),SchemeActionType.DEFAULT_CONFIG_NAMES);
    PBXTarget rootTarget=new PBXNativeTarget("rootRule");
    rootTarget.setGlobalID("rootGID");
    rootTarget.setProductReference(new PBXFileReference("root.a","root.a",PBXReference.SourceTree.BUILT_PRODUCTS_DIR));
    schemeGenerator.addRuleToTargetMap(rootRule,rootTarget);
    Path pbxprojectPath=Paths.get("foo/Foo.xcodeproj/project.pbxproj");
    schemeGenerator.addTargetToProjectPathMap(rootTarget,pbxprojectPath);
    clock.setCurrentTimeMillis(49152);
    Path schemePath=schemeGenerator.writeScheme();
    assertThat(projectFilesystem.getLastModifiedTime(schemePath),equalTo(49152L));
  }
{
    BuildRule rootRule=createBuildRuleWithDefaults(BuildTarget.builder("//foo","root2").build(),ImmutableSortedSet.<BuildRule>of(),iosLibraryDescription);
    PartialGraph partialGraph=createPartialGraphFromBuildRules(ImmutableSet.of(rootRule));
    SchemeGenerator schemeGenerator=new SchemeGenerator(projectFilesystem,partialGraph,rootRule,ImmutableSet.of(rootRule),ImmutableSet.<BuildRule>of(),"TestScheme",Paths.get("_gen/Foo.xcworkspace/scshareddata/xcshemes"),SchemeActionType.DEFAULT_CONFIG_NAMES);
    PBXTarget rootTarget=new PBXNativeTarget("rootRule2");
    rootTarget.setGlobalID("root2GID");
    rootTarget.setProductReference(new PBXFileReference("root2.a","root2.a",PBXReference.SourceTree.BUILT_PRODUCTS_DIR));
    schemeGenerator.addRuleToTargetMap(rootRule,rootTarget);
    Path pbxprojectPath=Paths.get("foo/Foo.xcodeproj/project.pbxproj");
    schemeGenerator.addTargetToProjectPathMap(rootTarget,pbxprojectPath);
    clock.setCurrentTimeMillis(64738);
    Path schemePath=schemeGenerator.writeScheme();
    assertThat(projectFilesystem.getLastModifiedTime(schemePath),equalTo(64738L));
  }
}
