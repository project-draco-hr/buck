{
  File zipup=folder.newFolder("dir-zip");
  File subdir=new File(zipup,"dir");
  assertTrue(subdir.mkdirs());
  new File(subdir,"a.txt");
  Files.write(subdir.toPath().resolve("a.txt"),"cake".getBytes());
  Path outputJar=folder.getRoot().toPath().resolve("output.jar");
  JarDirectoryStep step=new JarDirectoryStep(outputJar,ImmutableSet.of(zipup.toPath()),null,null);
  ExecutionContext context=TestExecutionContext.newBuilder().setProjectFilesystem(new ProjectFilesystem(folder.getRoot().toPath())).build();
  int returnCode=step.execute(context);
  assertEquals(0,returnCode);
  assertTrue(Files.exists(outputJar));
  Date dosEpoch=new Date(ZipUtil.dosToJavaTime(ZipConstants.DOS_EPOCH_START));
  try (ZipInputStream is=new ZipInputStream(new FileInputStream(outputJar.toFile()))){
    for (ZipEntry entry=is.getNextEntry(); entry != null; entry=is.getNextEntry()) {
      assertEquals(entry.getName(),dosEpoch,new Date(entry.getTime()));
    }
  }
 }
