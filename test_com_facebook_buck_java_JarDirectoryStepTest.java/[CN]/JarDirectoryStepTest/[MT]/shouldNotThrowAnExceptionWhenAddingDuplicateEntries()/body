{
  File zipup=folder.newFolder("zipup");
  File first=createZip(new File(zipup,"a.zip"),"example.txt");
  File second=createZip(new File(zipup,"b.zip"),"example.txt","com/example/Main.class");
  JarDirectoryStep step=new JarDirectoryStep(Paths.get("output.jar"),ImmutableSet.of(Paths.get(first.getName()),Paths.get(second.getName())),"com.example.Main",null);
  ExecutionContext context=TestExecutionContext.newBuilder().setProjectFilesystem(new ProjectFilesystem(zipup.toPath())).build();
  int returnCode=step.execute(context);
  assertEquals(0,returnCode);
  File zip=new File(zipup,"output.jar");
  assertTrue(zip.exists());
  assertZipFileCountIs(3,zip);
  assertZipContains(zip,"example.txt");
}
