{
  File zipup=folder.newFolder("zipup");
  File first=createZip(new File(zipup,"a.zip"),"example.txt");
  File second=createZip(new File(zipup,"b.zip"),"example.txt");
  JarDirectoryStep step=new JarDirectoryStep("output.jar",ImmutableSet.of(first.getName(),second.getName()),"com.example.Main",null);
  ExecutionContext context=ExecutionContext.builder().setProjectFilesystem(new ProjectFilesystem(zipup)).setConsole(new TestConsole()).setEventBus(BuckEventBusFactory.newInstance()).setPlatform(Platform.detect()).build();
  int returnCode=step.execute(context);
  assertEquals(0,returnCode);
  File zip=new File(zipup,"output.jar");
  assertTrue(zip.exists());
  assertZipFileCountIs(2,zip);
  assertZipContains(zip,"example.txt");
}
