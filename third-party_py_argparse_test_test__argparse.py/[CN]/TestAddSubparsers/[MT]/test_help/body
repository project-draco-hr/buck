def test_help(self):
    self.assertEqual(self.parser.format_usage(), 'usage: PROG [-h] [--foo] bar {1,2} ...\n')
    self.assertEqual(self.parser.format_help(), textwrap.dedent('            usage: PROG [-h] [--foo] bar {1,2} ...\n\n            main description\n\n            positional arguments:\n              bar         bar help\n              {1,2}       command help\n\n            optional arguments:\n              -h, --help  show this help message and exit\n              --foo       foo help\n            '))
