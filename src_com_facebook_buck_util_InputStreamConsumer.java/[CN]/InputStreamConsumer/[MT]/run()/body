{
  String line;
  try {
    while ((line=inputReader.readLine()) != null) {
      if (shouldRedirectInputStreamToPrintStream) {
        if (!hasWrittenOutputToPrintStream) {
          hasWrittenOutputToPrintStream=true;
          printStream.print(ansi.getHighlightedWarningSequence());
        }
        printStream.println(line);
      }
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    if (hasWrittenOutputToPrintStream) {
      printStream.print(ansi.getHighlightedResetSequence());
    }
  }
}
