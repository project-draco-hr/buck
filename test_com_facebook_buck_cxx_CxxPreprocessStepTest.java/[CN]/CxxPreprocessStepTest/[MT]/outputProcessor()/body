{
  Path original=Paths.get("buck-out/foo#bar/world.h");
  Path replacement=Paths.get("hello/world.h");
  Function<String,String> processor=CxxPreprocessStep.createOutputLineProcessor(ImmutableMap.of(original,replacement));
  assertEquals(String.format("# 12 \"%s\"",replacement),processor.apply(String.format("# 12 \"%s\"",original)));
  assertEquals(String.format("# 12 \"%s\" 2 1",replacement),processor.apply(String.format("# 12 \"%s\" 2 1",original)));
  assertEquals("# 4 \"test.h\"",processor.apply("# 4 \"test.h\""));
  assertEquals("int main() {",processor.apply("int main() {"));
}
