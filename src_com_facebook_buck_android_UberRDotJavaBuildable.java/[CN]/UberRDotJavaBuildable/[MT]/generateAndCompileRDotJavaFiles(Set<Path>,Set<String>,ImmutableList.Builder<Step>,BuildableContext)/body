{
  Path rDotJavaSrc=getPathToGeneratedRDotJavaSrcFiles();
  commands.add(new MakeCleanDirectoryStep(rDotJavaSrc));
  GenRDotJavaStep genRDotJava=new GenRDotJavaStep(resDirectories,rDotJavaSrc,rDotJavaPackages.iterator().next(),false,rDotJavaPackages);
  commands.add(genRDotJava);
  Path rDotJavaBin=getPathToCompiledRDotJavaFiles();
  commands.add(new MakeCleanDirectoryStep(rDotJavaBin));
  Set<Path> javaSourceFilePaths=Sets.newHashSet();
  for (  String rDotJavaPackage : rDotJavaPackages) {
    Path path=rDotJavaSrc.resolve(rDotJavaPackage.replace('.','/')).resolve("R.java");
    javaSourceFilePaths.add(path);
  }
  JavacInMemoryStep javac=UberRDotJavaUtil.createJavacInMemoryCommandForRDotJavaFiles(javaSourceFilePaths,rDotJavaBin);
  commands.add(javac);
  buildableContext.recordArtifactsInDirectory(rDotJavaSrc);
  buildableContext.recordArtifactsInDirectory(rDotJavaBin);
}
