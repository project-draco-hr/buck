{
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  final BuildTarget headerTarget=BuildTargetFactory.newInstance("//:header");
  final BuildTarget headerSymlinkTreeTarget=BuildTargetFactory.newInstance("//:symlink");
  final Path headerSymlinkTreeRoot=Paths.get("symlink/tree/root");
  final BuildRule archive=new FakeBuildRule("//:archive");
  final Path archiveOutput=Paths.get("output/path/lib.a");
  final BuildRule sharedLibrary=new FakeBuildRule("//:shared");
  final Path sharedLibraryOutput=Paths.get("output/path/lib.so");
  final String sharedLibrarySoname="lib.so";
  CxxLibrary cxxLibrary=new CxxLibrary(params){
    @Override public CxxPreprocessorInput getCxxPreprocessorInput(){
      return new CxxPreprocessorInput(ImmutableSet.of(headerTarget,headerSymlinkTreeTarget),ImmutableList.<String>of(),ImmutableList.<String>of(),ImmutableMap.<Path,SourcePath>of(),ImmutableList.of(headerSymlinkTreeRoot),ImmutableList.<Path>of());
    }
    @Override public NativeLinkableInput getNativeLinkableInput(    Type type){
      return type == Type.STATIC ? new NativeLinkableInput(ImmutableList.<SourcePath>of(new BuildRuleSourcePath(archive)),ImmutableList.of(archiveOutput.toString())) : new NativeLinkableInput(ImmutableList.<SourcePath>of(new BuildRuleSourcePath(sharedLibrary)),ImmutableList.of(sharedLibraryOutput.toString()));
    }
    @Override public PythonPackageComponents getPythonPackageComponents(){
      return new PythonPackageComponents(ImmutableMap.<Path,SourcePath>of(),ImmutableMap.<Path,SourcePath>of(),ImmutableMap.<Path,SourcePath>of(Paths.get(sharedLibrarySoname),new PathSourcePath(sharedLibraryOutput)));
    }
  }
;
  CxxPreprocessorInput expectedCxxPreprocessorInput=new CxxPreprocessorInput(ImmutableSet.of(headerTarget,headerSymlinkTreeTarget),ImmutableList.<String>of(),ImmutableList.<String>of(),ImmutableMap.<Path,SourcePath>of(),ImmutableList.of(headerSymlinkTreeRoot),ImmutableList.<Path>of());
  assertEquals(expectedCxxPreprocessorInput,cxxLibrary.getCxxPreprocessorInput());
  NativeLinkableInput expectedStaticNativeLinkableInput=new NativeLinkableInput(ImmutableList.<SourcePath>of(new BuildRuleSourcePath(archive)),ImmutableList.of(archiveOutput.toString()));
  assertEquals(expectedStaticNativeLinkableInput,cxxLibrary.getNativeLinkableInput(NativeLinkable.Type.STATIC));
  NativeLinkableInput expectedSharedNativeLinkableInput=new NativeLinkableInput(ImmutableList.<SourcePath>of(new BuildRuleSourcePath(sharedLibrary)),ImmutableList.of(sharedLibraryOutput.toString()));
  assertEquals(expectedSharedNativeLinkableInput,cxxLibrary.getNativeLinkableInput(NativeLinkable.Type.SHARED));
  PythonPackageComponents expectedPythonPackageComponents=new PythonPackageComponents(ImmutableMap.<Path,SourcePath>of(),ImmutableMap.<Path,SourcePath>of(),ImmutableMap.<Path,SourcePath>of(Paths.get(sharedLibrarySoname),new PathSourcePath(sharedLibraryOutput)));
  assertEquals(expectedPythonPackageComponents,cxxLibrary.getPythonPackageComponents());
  assertEquals(ImmutableList.<Step>of(),cxxLibrary.getBuildSteps(null,null));
  assertNull(cxxLibrary.getPathToOutputFile());
  assertTrue(ImmutableList.copyOf(cxxLibrary.getInputsToCompareToOutput()).isEmpty());
}
