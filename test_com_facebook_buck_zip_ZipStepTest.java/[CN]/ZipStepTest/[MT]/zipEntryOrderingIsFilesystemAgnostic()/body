{
  Path output=Paths.get("output");
  Path zipdir=Paths.get("zipdir");
  FakeProjectFilesystem filesystem=new FakeProjectFilesystem();
  ExecutionContext context=TestExecutionContext.newBuilder().setProjectFilesystem(filesystem).build();
  filesystem.mkdirs(zipdir);
  filesystem.touch(zipdir.resolve("file1"));
  filesystem.touch(zipdir.resolve("file2"));
  ZipStep step=new ZipStep(output,ImmutableSet.<Path>of(),false,ZipStep.MIN_COMPRESSION_LEVEL,zipdir);
  assertEquals(0,step.execute(context));
  ImmutableList<String> entries1=getEntries(filesystem,output);
  filesystem=new FakeProjectFilesystem();
  context=TestExecutionContext.newBuilder().setProjectFilesystem(filesystem).build();
  filesystem.mkdirs(zipdir);
  filesystem.touch(zipdir.resolve("file2"));
  filesystem.touch(zipdir.resolve("file1"));
  step=new ZipStep(output,ImmutableSet.<Path>of(),false,ZipStep.MIN_COMPRESSION_LEVEL,zipdir);
  assertEquals(0,step.execute(context));
  ImmutableList<String> entries2=getEntries(filesystem,output);
  assertEquals(entries1,entries2);
}
