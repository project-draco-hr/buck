{
  Preconditions.checkNotNull(binaryBuildRule.getPathToOutput(),"Binary build rule " + binaryBuildRule.toString() + " has no output path.");
  if (!CodeSigning.hasValidSignature(context.getProcessExecutor(),binaryBuildRule.getPathToOutput())) {
    return (new DefaultShellStep(projectFilesystem.getRootPath(),ImmutableList.<String>builder().addAll(strip.getCommandPrefix(resolver)).add("-S").add(projectFilesystem.resolve(binaryBuildRule.getPathToOutput()).toString()).build(),strip.getEnvironment(resolver))).execute(context);
  }
 else {
    LOG.info("Not stripping code-signed binary.");
    return 0;
  }
}
