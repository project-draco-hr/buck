{
  ImmutableList<SerializableModule.SourceFolder> sourceFolders=FluentIterable.from(folders).filter(new Predicate<IjFolder>(){
    @Override public boolean apply(    IjFolder input){
      return input.getType() != IjFolder.Type.EXCLUDE_FOLDER;
    }
  }
).transform(new Function<IjFolder,SerializableModule.SourceFolder>(){
    @Override public SerializableModule.SourceFolder apply(    IjFolder input){
      Path inputPath=moduleBasePath.resolve(input.resolveModuleRelativePath(resolver));
      return new SerializableModule.SourceFolder(toModuleDirRelativeString(inputPath,moduleBasePath),input.isTest(),input.getWantsPackagePrefix() ? packagePrefix : null);
    }
  }
).toList();
  return Lists.newArrayList(sourceFolders);
}
