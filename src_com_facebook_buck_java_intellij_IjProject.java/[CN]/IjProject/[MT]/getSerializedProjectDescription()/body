{
  ImmutableSet.Builder<SerializableModule> serializableModuleListBuilder=new ImmutableSet.Builder<>();
  for (  IjModule module : moduleGraph.getNodes()) {
    SerializableModule serializedModule=new SerializableModule();
    serializedModule.name=module.getModuleName();
    serializedModule.pathToImlFile=module.getModuleImlFilePath();
    serializedModule.sourceFolders=toSourceFolders(module.getFolders(),javaPackageFinder.findJavaPackage(module.getModuleBasePath().resolve("removed")),module.getModuleBasePath());
    serializedModule.moduleGenPath=module.getRelativeGenPath();
    serializedModule.dependencies=FluentIterable.from(Iterables.concat(toDependentModules(moduleGraph.getOutgoingNodesFor(module)),librariesToDependentModules(module.getLibraries()),ImmutableList.of(DependentModule.newInheritedJdk()))).toList();
    serializedModule.isRootModule=module.getModuleBasePath().toString().isEmpty();
    serializedModule.hasAndroidFacet=false;
    serializedModule.isAndroidLibraryProject=false;
    serializedModule.isIntelliJPlugin=false;
    serializableModuleListBuilder.add(serializedModule);
  }
  return serializableModuleListBuilder.build().asList();
}
