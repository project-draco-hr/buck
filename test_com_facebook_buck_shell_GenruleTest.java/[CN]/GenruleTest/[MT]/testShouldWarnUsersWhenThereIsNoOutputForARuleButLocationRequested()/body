{
  BuildRule ruleWithNoOutput=JavaLibraryBuilder.createBuilder(new BuildTarget("//cheese","java")).build(new BuildRuleResolver());
  BuildRule genrule=GenruleBuilder.createGenrule(new BuildTarget("//cheese","cake")).setCmd("$(location //cheese:java").setOut("cake").addDep(ruleWithNoOutput).build();
  try {
    ((Genrule)genrule.getBuildable()).createGenruleStep().replaceMatches(new FakeProjectFilesystem(),"$(location //cheese:java)");
    fail("Location was null. Expected HumanReadableException with helpful message.");
  }
 catch (  HumanReadableException e) {
    assertTrue(e.getMessage(),e.getMessage().contains("there is no output generated by //cheese:java"));
  }
}
