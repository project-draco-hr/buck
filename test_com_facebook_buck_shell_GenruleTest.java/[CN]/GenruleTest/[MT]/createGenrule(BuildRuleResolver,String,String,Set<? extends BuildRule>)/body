{
  BuildTarget target=BuildTargetFactory.newInstance(String.format("//%s:genrule",contextBasePath));
  Builder ruleBuilder=Genrule.newGenruleBuilder(new FakeAbstractBuildRuleBuilderParams()).setRelativeToAbsolutePathFunctionForTesting(relativeToAbsolutePathFunction).setBuildTarget(target).setBash(Optional.of(originalCmd)).setOut("example-file");
  for (  BuildRule dep : deps) {
    ruleBuilder.addDep(dep.getBuildTarget());
  }
  return ruleResolver.buildAndAddToIndex(ruleBuilder);
}
