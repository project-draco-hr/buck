{
  BuildTarget target=BuildTargetFactory.newInstance(String.format("//%s:genrule",contextBasePath));
  Builder ruleBuilder=Genrule.newGenruleBuilder(new FakeAbstractBuildRuleBuilderParams()).setRelativeToAbsolutePathFunction(relativeToAbsolutePathFunction).setBuildTarget(target).setCmd(originalCmd).setOut("example-file");
  for (  BuildRule dep : deps) {
    ruleBuilder.addDep(dep.getBuildTarget());
  }
  return ruleResolver.buildAndAddToIndex(ruleBuilder);
}
