{
  boolean matching=true;
  BufferedReader reader=null;
  Iterator<String> iter=lines.iterator();
  try {
    reader=Files.newReader(file,Charsets.UTF_8);
    while (iter.hasNext()) {
      String line=reader.readLine();
      if (!Objects.equal(iter.next(),line)) {
        matching=false;
        break;
      }
    }
    if (matching) {
      matching=reader.readLine() == null;
    }
  }
  finally {
    Closeables.close(reader,false);
  }
  if (!matching && logger.isLoggable(Level.INFO)) {
    logger.info(String.format("DIFF %s",file.getPath()));
    for (    String diffLine : diffFileContents(lines,file)) {
      logger.info(String.format("DIFF %s",diffLine));
    }
  }
  return matching;
}
