import contextlib
from functools import partial
import os
import re
import threading
from ..compatibility import PY3
from .http import CachedWeb, Web, FetchError
from .tracer import TRACER
if PY3:
    from queue import Empty, Queue
    from urllib.parse import urlparse, urljoin
else:
    from Queue import Empty, Queue
    from urlparse import urlparse, urljoin
