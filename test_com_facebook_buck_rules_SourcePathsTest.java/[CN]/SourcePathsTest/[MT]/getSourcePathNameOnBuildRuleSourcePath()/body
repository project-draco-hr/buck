{
  BuildRuleResolver resolver=new BuildRuleResolver();
  String out="test/blah.txt";
  Genrule genrule=(Genrule)GenruleBuilder.newGenruleBuilder(BuildTargetFactory.newInstance("//:genrule")).setOut(out).build(resolver);
  BuildRuleSourcePath buildRuleSourcePath1=new BuildRuleSourcePath(genrule);
  String actual1=SourcePaths.getSourcePathName(BuildTargetFactory.newInstance("//:test"),buildRuleSourcePath1);
  assertEquals(out,actual1);
  BuildTarget fakeBuildTarget=BuildTargetFactory.newInstance("//:fake");
  FakeBuildRule fakeBuildRule=new FakeBuildRule(new FakeBuildRuleParamsBuilder(fakeBuildTarget).build(),new SourcePathResolver(resolver));
  BuildRuleSourcePath buildRuleSourcePath2=new BuildRuleSourcePath(fakeBuildRule);
  String actual2=SourcePaths.getSourcePathName(BuildTargetFactory.newInstance("//:test"),buildRuleSourcePath2);
  assertEquals(fakeBuildTarget.getShortNameOnly(),actual2);
}
