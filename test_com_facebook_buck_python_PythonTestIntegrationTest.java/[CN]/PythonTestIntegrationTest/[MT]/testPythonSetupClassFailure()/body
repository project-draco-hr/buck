{
  assumePythonVersionIsAtLeast("2.7","`setUpClass` support was added in Python-2.7");
  TestResultSummary result=getOnlyValue(flatten(workspace.runBuckTest("//:test-setup-class-failure")));
  assertThat(result.getTestCaseName(),Matchers.equalTo("test_setup_class_failure.Test"));
  assertThat(result.getTestName(),Matchers.equalTo("test_that_passes"));
  assertThat(result.getType(),Matchers.equalTo(ResultType.FAILURE));
  assertThat(result.getMessage(),Matchers.containsString("setup failure!"));
}
