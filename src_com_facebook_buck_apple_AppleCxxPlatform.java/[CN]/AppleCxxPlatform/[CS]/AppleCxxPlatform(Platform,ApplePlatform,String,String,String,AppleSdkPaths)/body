{
  Preconditions.checkArgument(hostPlatform.equals(Platform.MACOS),String.format("%s can only currently run on Mac OS X.",AppleCxxPlatform.class));
  this.flavor=new Flavor(targetSdkName + "-" + targetArchitecture);
  ImmutableList<Path> toolSearchPaths=ImmutableList.of(sdkPaths.sdkPath().resolve(USR_BIN),sdkPaths.platformDeveloperPath().resolve(USR_BIN),sdkPaths.toolchainPath().resolve(USR_BIN));
  Tool clangPath=new SourcePathTool(getTool("clang",toolSearchPaths));
  Tool clangXxPath=new SourcePathTool(getTool("clang++",toolSearchPaths));
  this.as=clangPath;
  this.asflags=ImmutableList.of();
  this.aspp=clangPath;
  this.asppflags=ImmutableList.of();
  this.cc=clangPath;
  ImmutableList.Builder<String> cflagsBuilder=ImmutableList.builder();
  cflagsBuilder.add("-isysroot",sdkPaths.sdkPath().toString());
  cflagsBuilder.add("-arch",targetArchitecture);
switch (targetPlatform) {
case MACOSX:
    cflagsBuilder.add("-mmacosx-version-min=" + targetVersion);
  break;
case IPHONESIMULATOR:
case IPHONEOS:
cflagsBuilder.add("-mios-version-min=" + targetVersion);
break;
}
this.cflags=cflagsBuilder.build();
this.cpp=clangPath;
this.cppflags=cflagsBuilder.build();
this.cxx=clangXxPath;
this.cxxflags=cflagsBuilder.build();
this.cxxpp=clangXxPath;
this.cxxppflags=cflagsBuilder.build();
this.cxxld=clangXxPath;
this.cxxldflags=cflagsBuilder.build();
this.lex=getTool("lex",toolSearchPaths);
this.lexflags=ImmutableList.of();
this.yacc=getTool("yacc",toolSearchPaths);
this.yaccflags=ImmutableList.of();
this.ld=new DarwinLinker(new SourcePathTool(getTool("libtool",toolSearchPaths)));
this.ldflags=ImmutableList.of();
this.ar=new SourcePathTool(getTool("ar",toolSearchPaths));
this.arflags=ImmutableList.of();
this.debugPathSanitizer=Optional.of(new DebugPathSanitizer(250,File.separatorChar,Paths.get("."),ImmutableBiMap.<Path,Path>of()));
}
