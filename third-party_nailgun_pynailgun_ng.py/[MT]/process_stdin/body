def process_stdin(nailgun_connection):
    '\n    Reads from stdin and transmits it to the nailgun server in a stdin chunk.\n    Sends a stdin-eof chunk if necessary.\n\n    Returns the number of bytes read, or 0 to indicate EOF.\n    '
    if (not nailgun_connection.stdin):
        return
    bytes_read = nailgun_connection.stdin.readinto(nailgun_connection.buf)
    if (bytes_read > 0):
        send_stdin(bytes_read, nailgun_connection)
    else:
        process_eof(nailgun_connection)
    return bytes_read
