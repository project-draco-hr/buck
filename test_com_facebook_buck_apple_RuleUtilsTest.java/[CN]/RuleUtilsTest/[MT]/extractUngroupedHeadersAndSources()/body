{
  ImmutableMap.Builder<SourcePath,String> perFileCompileFlags=ImmutableMap.builder();
  ImmutableSortedSet.Builder<SourcePath> sourcePaths=ImmutableSortedSet.naturalOrder();
  ImmutableSortedSet.Builder<SourcePath> headerPaths=ImmutableSortedSet.naturalOrder();
  ImmutableList<AppleSource> input=ImmutableList.of(AppleSource.ofSourcePath(new TestSourcePath("foo.m")),AppleSource.ofSourcePath(new TestSourcePath("bar.h")),AppleSource.ofSourcePath(new TestSourcePath("baz.mm")),AppleSource.ofSourcePath(new TestSourcePath("blech.hh")),AppleSource.ofSourcePath(new TestSourcePath("beeble.c")));
  RuleUtils.extractSourcePaths(new SourcePathResolver(new BuildRuleResolver()),perFileCompileFlags,sourcePaths,headerPaths,input);
  assertEquals(ImmutableSortedSet.of(new TestSourcePath("foo.m"),new TestSourcePath("baz.mm"),new TestSourcePath("beeble.c")),sourcePaths.build());
  assertEquals(ImmutableSortedSet.of(new TestSourcePath("bar.h"),new TestSourcePath("blech.hh")),headerPaths.build());
}
