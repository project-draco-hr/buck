{
  ImmutableMultimap<Path,String> subgroups=ImmutableMultimap.<Path,String>builder().put(Paths.get("root/App/Foo"),"Bar").put(Paths.get("root"),"Lib").put(Paths.get("root/Lib"),"Bar").put(Paths.get("root/App"),"Foo").put(Paths.get("root"),"App").put(Paths.get("root/Lib"),"Foo").build();
  ImmutableMultimap<Path,SourcePath> entries=ImmutableMultimap.<Path,SourcePath>builder().put(Paths.get("root/Lib/Foo"),new TestSourcePath("Lib/Foo/File2.h")).put(Paths.get("root/App/Foo"),new TestSourcePath("App/Foo/File.h")).put(Paths.get("root/App"),new TestSourcePath("App/File.h")).put(Paths.get("root"),new TestSourcePath("File.h")).put(Paths.get("root/Lib/Bar"),new TestSourcePath("Lib/Bar/File1.h")).put(Paths.get("root/Lib/Foo"),new TestSourcePath("Lib/Foo/File1.h")).put(Paths.get("root/App/Foo/Bar"),new TestSourcePath("App/Foo/Bar/File.h")).build();
  ImmutableList<GroupedSource> expected=ImmutableList.of(ImmutableGroupedSource.ofSourceGroup("App",ImmutableList.of(ImmutableGroupedSource.ofSourceGroup("Foo",ImmutableList.of(ImmutableGroupedSource.ofSourceGroup("Bar",ImmutableList.of(ImmutableGroupedSource.ofSourcePath(new TestSourcePath("App/Foo/Bar/File.h")))),ImmutableGroupedSource.ofSourcePath(new TestSourcePath("App/Foo/File.h")))),ImmutableGroupedSource.ofSourcePath(new TestSourcePath("App/File.h")))),ImmutableGroupedSource.ofSourceGroup("Lib",ImmutableList.of(ImmutableGroupedSource.ofSourceGroup("Bar",ImmutableList.of(ImmutableGroupedSource.ofSourcePath(new TestSourcePath("Lib/Bar/File1.h")))),ImmutableGroupedSource.ofSourceGroup("Foo",ImmutableList.of(ImmutableGroupedSource.ofSourcePath(new TestSourcePath("Lib/Foo/File1.h")),ImmutableGroupedSource.ofSourcePath(new TestSourcePath("Lib/Foo/File2.h")))))),ImmutableGroupedSource.ofSourcePath(new TestSourcePath("File.h")));
  ImmutableList<GroupedSource> actual=RuleUtils.createGroupsFromEntryMaps(subgroups,entries,Paths.get("root"));
  assertEquals(expected,actual);
}
