{
  ImmutableList<SourcePath> input=ImmutableList.<SourcePath>of(new TestSourcePath("File.h"),new TestSourcePath("Lib/Foo/File2.h"),new TestSourcePath("App/Foo/File.h"),new TestSourcePath("Lib/Bar/File1.h"),new TestSourcePath("App/File.h"),new TestSourcePath("Lib/Foo/File1.h"),new TestSourcePath("App/Foo/Bar/File.h"));
  ImmutableList<GroupedSource> expected=ImmutableList.of(GroupedSource.ofSourceGroup("App",Paths.get("App"),ImmutableList.of(GroupedSource.ofSourceGroup("Foo",Paths.get("App/Foo"),ImmutableList.of(GroupedSource.ofSourceGroup("Bar",Paths.get("App/Foo/Bar"),ImmutableList.of(GroupedSource.ofPrivateHeader(new TestSourcePath("App/Foo/Bar/File.h")))),GroupedSource.ofPrivateHeader(new TestSourcePath("App/Foo/File.h")))),GroupedSource.ofPrivateHeader(new TestSourcePath("App/File.h")))),GroupedSource.ofSourceGroup("Lib",Paths.get("Lib"),ImmutableList.of(GroupedSource.ofSourceGroup("Bar",Paths.get("Lib/Bar"),ImmutableList.of(GroupedSource.ofPrivateHeader(new TestSourcePath("Lib/Bar/File1.h")))),GroupedSource.ofSourceGroup("Foo",Paths.get("Lib/Foo"),ImmutableList.of(GroupedSource.ofPrivateHeader(new TestSourcePath("Lib/Foo/File1.h")),GroupedSource.ofPrivateHeader(new TestSourcePath("Lib/Foo/File2.h")))))),GroupedSource.ofPrivateHeader(new TestSourcePath("File.h")));
  SourcePathResolver resolver=new SourcePathResolver(new BuildRuleResolver());
  ImmutableList<GroupedSource> actual=RuleUtils.createGroupsFromSourcePaths(resolver.getPathFunction(),ImmutableList.<SourceWithFlags>of(),ImmutableSortedSet.<SourcePath>of(),ImmutableList.<SourcePath>of(),input);
  assertEquals(expected,actual);
}
