{
  assumeTrue(Platform.detect() != Platform.WINDOWS);
  String cellName="cellname";
  Path rootPath=Paths.get("/Users/user/src");
  String line="//target:short#infer\t[infer]\t" + cellName + "//buck-out/a/b/c/";
  Path expectedOutputPath=rootPath.resolve("buck-out/a/b/c");
  assertTrue("Path must be absolute",expectedOutputPath.isAbsolute());
  String expectedOutput="//target:short#infer\t[infer]\t" + expectedOutputPath.toString();
  ImmutableMap<String,Path> map=ImmutableMap.<String,Path>builder().put("cellname",rootPath).build();
  CellPathResolver cellPathResolver=createFakeCellPathResolver(map,Optional.<Path>absent());
  assertEquals(expectedOutput,InferLogLine.fromLine(line).toContextualizedString(cellPathResolver));
}
