{
  int headerSize=MachoHeaderUtils.getHeaderSize(magicInfo.is64Bit());
  int firstCommandOffset=headerSize;
  MachoHeader header=MachoHeaderUtils.createHeader(buffer,magicInfo.is64Bit());
  int relativeCommandOffset=0;
  for (int i=0; i < header.getNcmds().intValue(); i++) {
    buffer.position(firstCommandOffset + relativeCommandOffset);
    LoadCommand command=LoadCommandUtils.createLoadCommandFromBuffer(buffer);
    if (!callback.apply(command).booleanValue()) {
      break;
    }
    relativeCommandOffset+=command.getCmdsize().intValue();
  }
}
