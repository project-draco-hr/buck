{
  ImmutableSet<TargetNode<?>> projectRoots=checkAndGetTargetNodes(buildTargets,projectGraph);
  return FluentIterable.from(projectGraph.getSubgraph(projectRoots).getNodes()).transformAndConcat(new Function<TargetNode<?>,Iterable<BuildTarget>>(){
    @Override public Iterable<BuildTarget> apply(    TargetNode<?> node){
      return TargetNodes.getTestTargetsForNode(node);
    }
  }
).toSet();
}
