{
  ProjectFilesystem projectFilesystem=new FakeProjectFilesystem();
  BuildRuleResolver resolver=new BuildRuleResolver();
  SourcePathResolver pathResolver=new SourcePathResolver(resolver);
  FakeBuildRule rule=new FakeBuildRule(BuildRuleType.of("example"),BuildTargetFactory.newInstance("//java/com/facebook:facebook"),pathResolver);
  resolver.addToIndex(rule);
  FakeBuildRule rule2=new FakeBuildRule(BuildRuleType.of("foo"),BuildTargetFactory.newInstance("//bar:foo"),pathResolver);
  resolver.addToIndex(rule2);
  Iterable<? extends SourcePath> sourcePaths=ImmutableList.of(new TestSourcePath("java/com/facebook/Main.java"),new BuildTargetSourcePath(projectFilesystem,rule.getBuildTarget()),new TestSourcePath("java/com/facebook/BuckConfig.java"),new BuildTargetSourcePath(projectFilesystem,rule2.getBuildTarget()));
  Iterable<BuildRule> inputs=pathResolver.filterBuildRuleInputs(sourcePaths);
  MoreAsserts.assertIterablesEquals("Iteration order should be preserved: results should not be alpha-sorted.",ImmutableList.of(rule,rule2),inputs);
}
