{
  BuildRuleResolver resolver=new BuildRuleResolver(TargetGraph.EMPTY,new BuildTargetNodeToBuildRuleTransformer());
  SourcePathResolver pathResolver=new SourcePathResolver(resolver);
  BuildRule rule=resolver.addToIndex(new FakeBuildRule("//foo:bar",pathResolver));
  assertThat(pathResolver.getSourcePathName(rule.getBuildTarget(),new BuildTargetSourcePath(rule.getBuildTarget(),BuckConstant.GEN_PATH.resolve("foo").resolve("something.cpp"))),Matchers.equalTo("something.cpp"));
}
