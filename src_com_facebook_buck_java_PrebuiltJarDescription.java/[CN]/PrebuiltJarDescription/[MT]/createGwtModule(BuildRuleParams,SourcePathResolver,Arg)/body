{
  final SourcePath inputToCompareToOutput;
  if (arg.gwtJar.isPresent()) {
    inputToCompareToOutput=arg.gwtJar.get();
  }
 else   if (arg.sourceJar.isPresent()) {
    inputToCompareToOutput=arg.sourceJar.get();
  }
 else {
    inputToCompareToOutput=arg.binaryJar;
  }
  final ImmutableCollection<Path> inputsToCompareToOutput=resolver.filterInputsToCompareToOutput(Collections.singleton(inputToCompareToOutput));
  final Path pathToExistingJarFile=resolver.getPath(inputToCompareToOutput);
  BuildRule buildRule=new AbstractBuildRule(params,resolver){
    @Override protected ImmutableCollection<Path> getInputsToCompareToOutput(){
      return inputsToCompareToOutput;
    }
    @Override protected Builder appendDetailsToRuleKey(    Builder builder){
      return builder;
    }
    @Override public ImmutableList<Step> getBuildSteps(    BuildContext context,    BuildableContext buildableContext){
      buildableContext.recordArtifact(getPathToOutputFile());
      return ImmutableList.of();
    }
    @Override public Path getPathToOutputFile(){
      return pathToExistingJarFile;
    }
  }
;
  return buildRule;
}
