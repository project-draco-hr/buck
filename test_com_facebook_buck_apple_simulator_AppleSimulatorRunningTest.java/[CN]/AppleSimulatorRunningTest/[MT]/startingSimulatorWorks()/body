{
  FakeProcess fakeSimulatorProcess=new FakeProcess(0);
  ProcessExecutorParams fakeSimulatorParams=ProcessExecutorParams.builder().setCommand(ImmutableList.of("open","-a","xcode-dir/Applications/iOS Simulator.app","--args","-CurrentDeviceUDID","70200ED8-EEF1-4BDB-BCCF-3595B137D67D")).build();
  boolean simulatorStarted;
  try (OutputStream stdin=new ByteArrayOutputStream();InputStream stdout=getClass().getResourceAsStream("testdata/simctl-list.txt");InputStream stderr=new ByteArrayInputStream(new byte[0])){
    FakeProcess fakeSimctlListProcess=new FakeProcess(0,stdin,stdout,stderr);
    ProcessExecutorParams fakeSimctlListParams=ProcessExecutorParams.builder().setCommand(ImmutableList.of("xcrun","simctl","list")).build();
    FakeProcessExecutor fakeProcessExecutor=new FakeProcessExecutor(ImmutableMap.of(fakeSimulatorParams,fakeSimulatorProcess,fakeSimctlListParams,fakeSimctlListProcess));
    simulatorStarted=AppleSimulatorRunning.startSimulator(fakeProcessExecutor,Paths.get("xcode-dir"),"70200ED8-EEF1-4BDB-BCCF-3595B137D67D",1000);
  }
   assertThat(simulatorStarted,is(true));
}
