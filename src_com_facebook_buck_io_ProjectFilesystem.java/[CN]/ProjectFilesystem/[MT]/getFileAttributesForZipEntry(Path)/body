{
  long mode=0;
  if (isExecutable(path)) {
    mode|=MorePosixFilePermissions.toMode(EnumSet.of(PosixFilePermission.OWNER_EXECUTE));
  }
  if (isDirectory(path)) {
    mode|=S_IFDIR;
  }
  if (isSymLink(path)) {
    mode|=S_IFLNK;
  }
  mode|=MorePosixFilePermissions.toMode(getPosixFilePermissions(path));
  return mode << 16;
}
