{
  SortedSet<HasBuildTarget> rulesWithAbiToConsider=Sets.newTreeSet(BUILD_TARGET_COMPARATOR);
  for (  BuildRule dep : Iterables.concat(deps,providedDeps)) {
    if (dep.getBuildable() instanceof HasJavaAbi) {
      if (dep.getBuildable() instanceof JavaLibrary) {
        JavaLibrary javaRule=(JavaLibrary)dep.getBuildable();
        rulesWithAbiToConsider.addAll(javaRule.getOutputClasspathEntries().keys());
      }
 else {
        rulesWithAbiToConsider.add((HasJavaAbi)dep.getBuildable());
      }
    }
  }
  rulesWithAbiToConsider.addAll(SourcePaths.filterBuildRuleInputs(Iterables.concat(srcs,resources)));
  return rulesWithAbiToConsider;
}
