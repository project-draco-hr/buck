{
  SortedSet<HasBuildTarget> rulesWithAbiToConsider=Sets.newTreeSet(BUILD_TARGET_COMPARATOR);
  for (  BuildRule dep : Iterables.concat(getDepsForTransitiveClasspathEntries(),providedDeps)) {
    if (dep instanceof HasJavaAbi) {
      if (dep instanceof JavaLibrary) {
        JavaLibrary javaRule=(JavaLibrary)dep;
        rulesWithAbiToConsider.addAll(javaRule.getOutputClasspathEntries().keys());
      }
 else {
        rulesWithAbiToConsider.add(dep);
      }
    }
  }
  rulesWithAbiToConsider.addAll(getResolver().filterBuildRuleInputs(Iterables.concat(srcs,resources)));
  return rulesWithAbiToConsider;
}
