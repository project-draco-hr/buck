{
  ImmutableList.Builder<String> args=ImmutableList.builder();
  args.add(xctoolPath.toString());
  args.add("-reporter");
  args.add("json-stream");
  args.add("-sdk",sdkName);
  if (destinationSpecifier.isPresent() && !destinationSpecifier.get().isEmpty()) {
    args.add("-destination");
    args.add(Joiner.on(',').join(Iterables.transform(destinationSpecifier.get().entrySet(),new Function<Map.Entry<String,String>,String>(){
      @Override public String apply(      Map.Entry<String,String> input){
        return input.getKey() + "=" + input.getValue();
      }
    }
)));
  }
  args.add("run-tests");
  for (  Path logicTestBundlePath : logicTestBundlePaths) {
    args.add("-logicTest");
    args.add(logicTestBundlePath.toString());
  }
  for (  Map.Entry<Path,Path> appTestBundleAndHostApp : appTestBundleToHostAppPaths.entrySet()) {
    args.add("-appTest");
    args.add(appTestBundleAndHostApp.getKey() + ":" + appTestBundleAndHostApp.getValue());
  }
  return args.build();
}
