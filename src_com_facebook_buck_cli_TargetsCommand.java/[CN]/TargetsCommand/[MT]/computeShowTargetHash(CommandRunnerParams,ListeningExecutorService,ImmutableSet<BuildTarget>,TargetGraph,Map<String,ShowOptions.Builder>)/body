{
  LOG.debug("Getting target hash for %s",matchingBuildTargets);
  Pair<Iterable<BuildTarget>,TargetGraph> targetsAndGraph=computeTargetsAndGraphToShowTargetHash(params,executor,matchingBuildTargets,targetGraph);
  Iterable<BuildTarget> matchingBuildTargetsWithTests=targetsAndGraph.getFirst();
  TargetGraph targetGraphWithTests=targetsAndGraph.getSecond();
  FileHashLoader fileHashLoader=createOrGetFileHashLoader(params);
  ImmutableMap<BuildTarget,HashCode> buildTargetHashes=TargetGraphHashing.hashTargetGraph(params.getCell(),targetGraphWithTests,fileHashLoader,matchingBuildTargetsWithTests);
  for (  BuildTarget target : matchingBuildTargets) {
    processTargetHash(targetGraphWithTests,target,buildTargetHashes,showRulesResult);
  }
}
