{
  if (getArguments().isEmpty()) {
    params.getBuckEventBus().post(ConsoleEvent.severe("Must specify at least one build target."));
    return 1;
  }
  ImmutableSet<BuildTarget> matchingBuildTargets;
  TargetGraph targetGraph;
  try {
    Pair<ImmutableSet<BuildTarget>,TargetGraph> result=params.getParser().buildTargetGraphForTargetNodeSpecs(params.getBuckEventBus(),params.getCell(),getEnableProfiling(),parseArgumentsAsTargetNodeSpecs(params.getBuckConfig(),params.getCell().getFilesystem().getIgnorePaths(),getArguments()));
    matchingBuildTargets=result.getFirst();
    targetGraph=result.getSecond();
  }
 catch (  BuildTargetException|BuildFileParseException e) {
    params.getBuckEventBus().post(ConsoleEvent.severe(MoreExceptions.getHumanReadableOrLocalizedMessage(e)));
    return 1;
  }
  if (isShowTargetHash()) {
    return doShowTargetHash(params,matchingBuildTargets);
  }
 else {
    Optional<ActionGraph> actionGraph;
    if (isShowRuleKey() || isShowOutput()) {
      TargetGraphTransformer targetGraphTransformer=new TargetGraphToActionGraph(params.getBuckEventBus(),new BuildTargetNodeToBuildRuleTransformer(),params.getFileHashCache());
      actionGraph=Optional.of(targetGraphTransformer.apply(targetGraph));
    }
 else {
      actionGraph=Optional.absent();
    }
    for (    BuildTarget target : ImmutableSortedSet.copyOf(matchingBuildTargets)) {
      ImmutableList.Builder<String> builder=ImmutableList.builder();
      builder.add(target.getFullyQualifiedName());
      if (actionGraph.isPresent()) {
        BuildRule rule=Preconditions.checkNotNull(actionGraph.get().findBuildRuleByTarget(target));
        if (isShowRuleKey()) {
          builder.add(rule.getRuleKey().toString());
        }
        if (isShowOutput()) {
          Path outputPath=rule.getPathToOutput();
          if (outputPath != null) {
            builder.add(outputPath.toString());
          }
        }
      }
      params.getConsole().getStdOut().println(Joiner.on(' ').join(builder.build()));
    }
  }
  return 0;
}
