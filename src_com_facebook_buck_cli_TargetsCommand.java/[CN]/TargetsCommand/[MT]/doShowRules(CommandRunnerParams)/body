{
  if (getArguments().isEmpty()) {
    params.getBuckEventBus().post(ConsoleEvent.severe("Must specify at least one build target."));
    return 1;
  }
  ImmutableSet<BuildTarget> matchingBuildTargets;
  TargetGraph targetGraph;
  try {
    Pair<ImmutableSet<BuildTarget>,TargetGraph> result=params.getParser().buildTargetGraphForTargetNodeSpecs(parseArgumentsAsTargetNodeSpecs(params.getBuckConfig(),getArguments()),new ParserConfig(params.getBuckConfig()),params.getBuckEventBus(),params.getConsole(),params.getEnvironment(),getEnableProfiling());
    matchingBuildTargets=result.getFirst();
    targetGraph=result.getSecond();
  }
 catch (  BuildTargetException|BuildFileParseException e) {
    params.getBuckEventBus().post(ConsoleEvent.severe(MoreExceptions.getHumanReadableOrLocalizedMessage(e)));
    return 1;
  }
  if (isShowTargetHash()) {
    return doShowTargetHash(params,matchingBuildTargets);
  }
 else {
    Optional<ActionGraph> actionGraph=Optional.absent();
    Optional<RuleKeyBuilderFactory> ruleKeyBuilderFactory=Optional.absent();
    if (isShowRuleKey() || isShowOutput()) {
      TargetGraphTransformer targetGraphTransformer=new TargetGraphToActionGraph(params.getBuckEventBus(),new BuildTargetNodeToBuildRuleTransformer());
      Pair<ActionGraph,BuildRuleResolver> result=Preconditions.checkNotNull(targetGraphTransformer.apply(targetGraph));
      actionGraph=Optional.of(result.getFirst());
      if (isShowRuleKey()) {
        ruleKeyBuilderFactory=Optional.<RuleKeyBuilderFactory>of(new DefaultRuleKeyBuilderFactory(params.getFileHashCache(),new SourcePathResolver(result.getSecond())));
      }
    }
    for (    BuildTarget target : ImmutableSortedSet.copyOf(matchingBuildTargets)) {
      ImmutableList.Builder<String> builder=ImmutableList.builder();
      builder.add(target.getFullyQualifiedName());
      if (actionGraph.isPresent()) {
        BuildRule rule=Preconditions.checkNotNull(actionGraph.get().findBuildRuleByTarget(target));
        if (isShowRuleKey()) {
          builder.add(ruleKeyBuilderFactory.get().build(rule).toString());
        }
        if (isShowOutput()) {
          Path outputPath=rule.getPathToOutput();
          if (outputPath != null) {
            builder.add(outputPath.toString());
          }
        }
      }
      params.getConsole().getStdOut().println(Joiner.on(' ').join(builder.build()));
    }
  }
  return 0;
}
