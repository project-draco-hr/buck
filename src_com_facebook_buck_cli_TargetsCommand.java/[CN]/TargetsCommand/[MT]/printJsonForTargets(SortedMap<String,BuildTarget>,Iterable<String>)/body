{
  stdOut.println("[");
  ObjectMapper mapper=new ObjectMapper();
  Iterator<String> keySetIterator=buildTargets.keySet().iterator();
  while (keySetIterator.hasNext()) {
    String key=keySetIterator.next();
    BuildTarget target=buildTargets.get(key);
    File buildFile=target.getBuildFile();
    List<Map<String,Object>> rules=BuildFileToJsonParser.getAllRules(getProjectFilesystem().getProjectRoot().getAbsolutePath(),Optional.of(buildFile.getPath()),defaultIncludes,console.getAnsi());
    Map<String,Object> targetRule=null;
    for (    Map<String,Object> rule : rules) {
      String name=(String)rule.get("name");
      if (name.equals(target.getShortName())) {
        targetRule=rule;
        break;
      }
    }
    if (targetRule == null) {
      console.printFailure("unable to find rule for target " + target.getFullyQualifiedName());
      continue;
    }
    SortedMap<String,Object> sortedTargetRule=Maps.newTreeMap();
    sortedTargetRule.putAll(targetRule);
    StringWriter stringWriter=new StringWriter();
    mapper.writerWithDefaultPrettyPrinter().writeValue(stringWriter,sortedTargetRule);
    String output=stringWriter.getBuffer().toString();
    if (keySetIterator.hasNext()) {
      output+=",";
    }
    stdOut.println(output);
  }
  stdOut.println("]");
}
