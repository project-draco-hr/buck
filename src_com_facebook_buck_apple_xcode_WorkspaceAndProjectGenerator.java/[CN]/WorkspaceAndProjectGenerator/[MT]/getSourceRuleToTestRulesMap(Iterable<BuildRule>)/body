{
  ImmutableMultimap.Builder<BuildRule,AppleTest> sourceRuleToTestRulesBuilder=ImmutableMultimap.builder();
  for (  BuildRule rule : testRules) {
    if (!AppleBuildRules.isXcodeTargetTestBuildRule(rule)) {
      LOG.verbose("Skipping rule %s (not xcode target test)",rule);
      continue;
    }
    AppleTest testRule=(AppleTest)rule;
    for (    BuildRule sourceRule : testRule.getSourceUnderTest()) {
      sourceRuleToTestRulesBuilder.put(sourceRule,testRule);
    }
  }
  return sourceRuleToTestRulesBuilder.build();
}
