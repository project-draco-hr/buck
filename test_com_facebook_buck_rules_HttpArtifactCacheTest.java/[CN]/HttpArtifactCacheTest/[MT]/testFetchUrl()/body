{
  final URL url=new URL("http://localhost:8080");
  final RuleKey ruleKey=new RuleKey("00000000000000000000000000000000");
  HttpArtifactCache cache=new HttpArtifactCache(null,null,new URL("http://localhost:8080"),true,new FakeProjectFilesystem(),BUCK_EVENT_BUS,HASH_FUNCTION){
    @Override protected Response fetchCall(    Request request) throws IOException {
      assertEquals(new URL(url,"artifact/key/" + ruleKey.toString()),request.url());
      return new Response.Builder().code(HttpURLConnection.HTTP_OK).protocol(Protocol.HTTP_1_1).request(request).body(createBody("data")).build();
    }
  }
;
  cache.fetch(ruleKey,new File("output/file"));
  cache.close();
}
