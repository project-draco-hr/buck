{
  BuildTarget target=BuildTargetFactory.newInstance("//src/com/facebook:Main");
  Map<String,Object> instance=ImmutableMap.<String,Object>of("some_value",3.33);
  BuildRuleFactoryParams params=new BuildRuleFactoryParams(instance,filesystem,parser,target,new FakeRuleKeyBuilderFactory());
  try {
    assertEquals(Optional.absent(),params.getOptionalIntegerAttribute("some_value"));
    fail("Should have failed to parse a string as an integer");
  }
 catch (  Exception e) {
    assertEquals("Expected a integer for some_value in src/com/facebook/BUCK but was 3.33",e.getMessage());
  }
}
