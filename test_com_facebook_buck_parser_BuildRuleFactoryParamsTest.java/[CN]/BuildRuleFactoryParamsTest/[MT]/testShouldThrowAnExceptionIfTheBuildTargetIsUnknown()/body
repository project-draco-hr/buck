{
  BuildTarget target=BuildTargetFactory.newInstance("//src/com/facebook:Main");
  BuildRuleFactoryParams params=new BuildRuleFactoryParams(null,new TestConsole(),filesystem,tree,parser,target);
  AbstractBuildRuleBuilder<?> builder=createMock(AbstractBuildRuleBuilder.class);
  replay(builder);
  try {
    params.asSourcePath("//does/not:exist",builder);
    fail("Should not have succeeded");
  }
 catch (  HumanReadableException e) {
    assertEquals("Unable to find build target '//does/not:exist' while parsing definition " + "of //src/com/facebook:Main",e.getMessage());
  }
  verify(builder);
}
