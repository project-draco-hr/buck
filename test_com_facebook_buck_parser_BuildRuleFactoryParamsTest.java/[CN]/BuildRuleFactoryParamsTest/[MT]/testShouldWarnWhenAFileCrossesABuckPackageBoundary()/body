{
  BuildTargetFactory.newInstance("//src/com/facebook/demo:demo");
  BuildTarget buildTarget=BuildTargetFactory.newInstance("//src/com/facebook:boundary");
  BuildRuleFactoryParams params=new BuildRuleFactoryParams(null,new TestConsole(),filesystem,tree,parser,buildTarget);
  try {
    params.resolveFilePathRelativeToBuildFileDirectory("demo/B.java");
    fail("Expected path to be rejected as it crosses a buck package boundary");
  }
 catch (  HumanReadableException e) {
    assertEquals("\"src/com/facebook/demo/B.java\" in target \"//src/com/facebook:boundary\" " + "crosses a buck package boundary. Find the nearest BUCK file in the directory " + "containing this file and refer to the rule referencing the desired file",e.getMessage());
  }
}
