{
  BuildTarget buildTarget=BuildTargetFactory.newInstance("//src/com/facebook/demo:Main");
  BuildRuleFactoryParams params=new BuildRuleFactoryParams(null,new TestConsole(),filesystem,tree,parser,buildTarget);
  try {
    params.resolveFilePathRelativeToBuildFileDirectory("../A.java");
    fail("Expected path to be rejected.");
  }
 catch (  HumanReadableException e) {
    assertEquals("\"src/com/facebook/demo/../A.java\" in target " + "\"//src/com/facebook/demo:Main\" refers to a parent directory.",e.getMessage());
  }
}
