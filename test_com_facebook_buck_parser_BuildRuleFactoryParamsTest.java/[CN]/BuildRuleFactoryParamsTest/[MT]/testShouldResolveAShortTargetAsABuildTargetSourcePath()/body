{
  BuildTarget target=BuildTargetFactory.newInstance("//src/com/facebook:Main");
  BuildRuleFactoryParams params=new BuildRuleFactoryParams(null,filesystem,tree,parser,target);
  DefaultJavaLibraryRule.Builder builder=createMock(DefaultJavaLibraryRule.Builder.class);
  expect(builder.addDep(new BuildTarget(filesystem.getFileForRelativePath("src/com/facebook/BUCK"),"//src/com/facebook","works"))).andReturn(builder);
  replay(builder);
  SourcePath first=params.asSourcePath(":works",builder);
  assertTrue(first instanceof BuildTargetSourcePath);
  assertEquals("//src/com/facebook:works",first.asReference());
  verify(builder);
}
