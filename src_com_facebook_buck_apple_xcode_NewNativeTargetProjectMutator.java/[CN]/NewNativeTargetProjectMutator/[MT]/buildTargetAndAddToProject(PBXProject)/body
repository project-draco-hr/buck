{
  PBXNativeTarget target=new PBXNativeTarget(targetName,productType);
  PBXGroup targetGroup=project.getMainGroup().getOrCreateChildGroupByName(targetName);
  if (gid.isPresent()) {
    target.setGlobalID(gid.get());
  }
  addPhasesAndGroupsForSources(target,targetGroup);
  addFrameworksBuildPhase(project,target);
  addResourcesBuildPhase(target,targetGroup);
  addAssetCatalogBuildPhase(target,targetGroup);
  PBXGroup productsGroup=project.getMainGroup().getOrCreateChildGroupByName("Products");
  PBXFileReference productReference=productsGroup.getOrCreateFileReferenceBySourceTreePath(new SourceTreePath(PBXReference.SourceTree.BUILT_PRODUCTS_DIR,productOutputPath));
  target.setProductName(productName);
  target.setProductReference(productReference);
  project.getTargets().add(target);
  return new Result(target,targetGroup);
}
