{
  PBXFileReference fileReference=sourcesGroup.getOrCreateFileReferenceBySourceTreePath(new SourceTreePath(PBXReference.SourceTree.SOURCE_ROOT,pathRelativizer.outputDirToRootRelative(sourcePathResolver.getPath(sourcePath))));
  PBXBuildFile buildFile=new PBXBuildFile(fileReference);
  sourcesBuildPhase.getFiles().add(buildFile);
  String customFlags=sourceFlags.get(sourcePath);
  if (customFlags != null) {
    NSDictionary settings=new NSDictionary();
    settings.put("COMPILER_FLAGS",customFlags);
    buildFile.setSettings(Optional.of(settings));
  }
  LOG.verbose("Added source path %s to group %s, flags %s, PBXFileReference %s",sourcePath,sourcesGroup.getName(),customFlags,fileReference);
}
