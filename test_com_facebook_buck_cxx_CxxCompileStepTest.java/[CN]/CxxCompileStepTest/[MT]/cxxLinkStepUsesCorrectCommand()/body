{
  ProjectFilesystem projectFilesystem=new FakeProjectFilesystem();
  ExecutionContext context=TestExecutionContext.newBuilder().setProjectFilesystem(projectFilesystem).build();
  Path compiler=Paths.get("compiler");
  ImmutableList<String> flags=ImmutableList.of("-fsanitize=address");
  Path output=Paths.get("test.o");
  Path input=Paths.get("test.cpp");
  CxxCompileStep cxxCompileStep=new CxxCompileStep(compiler,flags,output,input,Optional.<DebugPathSanitizer>absent());
  ImmutableList<String> expected=ImmutableList.<String>builder().add(compiler.toString()).add("-c").addAll(flags).add("-o",output.toString()).add(input.toString()).build();
  ImmutableList<String> actual=cxxCompileStep.getShellCommand(context);
  assertEquals(expected,actual);
}
