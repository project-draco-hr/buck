{
  TestProjectBuildFileParser buildFileParser=new TestProjectBuildFileParser();
  Parser parser=createParser(emptyBuildTargets(),buildFileParser);
  parser.filterAllTargetsInProject(filesystem,Lists.<String>newArrayList(),alwaysTrue());
  WatchEvent<Object> event=createMock(WatchEvent.class);
  expect(event.kind()).andReturn(StandardWatchEventKinds.OVERFLOW).anyTimes();
  replay(event);
  parser.onFileSystemChange(event);
  parser.filterAllTargetsInProject(filesystem,Lists.<String>newArrayList(),alwaysTrue());
  verify(event);
  assertEquals("Should have invalidated cache.",2,buildFileParser.calls);
}
