{
  ParserConfig parserConfig=new ParserConfig(new FakeBuckConfig(ImmutableMap.of("project",ImmutableMap.of("temp_files",".*\\.swp$"))));
  Parser parser=new Parser(repository,parserConfig.getEnforceBuckPackageBoundary(),parserConfig.getTempFilePatterns(),parserConfig.getBuildFileName(),buildFileTreeSupplier,buildTargetParser,buildFileParserFactory,new FakeRuleKeyBuilderFactory());
  try {
    parser.parseRawRulesInternal(rules);
  }
 catch (  BuildTargetException|IOException e) {
    throw new RuntimeException(e);
  }
  return parser;
}
