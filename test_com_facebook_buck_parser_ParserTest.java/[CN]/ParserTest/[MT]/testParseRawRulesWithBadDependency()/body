{
  String nonExistentBuildTarget="//testdata/com/facebook/feed:util";
  Map<String,Object> rawRule=ImmutableMap.<String,Object>of("type","java_library","name","feed","deps",ImmutableList.of(nonExistentBuildTarget),"buck.base_path","testdata/com/facebook/feed/model");
  List<Map<String,Object>> ruleObjects=ImmutableList.of(rawRule);
  ProjectFilesystem filesystem=new ProjectFilesystem(Paths.get("."));
  Parser parser=new Parser(new TestRepositoryBuilder().setFilesystem(filesystem).build(),BuckTestConstant.PYTHON_INTERPRETER,tempFilePatterns,new FakeRuleKeyBuilderFactory());
  parser.parseRawRulesInternal(ruleObjects);
  RuleJsonPredicate predicate=alwaysTrue();
  ImmutableSet<BuildTarget> targets=parser.filterTargets(predicate);
  BuildTarget expectedBuildTarget=BuildTarget.builder("//testdata/com/facebook/feed/model","feed").build();
  assertEquals(ImmutableSet.of(expectedBuildTarget),targets);
  try {
    parser.onlyUseThisWhenTestingToFindAllTransitiveDependencies(targets,ImmutableList.<String>of(),new TestConsole(),ImmutableMap.<String,String>of());
    fail("Should have thrown a HumanReadableException.");
  }
 catch (  HumanReadableException e) {
    assertEquals(String.format("No rule found when resolving target %s in build file " + "//testdata/com/facebook/feed/BUCK",nonExistentBuildTarget),e.getHumanReadableErrorMessage());
  }
}
