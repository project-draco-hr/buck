{
  String nonExistentBuildTarget="//testdata/com/facebook/feed:util";
  Map<String,Object> rawRule=ImmutableMap.<String,Object>of("type","java_library","name","feed","deps",ImmutableList.of(nonExistentBuildTarget),"buck_base_path","testdata/com/facebook/feed/model");
  List<Map<String,Object>> ruleObjects=ImmutableList.of(rawRule);
  Parser parser=new Parser(new ProjectFilesystem(new File(".")),new KnownBuildRuleTypes(),new TestConsole());
  parser.parseRawRulesInternal(ruleObjects,null);
  RawRulePredicate predicate=alwaysTrue();
  List<BuildTarget> targets=parser.filterTargets(predicate);
  BuildTarget expectedBuildTarget=new BuildTarget(new File("./testdata/com/facebook/feed/model/" + BuckConstant.BUILD_RULES_FILE_NAME),"//testdata/com/facebook/feed/model","feed");
  assertEquals(ImmutableList.of(expectedBuildTarget),targets);
  try (ProjectBuildFileParser buildFileParser=parser.createBuildFileParser(ImmutableList.<String>of())){
    parser.findAllTransitiveDependencies(targets,ImmutableList.<String>of(),buildFileParser);
    fail("Should have thrown a HumanReadableException.");
  }
 catch (  HumanReadableException e) {
    assertEquals(String.format("No rule found when resolving target %s in build file " + "//testdata/com/facebook/feed/BUCK",nonExistentBuildTarget),e.getHumanReadableErrorMessage());
  }
}
