{
  tempDir.newFolder("java","com","facebook","invalid");
  File testInvalidBuildFile=tempDir.newFile("java/com/facebook/invalid/" + BuckConstant.BUILD_RULES_FILE_NAME);
  Files.write("java_library(name = 'foo', deps = ['//java/com/facebook/invalid/lib:missing_rule'])\n" + "java_library(name = 'bar')\n",testInvalidBuildFile,Charsets.UTF_8);
  tempDir.newFolder("java","com","facebook","invalid","lib");
  tempDir.newFile("java/com/facebook/invalid/lib/" + BuckConstant.BUILD_RULES_FILE_NAME);
  BuildTarget fooTarget=BuildTargetFactory.newInstance("//java/com/facebook/invalid","foo",testInvalidBuildFile);
  Iterable<BuildTarget> buildTargets=ImmutableList.of(fooTarget);
  Iterable<String> defaultIncludes=ImmutableList.of();
  try {
    testParser.parseBuildFilesForTargets(buildTargets,defaultIncludes,new BuckEventBus());
    fail("HumanReadableException should be thrown");
  }
 catch (  HumanReadableException e) {
    assertEquals("No rule found when resolving target " + "//java/com/facebook/invalid/lib:missing_rule in build file " + "//java/com/facebook/invalid/lib/BUCK",e.getHumanReadableErrorMessage());
  }
}
