{
  TestProjectBuildFileParserFactory buildFileParserFactory=new TestProjectBuildFileParserFactory(filesystem.getRootPath(),buildRuleTypes);
  Parser parser=createParser(emptyBuildTargets());
  parseBuildFile(testBuildFile,parser,buildFileParserFactory);
  WatchEvent<Path> event=createPathEvent(MorePaths.relativize(tempDir.getRoot().toPath().toRealPath(),includedByIncludeFile),StandardWatchEventKinds.ENTRY_MODIFY);
  parser.onFileSystemChange(event);
  parseBuildFile(testBuildFile,parser,buildFileParserFactory);
  assertEquals("Should have invalidated cache.",2,buildFileParserFactory.calls);
}
