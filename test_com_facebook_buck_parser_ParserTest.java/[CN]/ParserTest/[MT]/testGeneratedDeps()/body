{
  tempDir.newFolder("java","com","facebook","generateddeps");
  Path testGeneratedDepsBuckFile=tempDir.newFile("java/com/facebook/generateddeps/BUCK");
  Files.write(testGeneratedDepsBuckFile,("java_library(name = 'foo')\n" + "java_library(name = 'bar')\n" + "add_deps(name = 'foo', deps = [':bar'])\n").getBytes(UTF_8));
  BuildTarget fooTarget=BuildTarget.builder(tempDir.getRoot().toRealPath(),"//java/com/facebook/generateddeps","foo").build();
  BuildTarget barTarget=BuildTarget.builder(tempDir.getRoot().toRealPath(),"//java/com/facebook/generateddeps","bar").build();
  Iterable<BuildTarget> buildTargets=ImmutableList.of(fooTarget,barTarget);
  BuckEventBus eventBus=BuckEventBusFactory.newInstance();
  TargetGraph targetGraph=testParser.buildTargetGraphForBuildTargets(buildTargets,new ParserConfig(FakeBuckConfig.builder().setFilesystem(filesystem).build()),eventBus,new TestConsole(),ImmutableMap.<String,String>of(),false);
  ActionGraph graph=buildActionGraph(eventBus,targetGraph);
  BuildRule fooRule=graph.findBuildRuleByTarget(fooTarget);
  assertNotNull(fooRule);
  BuildRule barRule=graph.findBuildRuleByTarget(barTarget);
  assertNotNull(barRule);
  assertEquals(ImmutableSet.of(barRule),fooRule.getDeps());
}
