{
  tempDir.newFolder("java","com","facebook","generateddeps");
  File testGeneratedDepsBuckFile=tempDir.newFile("java/com/facebook/generateddeps/" + BuckConstant.BUILD_RULES_FILE_NAME);
  Files.write("java_library(name = 'foo')\n" + "java_library(name = 'bar')\n" + "add_deps(name = 'foo', deps = [':bar'])\n",testGeneratedDepsBuckFile,Charsets.UTF_8);
  BuildTarget fooTarget=BuildTarget.builder("//java/com/facebook/generateddeps","foo").build();
  BuildTarget barTarget=BuildTarget.builder("//java/com/facebook/generateddeps","bar").build();
  Iterable<BuildTarget> buildTargets=ImmutableList.of(fooTarget,barTarget);
  Iterable<String> defaultIncludes=ImmutableList.of();
  ActionGraph graph=testParser.buildTargetGraph(buildTargets,defaultIncludes,BuckEventBusFactory.newInstance(),new TestConsole(),ImmutableMap.<String,String>of()).buildActionGraph(Optional.<BuildRuleResolver>absent());
  BuildRule fooRule=graph.findBuildRuleByTarget(fooTarget);
  assertNotNull(fooRule);
  BuildRule barRule=graph.findBuildRuleByTarget(barTarget);
  assertNotNull(barRule);
  assertEquals(ImmutableSet.of(barRule),fooRule.getDeps());
}
