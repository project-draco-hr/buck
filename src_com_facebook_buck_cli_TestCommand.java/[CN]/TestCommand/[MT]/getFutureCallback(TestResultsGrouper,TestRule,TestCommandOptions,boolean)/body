{
  return new FutureCallback<TestResults>(){
    @Override public void onSuccess(    TestResults testResults){
      if (printTestResults) {
        if (grouper == null) {
          postTestResults(testResults);
        }
 else {
          Map<TestRule,TestResults> postableTestResultsMap=grouper.post(testRule,testResults);
          for (          TestResults rr : postableTestResultsMap.values()) {
            postTestResults(rr);
          }
        }
      }
    }
    private void postTestResults(    TestResults testResults){
      getBuckEventBus().post(IndividualTestEvent.finished(options.getArgumentsFormattedAsBuildTargets(),testResults));
    }
    @Override public void onFailure(    Throwable throwable){
      throwable.printStackTrace(getStdErr());
    }
  }
;
}
