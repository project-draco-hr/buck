{
  IProperties properties=(IProperties)s_properties.get(loader);
  if (properties != null)   return properties;
 else {
    final String appName=IAppConstants.APP_NAME_LC;
    final IProperties systemRedirects=wrap(Property.getSystemPropertyRedirects(EMMAProperties.SYSTEM_PROPERTY_REDIRECTS));
    final IProperties appDefaults=wrap(Property.getProperties(appName + "_default.properties",loader));
    final IProperties systemFile;
{
      final String fileName=Property.getSystemProperty(appName + ".properties");
      final File file=fileName != null ? new File(fileName) : null;
      systemFile=wrap(Property.getLazyPropertiesFromFile(file));
    }
    final IProperties system=wrap(Property.getSystemProperties(appName));
    final IProperties userOverrides=wrap(Property.getProperties(appName + ".properties",loader));
    properties=IProperties.Factory.combine(userOverrides,IProperties.Factory.combine(system,IProperties.Factory.combine(systemFile,IProperties.Factory.combine(appDefaults,systemRedirects))));
    s_properties.put(loader,properties);
    return properties;
  }
}
