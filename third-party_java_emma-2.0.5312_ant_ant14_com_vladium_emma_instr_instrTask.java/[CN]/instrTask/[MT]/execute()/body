{
  if (isEnabled()) {
    if (m_instrpath == null)     throw (BuildException)newBuildException(getTaskName() + ": instrumentation path must be specified",location).fillInStackTrace();
    if ((m_outMode != InstrProcessor.OutMode.OUT_MODE_OVERWRITE) && (m_outDir == null))     throw (BuildException)newBuildException(getTaskName() + ": output directory must be specified for '" + m_outMode+ "' output mode",location).fillInStackTrace();
    InstrProcessor processor=InstrProcessor.create();
    $assert.ASSERT(m_instrpath != null,"m_instrpath not set");
    processor.setInstrPath(m_instrpath.list(),true);
    processor.setInclExclFilter(getFilterSpecs());
    $assert.ASSERT(m_outMode != null,"m_outMode not set");
    processor.setOutMode(m_outMode);
    processor.setInstrOutDir(m_outDir != null ? m_outDir.getAbsolutePath() : null);
    processor.setMetaOutFile(m_outFile != null ? m_outFile.getAbsolutePath() : null);
    processor.setMetaOutMerge(m_outFileMerge);
    processor.setPropertyOverrides(getTaskSettings());
    processor.run();
  }
}
