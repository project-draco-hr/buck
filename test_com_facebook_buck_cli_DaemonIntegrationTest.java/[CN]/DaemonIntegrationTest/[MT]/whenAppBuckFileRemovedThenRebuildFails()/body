{
  final ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"file_watching",tmp);
  workspace.setUp();
  ProjectWorkspace.ProcessResult result=workspace.runBuckdCommand("build","app");
  result.assertExitCode(0);
  String fileName="apps/myapp/BUCK";
  assertTrue("Should delete BUCK file successfully",workspace.getFile(fileName).delete());
  waitForChange(Paths.get(fileName));
  try {
    workspace.runBuckdCommand("build","app");
    fail("Should have thrown HumanReadableException.");
  }
 catch (  HumanReadableException e) {
    assertThat("Failure should have been due to BUCK file removal.",e.getMessage(),Matchers.containsString(fileName));
  }
}
