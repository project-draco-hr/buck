{
  ProjectFilesystem filesystem=new ProjectFilesystem(tmp.getRoot().toPath());
  ObjectMapper objectMapper=new ObjectMapper();
  Object daemon=Main.getDaemon(new FakeRepositoryFactory().setRootRepoForTesting(new TestRepositoryBuilder().setBuckConfig(new FakeBuckConfig(ImmutableMap.<String,Map<String,String>>builder().put("somesection",ImmutableMap.of("somename","somevalue")).build())).setFilesystem(filesystem).build()),new FakeClock(0),objectMapper);
  assertEquals("Daemon should not be replaced when config equal.",daemon,Main.getDaemon(new FakeRepositoryFactory().setRootRepoForTesting(new TestRepositoryBuilder().setBuckConfig(new FakeBuckConfig(ImmutableMap.<String,Map<String,String>>builder().put("somesection",ImmutableMap.of("somename","somevalue")).build())).setFilesystem(filesystem).build()),new FakeClock(0),objectMapper));
  assertNotEquals("Daemon should be replaced when config not equal.",daemon,Main.getDaemon(new FakeRepositoryFactory().setRootRepoForTesting(new TestRepositoryBuilder().setBuckConfig(new FakeBuckConfig(ImmutableMap.<String,Map<String,String>>builder().put("somesection",ImmutableMap.of("somename","someothervalue")).build())).setFilesystem(filesystem).build()),new FakeClock(0),objectMapper));
}
