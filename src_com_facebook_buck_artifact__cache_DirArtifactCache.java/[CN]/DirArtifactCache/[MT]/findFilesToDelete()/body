{
  Preconditions.checkState(maxCacheSizeBytes.isPresent());
  long maxSizeBytes=maxCacheSizeBytes.get();
  File[] files=filesystem.resolve(cacheDir).toFile().listFiles();
  MoreFiles.sortFilesByAccessTime(files);
  long currentSizeBytes=0;
  for (int i=0; i < files.length; ++i) {
    File file=files[i];
    currentSizeBytes+=file.length();
    if (currentSizeBytes > maxSizeBytes) {
      return ArrayIterable.of(files,i,files.length);
    }
  }
  return ImmutableList.of();
}
