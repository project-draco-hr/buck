{
  buffer.position(0);
  LoadCommandUtils.enumerateLoadCommandsInFile(buffer,new Function<LoadCommand,Boolean>(){
    @Override public Boolean apply(    LoadCommand input){
      boolean isSegmentCommand=input instanceof SegmentCommand;
      if (isSegmentCommand) {
        processSectionsInSegmentCommand((SegmentCommand)input,magicInfo,oldCompDir,updatedCompDir);
      }
      return !isSegmentCommand;
    }
  }
);
}
