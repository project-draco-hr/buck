{
  ParserConfig parserConfig=new ParserConfig(getBuckConfig());
  boolean useWatchmanGlob=parserConfig.getGlobHandler() == ParserConfig.GlobHandler.WATCHMAN && watchman.hasWildmatchGlob();
  boolean watchmanGlobStatResults=parserConfig.getWatchmanGlobSanityCheck() == ParserConfig.WatchmanGlobSanityCheck.STAT;
  ProjectBuildFileParserFactory factory=createBuildFileParserFactory(useWatchmanGlob,watchmanGlobStatResults);
  return factory.createParser(marshaller,console,config.getEnvironment(),eventBus,ignoreBuckAutodepsFiles,watchmanDiagnosticCache);
}
