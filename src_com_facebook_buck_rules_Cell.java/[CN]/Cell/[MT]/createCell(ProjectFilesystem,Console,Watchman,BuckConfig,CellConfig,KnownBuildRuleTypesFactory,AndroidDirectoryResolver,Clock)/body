{
  DefaultCellPathResolver rootCellCellPathResolver=new DefaultCellPathResolver(filesystem.getRootPath(),rootConfig.getEntriesForSection(DefaultCellPathResolver.REPOSITORIES_SECTION));
  ImmutableMultimap<Path,RelativeCellName> transitiveCellPathMapping=rootCellCellPathResolver.getTransitivePathMapping();
  ImmutableMap<Path,RawConfig> pathToConfigOverrides=getPathToConfigOverrides(rootCellConfigOverrides,transitiveCellPathMapping);
  LoadingCache<Path,Cell> cellLoader=createCellLoader(console,watchman,rootConfig,knownBuildRuleTypesFactory,directoryResolver,clock,transitiveCellPathMapping,pathToConfigOverrides);
  Cell rootCell=new Cell(rootCellCellPathResolver.getKnownRoots(),filesystem,watchman,rootConfig,knownBuildRuleTypesFactory,directoryResolver,cellLoader);
  cellLoader.put(filesystem.getRootPath(),rootCell);
  return rootCell;
}
