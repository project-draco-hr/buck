{
  ProjectFilesystem projectFilesystem=new FakeProjectFilesystem();
  ExecutionContext context=TestExecutionContext.newBuilder().setProjectFilesystem(projectFilesystem).build();
  ImmutableList<String> yaccPrefix=ImmutableList.of("yacc");
  ImmutableList<String> flags=ImmutableList.of("-flag");
  Path outputPrefix=Paths.get("outputPrefix");
  Path input=Paths.get("input");
  YaccStep yaccStep=new YaccStep(yaccPrefix,flags,outputPrefix,input);
  ImmutableList<String> expected=ImmutableList.<String>builder().addAll(yaccPrefix).addAll(flags).add("-d").add("-b",outputPrefix.toString()).add(input.toString()).build();
  Step firstStep=yaccStep.iterator().next();
  assertTrue(firstStep instanceof ShellStep);
  ShellStep shellStep=(ShellStep)firstStep;
  ImmutableList<String> actual=shellStep.getShellCommand(context);
  assertEquals(expected,actual);
}
