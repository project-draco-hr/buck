{
  JavacOptions.Builder builder=JavacOptions.builder(defaultOptions);
  if (args.source.isPresent()) {
    builder.setSourceLevel(args.source.get());
  }
  if (args.target.isPresent()) {
    builder.setTargetLevel(args.target.get());
  }
  if (args.extraArguments.isPresent()) {
    builder.setExtraArguments(ImmutableList.<String>builder().addAll(defaultOptions.getExtraArguments()).addAll(args.extraArguments.get()).build());
  }
  if (args.javac.isPresent() || args.javacJar.isPresent()) {
    if (args.javac.isPresent() && args.javacJar.isPresent()) {
      throw new HumanReadableException("Cannot set both javac and javacjar");
    }
    builder.setJavacPath(args.javac.transform(resolver.getPathFunction()));
    builder.setJavacJarPath(args.javacJar.transform(resolver.getPathFunction()));
  }
  return builder;
}
