{
  if (arg.srcs.get().isEmpty() && arg.resources.get().isEmpty() && !originalBuildTarget.isFlavored()) {
    return Optional.absent();
  }
  BuildTarget gwtModuleBuildTarget=BuildTargets.createFlavoredBuildTarget(originalBuildTarget.getUnflavoredTarget(),JavaLibrary.GWT_MODULE_FLAVOR);
  ImmutableSortedSet<SourcePath> filesForGwtModule=ImmutableSortedSet.<SourcePath>naturalOrder().addAll(arg.srcs.get()).addAll(arg.resources.get()).build();
  ImmutableSortedSet<BuildRule> deps=ImmutableSortedSet.copyOf(resolver.filterBuildRuleInputs(filesForGwtModule));
  GwtModule gwtModule=new GwtModule(new BuildRuleParams(gwtModuleBuildTarget,Suppliers.ofInstance(deps),Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of()),projectFilesystem,ruleKeyBuilderFactory,BuildRuleType.GWT_MODULE,targetGraph),resolver,filesForGwtModule);
  return Optional.of(gwtModule);
}
