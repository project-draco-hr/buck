{
  SourcePathResolver pathResolver=new SourcePathResolver(resolver);
  BuildTarget target=params.getBuildTarget();
  if (target.getFlavors().contains(JavaLibrary.SRC_JAR)) {
    return new JavaSourceJar(params,pathResolver,args.srcs.get());
  }
  JavacOptions.Builder javacOptions=JavaLibraryDescription.getJavacOptions(pathResolver,args,defaultOptions);
  AnnotationProcessingParams annotationParams=args.buildAnnotationProcessingParams(target,params.getProjectFilesystem(),resolver);
  javacOptions.setAnnotationProcessingParams(annotationParams);
  return new DefaultJavaLibrary(params,pathResolver,args.srcs.get(),validateResources(pathResolver,args,params.getProjectFilesystem()),args.proguardConfig,args.postprocessClassesCommands.get(),resolver.getAllRules(args.exportedDeps.get()),resolver.getAllRules(args.providedDeps.get()),ImmutableSet.<Path>of(),javacOptions.build(),args.resourcesRoot);
}
