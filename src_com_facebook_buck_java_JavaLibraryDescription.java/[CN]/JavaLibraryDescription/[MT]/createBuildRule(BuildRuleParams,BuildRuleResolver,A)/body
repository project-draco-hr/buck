{
  BuildTarget target=params.getBuildTarget();
  if (JavaLibrary.SRC_JAR.equals(target.getFlavor())) {
    return new JavaSourceJar(params,args.srcs.get());
  }
  JavacOptions.Builder javacOptions=JavaLibraryDescription.getJavacOptions(args,javacEnv);
  AnnotationProcessingParams annotationParams=args.buildAnnotationProcessingParams(target);
  javacOptions.setAnnotationProcessingData(annotationParams);
  return new DefaultJavaLibrary(params,args.srcs.get(),validateResources(args,params.getProjectFilesystem()),args.proguardConfig,args.postprocessClassesCommands.get(),args.exportedDeps.get(),args.providedDeps.get(),ImmutableSet.<Path>of(),javacOptions.build(),args.resourcesRoot);
}
