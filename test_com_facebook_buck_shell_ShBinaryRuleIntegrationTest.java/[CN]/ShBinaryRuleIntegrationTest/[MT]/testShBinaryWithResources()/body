{
  assumeTrue(Platform.detect() != Platform.WINDOWS);
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"sh_binary_with_resources",temporaryFolder);
  workspace.setUp();
  ProcessResult buildResult=workspace.runBuckCommand("build","//app:create_output_using_node");
  buildResult.assertSuccess();
  File outputFile=workspace.getFile("buck-out/gen/app/output.txt");
  List<String> lines=Files.readLines(outputFile,Charsets.US_ASCII);
  ExecutionEnvironment executionEnvironment=new DefaultExecutionEnvironment(new FakeProcessExecutor(),ImmutableMap.copyOf(System.getenv()),System.getProperties());
  String expectedPlatform=executionEnvironment.getPlatform().getPrintableName();
  assertEquals(expectedPlatform,lines.get(0));
  assertEquals("arg1 arg2",lines.get(1));
}
