{
  if (rule.getUseBuckHeaderMaps()) {
    Path headerMap=rule.getPathToHeaderMap(HeaderMapType.PUBLIC_HEADER_MAP).get();
    includePaths.add(headerMap);
  }
 else {
    BuildTarget buildTarget=rule.getBuildTarget();
    if (buildTarget.isFlavored()) {
      return;
    }
    BuildTarget targetForHeaders=BuildTargets.createFlavoredBuildTarget(buildTarget,AbstractAppleNativeTargetBuildRuleDescriptions.HEADERS);
    SymlinkTree headersRule=(SymlinkTree)buildRuleResolver.getRule(targetForHeaders);
    Optional<Path> headersDirectory=headersRule.getRootOfSymlinksDirectory();
    if (headersDirectory.isPresent()) {
      includePaths.add(headersDirectory.get());
      deps.add(headersRule);
    }
  }
}
