{
  sourcePathResolver=new SourcePathResolver(new BuildRuleResolver());
  guavaJarPath=Paths.get("third_party/java/guava.jar");
  guava=PrebuiltJarBuilder.createBuilder(BuildTargetFactory.newInstance("//third_party/java/guava:guava")).setBinaryJar(guavaJarPath).build();
  androidSupport=AndroidPrebuiltAarBuilder.createBuilder(BuildTargetFactory.newInstance("//third_party/java/support:support")).setBinaryAar(Paths.get("third_party/java/support/support.aar")).build();
  base=JavaLibraryBuilder.createBuilder(BuildTargetFactory.newInstance("//java/com/example/base:base")).addDep(guava.getBuildTarget()).build();
  droid=JavaLibraryBuilder.createBuilder(BuildTargetFactory.newInstance("//java/com/example/droid:droid")).addDep(guava.getBuildTarget()).addDep(androidSupport.getBuildTarget()).build();
  libraryFactoryResolver=new IjLibraryFactory.IjLibraryFactoryResolver(){
    @Override public Path getPath(    SourcePath path){
      return sourcePathResolver.getPath(path);
    }
  }
;
  factory=IjLibraryFactory.create(ImmutableSet.of(guava,androidSupport,base,droid),libraryFactoryResolver);
  guavaLibrary=factory.getLibrary(guava.getBuildTarget()).get();
  androidSupportLibrary=factory.getLibrary(androidSupport.getBuildTarget()).get();
}
