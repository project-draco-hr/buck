{
  assumeTrue(Platform.detect() == Platform.MACOS);
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"watch_application_bundle",tmp);
  workspace.setUp();
  BuildTarget packageTarget=BuildTargetFactory.newInstance("//:DemoAppPackage");
  workspace.runBuckCommand("build",packageTarget.getFullyQualifiedName()).assertSuccess();
  Path destination=workspace.getDestPath();
  Unzip.extractZipFile(workspace.getPath(BuildTargets.getGenPath(packageTarget,"%s.ipa")),destination,Unzip.ExistingFileMode.OVERWRITE_AND_CLEAN_DIRECTORIES);
  assertTrue(Files.exists(destination.resolve("Payload/DemoApp.app/Watch/DemoWatchApp.app/_WatchKitStub/WK")));
}
