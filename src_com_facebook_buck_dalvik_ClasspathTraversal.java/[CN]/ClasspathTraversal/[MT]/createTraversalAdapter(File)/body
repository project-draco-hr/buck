{
  String extension=Files.getFileExtension(path.getName());
  if (extension.equalsIgnoreCase("jar") || extension.equalsIgnoreCase("zip")) {
    return new ZipFileTraversalAdapter(path);
  }
 else   if (path.isDirectory()) {
    return new DirectoryTraversalAdapter(path);
  }
 else   if (path.isFile()) {
    return new FileTraversalAdapter(path);
  }
 else {
    throw new IllegalArgumentException("Unsupported classpath traversal input: " + path);
  }
}
