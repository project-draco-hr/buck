def _is_dirty(self):
    buck_repo_dirty = os.environ.get('BUCK_REPOSITORY_DIRTY')
    if buck_repo_dirty:
        return (buck_repo_dirty == '1')
    if (not self._is_git):
        return False
    output = subprocess.check_output(['git', 'status', '--porcelain'], cwd=self._buck_dir)
    return bool(output.strip())
