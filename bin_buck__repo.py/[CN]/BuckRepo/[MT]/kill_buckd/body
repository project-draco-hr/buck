def kill_buckd(self):
    with Tracing('BuckRepo.kill_buckd'):
        buckd_port = self._buck_project.get_buckd_port()
        if buckd_port:
            if (not buckd_port.isdigit()):
                print("WARNING: Corrupt buckd port: '{0}'.".format(buckd_port))
            else:
                print('Shutting down nailgun server...', file=sys.stderr)
                command = [self._buck_client_file]
                command.append('ng-stop')
                command.append('--nailgun-port')
                command.append(buckd_port)
                try:
                    check_output(command, cwd=self._buck_project.root, stderr=subprocess.STDOUT)
                except CalledProcessError as e:
                    if (e.returncode not in [NAILGUN_CONNECTION_REFUSED_CODE, NAILGUN_CONNECTION_BROKEN_CODE, NAILGUN_UNEXPECTED_CHUNK_TYPE]):
                        print(e.output, end='', file=sys.stderr)
                        raise
        self._buck_project.clean_up_buckd()
