def __init__(self, buck_bin_dir, buck_project):
    self._buck_bin_dir = buck_bin_dir
    self._buck_dir = os.path.dirname(self._buck_bin_dir)
    self._build_success_file = os.path.join(self._buck_dir, 'build', 'successful-build')
    self._buck_client_file = os.path.join(self._buck_dir, 'build', 'ng')
    self._buck_project = buck_project
    self._tmp_dir = buck_project.tmp_dir
    dot_git = os.path.join(self._buck_dir, '.git')
    self._is_git = (os.path.exists(dot_git) and os.path.isdir(dot_git))
    buck_version = buck_project.buck_version
    if ((not buck_project.has_no_buck_check) and buck_version):
        revision = buck_version[0]
        branch = (buck_version[1] if (len(buck_version) > 1) else None)
        self._checkout_and_clean(revision, branch)
