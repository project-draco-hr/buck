{
  JavaTestRule.Builder builder=((JavaTestRule.Builder)abstractBuilder);
  JavaLibraryBuildRuleFactory.extractAnnotationProcessorParameters(builder.getAnnotationProcessingBuilder(),builder,params);
  Optional<String> sourceLevel=params.getOptionalStringAttribute("source");
  builder.setSourceLevel(sourceLevel.or(JavacOptionsUtil.DEFAULT_SOURCE_LEVEL));
  Optional<String> targetLevel=params.getOptionalStringAttribute("target");
  builder.setTargetLevel(targetLevel.or(JavacOptionsUtil.DEFAULT_TARGET_LEVEL));
  builder.setVmArgs(params.getOptionalListAttribute("vm_args"));
  Function<String,String> contextualBuildParser=createBuildTargetParseFunction(params);
  ImmutableSet<String> sourceUnderTest=ImmutableSet.copyOf(Iterables.transform(params.getOptionalListAttribute("source_under_test"),contextualBuildParser));
  builder.setSourceUnderTest(sourceUnderTest);
}
