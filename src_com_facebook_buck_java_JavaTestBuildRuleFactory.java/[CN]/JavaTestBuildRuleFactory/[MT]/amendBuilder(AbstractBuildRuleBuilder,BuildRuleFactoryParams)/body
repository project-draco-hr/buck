{
  JavaTestRule.Builder builder=((JavaTestRule.Builder)abstractBuilder);
  JavaLibraryBuildRuleFactory.extractAnnotationProcessorParameters(builder.getAnnotationProcessingBuilder(),builder,params);
  Optional<String> sourceLevel=params.getOptionalStringAttribute("source");
  if (sourceLevel.isPresent()) {
    builder.setSourceLevel(sourceLevel.get());
  }
  Optional<String> targetLevel=params.getOptionalStringAttribute("target");
  if (targetLevel.isPresent()) {
    builder.setTargetLevel(targetLevel.get());
  }
  builder.setVmArgs(params.getOptionalListAttribute("vm_args"));
  Function<String,String> contextualBuildParser=createBuildTargetParseFunction(params);
  ImmutableSet<String> sourceUnderTest=ImmutableSet.copyOf(Iterables.transform(params.getOptionalListAttribute("source_under_test"),contextualBuildParser));
  builder.setSourceUnderTest(sourceUnderTest);
}
