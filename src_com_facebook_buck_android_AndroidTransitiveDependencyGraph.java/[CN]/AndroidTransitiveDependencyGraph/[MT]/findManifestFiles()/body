{
  final ImmutableSet.Builder<SourcePath> manifestFiles=ImmutableSet.builder();
  new AbstractBreadthFirstTraversal<BuildRule>(rulesToTraverseForTransitiveDeps){
    @Override public ImmutableSet<BuildRule> visit(    BuildRule rule){
      if (rule instanceof AndroidResource) {
        AndroidResource androidRule=(AndroidResource)rule;
        SourcePath manifestFile=androidRule.getManifestFile();
        if (manifestFile != null) {
          manifestFiles.add(manifestFile);
        }
      }
 else       if (rule instanceof AndroidLibrary) {
        AndroidLibrary androidLibraryRule=(AndroidLibrary)rule;
        Optionals.addIfPresent(androidLibraryRule.getManifestFile(),manifestFiles);
      }
      return BuildRuleDependencyVisitors.maybeVisitAllDeps(rule,rule.getProperties().is(LIBRARY));
    }
  }
.start();
  return manifestFiles.build();
}
