{
  String entryName="A";
  ByteSource contents=ByteSource.wrap("contents".getBytes(StandardCharsets.UTF_8));
  writer.writeEntry(entryName,contents);
  writer.close();
  try (JarInputStream jar=new JarInputStream(new ByteArrayInputStream(out.toByteArray()))){
    jar.getNextJarEntry();
    JarEntry manifestEntry=jar.getNextJarEntry();
    assertEquals(JarFile.MANIFEST_NAME,manifestEntry.getName());
    Manifest manifest=new Manifest();
    manifest.read(jar);
    String expectedHash=contents.hash(Hashing.murmur3_128()).toString();
    assertEquals(expectedHash,manifest.getEntries().get(entryName).getValue("Murmur3-128-Digest"));
  }
 }
