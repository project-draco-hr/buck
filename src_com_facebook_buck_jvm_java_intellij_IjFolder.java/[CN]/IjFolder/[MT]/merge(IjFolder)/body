{
  if (!canMergeWith(otherFolder)) {
    throw new IllegalArgumentException("Can not merge " + this.getClass().getSimpleName() + " with a "+ otherFolder.getClass().getSimpleName());
  }
  if (equals(otherFolder)) {
    return this;
  }
  return getFactory().create(otherFolder.getPath(),getWantsPackagePrefix() || otherFolder.getWantsPackagePrefix(),combineInputs(this,otherFolder));
}
