{
  BuildRuleResolver resolver=new BuildRuleResolver();
  SourcePathResolver pathResolver=new SourcePathResolver(resolver);
  SourcePath path=new FakeSourcePath("input");
  CommandTool tool=new CommandTool.Builder().addArg("runit").addEnvironment("PATH",path).build();
  assertThat(tool.getEnvironment(pathResolver),Matchers.hasEntry(Matchers.equalTo("PATH"),Matchers.containsString("input")));
}
