{
  ProjectFilesystem projectFilesystem=EasyMock.createMock(ProjectFilesystem.class);
  EasyMock.expect(projectFilesystem.readFileIfItExists(Paths.get("buck-out/bin/foo/bar/.baz/metadata/" + BuildInfo.METADATA_KEY_FOR_RULE_KEY_WITHOUT_DEPS))).andReturn(Optional.of("Not A Valid Rule Key"));
  EasyMock.replay(projectFilesystem);
  BuildTarget buildTarget=BuildTarget.builder("//foo/bar","baz").build();
  DefaultOnDiskBuildInfo onDiskBuildInfo=new DefaultOnDiskBuildInfo(buildTarget,projectFilesystem);
  assertThat(onDiskBuildInfo.getRuleKey(BuildInfo.METADATA_KEY_FOR_RULE_KEY_WITHOUT_DEPS),Matchers.equalTo(Optional.<RuleKey>absent()));
  EasyMock.verify(projectFilesystem);
}
