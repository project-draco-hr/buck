{
  HttpURLConnection connection=(HttpURLConnection)new URL(endpoint).openConnection();
  connection.setUseCaches(false);
  connection.setDoInput(true);
  connection.setDoOutput(true);
  connection.setConnectTimeout(timeout);
  connection.setReadTimeout(timeout);
  try (OutputStreamWriter output=new OutputStreamWriter(connection.getOutputStream())){
    output.write(payload);
  }
   try (InputStream is=connection.getInputStream()){
    ByteStreams.copy(is,ByteStreams.nullOutputStream());
  }
   int responseCode=connection.getResponseCode();
  if (responseCode != HttpURLConnection.HTTP_OK) {
    throw new IOException("Got non-ok response code from endpoint:" + responseCode);
  }
}
