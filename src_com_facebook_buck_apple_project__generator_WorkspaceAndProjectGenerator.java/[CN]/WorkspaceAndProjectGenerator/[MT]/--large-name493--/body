{
  Iterable<PBXTarget> synthesizedCombinedTestTargets;
  LOG.debug("Generating a combined project");
  ProjectGenerator generator=new ProjectGenerator(projectGraph,targetsInRequiredProjects,rootCell,outputDirectory.getParent(),workspaceName,buildFileName,projectGeneratorOptions,targetToBuildWithBuck,buildWithBuckFlags,focusModules,executableFinder,environment,cxxPlatforms,defaultCxxPlatform,sourcePathResolverForNode,buckEventBus,halideBuckConfig,cxxBuckConfig,appleConfig).setAdditionalCombinedTestTargets(groupedTests).setTestsToGenerateAsStaticLibraries(groupableTests);
  combinedProjectGenerator=Optional.of(generator);
  generator.createXcodeProjects();
  workspaceGenerator.addFilePath(generator.getProjectPath(),Optional.<Path>absent());
  requiredBuildTargetsBuilder.addAll(generator.getRequiredBuildTargets());
  buildTargetToPbxTargetMapBuilder.putAll(generator.getBuildTargetToGeneratedTargetMap());
  for (  PBXTarget target : generator.getBuildTargetToGeneratedTargetMap().values()) {
    targetToProjectPathMapBuilder.put(target,generator.getProjectPath());
  }
  synthesizedCombinedTestTargets=generator.getBuildableCombinedTestTargets();
  for (  PBXTarget target : synthesizedCombinedTestTargets) {
    targetToProjectPathMapBuilder.put(target,generator.getProjectPath());
  }
  return synthesizedCombinedTestTargets;
}
