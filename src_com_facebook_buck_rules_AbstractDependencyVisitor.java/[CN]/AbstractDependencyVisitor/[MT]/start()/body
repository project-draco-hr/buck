{
  while (!toExplore.isEmpty()) {
    BuildRule currentRule=toExplore.remove();
    if (explored.contains(currentRule)) {
      continue;
    }
    boolean shouldVisitDeps=visit(currentRule);
    explored.add(currentRule);
    if (shouldVisitDeps) {
      for (      BuildRule dep : currentRule.getDeps()) {
        if (!explored.contains(dep)) {
          toExplore.add(dep);
        }
      }
    }
  }
  onComplete();
}
