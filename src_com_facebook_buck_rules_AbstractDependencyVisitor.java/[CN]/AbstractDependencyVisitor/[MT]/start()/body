{
  while (!toExplore.isEmpty()) {
    BuildRule currentRule=toExplore.remove();
    if (explored.contains(currentRule)) {
      continue;
    }
    ImmutableSet<BuildRule> depsToVisit=visit(currentRule);
    explored.add(currentRule);
    for (    BuildRule dep : depsToVisit) {
      if (!explored.contains(dep)) {
        toExplore.add(dep);
      }
    }
  }
  onComplete();
}
