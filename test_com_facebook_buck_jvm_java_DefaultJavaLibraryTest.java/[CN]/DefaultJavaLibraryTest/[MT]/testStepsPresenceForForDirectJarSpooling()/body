{
  BuildTarget buildTarget=BuildTargetFactory.newInstance("//:lib");
  BuildRule javaLibraryBuildRule=createDefaultJavaLibraryRuleWithAbiKey(buildTarget,ImmutableSortedSet.of("foo/Bar.java"),ImmutableSortedSet.<BuildRule>of(),ImmutableSortedSet.<BuildRule>of(),Optional.of(AbstractJavacOptions.SpoolMode.DIRECT_TO_JAR),ImmutableList.<String>of());
  ProjectFilesystem projectFilesystem=new ProjectFilesystem(tmp.getRoot().toPath());
  BuildContext buildContext=createBuildContext(javaLibraryBuildRule,null,projectFilesystem);
  ImmutableList<Step> steps=javaLibraryBuildRule.getBuildSteps(buildContext,new FakeBuildableContext());
  assertThat(steps,Matchers.<Step>hasItem(Matchers.instanceOf(JavacDirectToJarStep.class)));
  assertThat(steps,Matchers.not(Matchers.<Step>hasItem(Matchers.instanceOf(JavacStep.class))));
  assertThat(steps,Matchers.not(Matchers.<Step>hasItem(Matchers.instanceOf(JarDirectoryStep.class))));
}
