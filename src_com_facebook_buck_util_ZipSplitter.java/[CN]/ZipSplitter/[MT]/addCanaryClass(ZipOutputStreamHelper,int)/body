{
  final byte[] canaryClass=Arrays.copyOf(CANARY_TEMPLATE,CANARY_TEMPLATE.length);
  final String canaryIndexStr=String.format("%02d",index);
  byte[] canaryIndexBytes=canaryIndexStr.getBytes(Charset.forName("UTF-8"));
  Preconditions.checkState(canaryIndexBytes.length == 2,"Formatted index string should always be 2 bytes.");
  System.arraycopy(canaryIndexBytes,0,canaryClass,CANARY_INDEX_OFFSET,2);
  outZip.putEntry(new AbstractFileLike(){
    @Override public File getContainer(){
      return new File(":memory:");
    }
    @Override public String getRelativePath(){
      return String.format(CANARY_PATH_FORMAT,index);
    }
    @Override public long getSize(){
      return canaryClass.length;
    }
    @Override public InputStream getInput(){
      return new ByteArrayInputStream(canaryClass);
    }
  }
);
}
