{
  this.filesystem=Preconditions.checkNotNull(filesystem);
  this.ignoredPrefixes=Preconditions.checkNotNull(excludeDirectories);
  this.eventBus=Preconditions.checkNotNull(fileChangeEventBus);
  this.watchService=Preconditions.checkNotNull(watchService);
  this.keys=Maps.newHashMap();
  registerAll(filesystem.getRootPath());
}
