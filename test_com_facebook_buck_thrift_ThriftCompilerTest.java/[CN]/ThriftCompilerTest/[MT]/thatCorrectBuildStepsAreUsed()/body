{
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  ThriftCompiler thriftCompiler=new ThriftCompiler(params,pathResolver,DEFAULT_COMPILER,DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,DEFAULT_INCLUDES);
  ImmutableList<Step> expected=ImmutableList.of(new MakeCleanDirectoryStep(DEFAULT_OUTPUT_DIR),new ThriftCompilerStep(pathResolver.getPath(DEFAULT_COMPILER),DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,pathResolver.getPath(DEFAULT_INPUT),DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS));
  ImmutableList<Step> actual=thriftCompiler.getBuildSteps(FakeBuildContext.NOOP_CONTEXT,new FakeBuildableContext());
  assertEquals(expected,actual);
}
