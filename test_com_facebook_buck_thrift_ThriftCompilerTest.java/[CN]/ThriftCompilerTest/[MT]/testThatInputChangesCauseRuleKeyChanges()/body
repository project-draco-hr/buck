{
  SourcePathResolver resolver=new SourcePathResolver(new BuildRuleResolver());
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  RuleKeyBuilderFactory ruleKeyBuilderFactory=new DefaultRuleKeyBuilderFactory(FakeFileHashCache.createFromStrings(ImmutableMap.of("blah/something.thrift",Strings.repeat("e",40),"different",Strings.repeat("c",40),"something.thrift",Strings.repeat("d",40),"thrift",Strings.repeat("a",40),"test.thrift",Strings.repeat("b",40))),resolver);
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  RuleKey defaultRuleKey=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,DEFAULT_HEADER_MAPS,DEFAULT_INCLUDES));
  RuleKey compilerChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,new CommandTool.Builder().addArg(new TestSourcePath("different")).build(),DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,DEFAULT_HEADER_MAPS,DEFAULT_INCLUDES));
  assertNotEquals(defaultRuleKey,compilerChange);
  RuleKey flagsChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,ImmutableList.of("--different"),DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,DEFAULT_HEADER_MAPS,DEFAULT_INCLUDES));
  assertNotEquals(defaultRuleKey,flagsChange);
  RuleKey outputDirChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,DEFAULT_FLAGS,Paths.get("different-dir"),DEFAULT_INPUT,DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,DEFAULT_HEADER_MAPS,DEFAULT_INCLUDES));
  assertNotEquals(defaultRuleKey,outputDirChange);
  RuleKey inputChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,new TestSourcePath("different"),DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,DEFAULT_HEADER_MAPS,DEFAULT_INCLUDES));
  assertNotEquals(defaultRuleKey,inputChange);
  RuleKey languageChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,"different",DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,DEFAULT_HEADER_MAPS,DEFAULT_INCLUDES));
  assertNotEquals(defaultRuleKey,languageChange);
  RuleKey optionsChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,DEFAULT_LANGUAGE,ImmutableSet.of("different"),DEFAULT_INCLUDE_ROOTS,DEFAULT_HEADER_MAPS,DEFAULT_INCLUDES));
  assertNotEquals(defaultRuleKey,optionsChange);
  RuleKey includeRootsChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,DEFAULT_LANGUAGE,DEFAULT_OPTIONS,ImmutableList.of(Paths.get("different")),DEFAULT_HEADER_MAPS,DEFAULT_INCLUDES));
  assertEquals(defaultRuleKey,includeRootsChange);
  RuleKey headerMapKeyChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,ImmutableSet.of(Paths.get("different-header-map")),DEFAULT_INCLUDES));
  assertEquals(defaultRuleKey,headerMapKeyChange);
  RuleKey includesKeyChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,DEFAULT_HEADER_MAPS,ImmutableMap.<Path,SourcePath>of(DEFAULT_INCLUDES.entrySet().iterator().next().getKey(),new TestSourcePath("different"))));
  assertNotEquals(defaultRuleKey,includesKeyChange);
  RuleKey includesValueChange=generateRuleKey(ruleKeyBuilderFactory,new ThriftCompiler(params,resolver,DEFAULT_COMPILER,DEFAULT_FLAGS,DEFAULT_OUTPUT_DIR,DEFAULT_INPUT,DEFAULT_LANGUAGE,DEFAULT_OPTIONS,DEFAULT_INCLUDE_ROOTS,DEFAULT_HEADER_MAPS,ImmutableMap.of(Paths.get("different"),DEFAULT_INCLUDES.entrySet().iterator().next().getValue())));
  assertNotEquals(defaultRuleKey,includesValueChange);
}
