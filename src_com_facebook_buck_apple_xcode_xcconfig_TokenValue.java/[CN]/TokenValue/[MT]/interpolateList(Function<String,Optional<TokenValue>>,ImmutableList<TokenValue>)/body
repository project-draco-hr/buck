{
  ImmutableList.Builder<TokenValue> newValues=ImmutableList.builder();
  @Nullable StringBuilder stringValue=new StringBuilder();
  for (  TokenValue token : values) {
    TokenValue newToken=token.interpolate(function);
    newValues.add(newToken);
    if (stringValue != null) {
      if (newToken.type != Type.LITERAL) {
        stringValue=null;
      }
 else {
        stringValue.append(newToken.literalValue);
      }
    }
  }
  if (stringValue != null) {
    return ImmutableList.of(literal(stringValue.toString()));
  }
  return newValues.build();
}
