{
  RepositorySystem repoSys=Preconditions.checkNotNull(locator.getService(RepositorySystem.class));
  DefaultRepositorySystemSession session=MavenRepositorySystemUtils.newSession();
  session.setLocalRepositoryManager(repoSys.newLocalRepositoryManager(session,localRepo));
  session.setReadOnly();
  DeployRequest deployRequest=new DeployRequest().setRepository(remoteRepo);
  for (  Artifact artifact : toPublish) {
    File file=artifact.getFile();
    Preconditions.checkNotNull(file);
    Preconditions.checkArgument(file.exists(),"No such file: %s",file.getAbsolutePath());
    deployRequest.addArtifact(artifact);
  }
  repoSys.deploy(session,deployRequest);
}
