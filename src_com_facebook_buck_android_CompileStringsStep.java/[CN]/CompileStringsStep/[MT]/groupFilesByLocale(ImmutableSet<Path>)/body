{
  ImmutableMultimap.Builder<String,Path> localeToFiles=ImmutableMultimap.builder();
  for (  Path filepath : files) {
    Matcher matcher=STRING_FILE_PATTERN.matcher(filepath.toString());
    if (!matcher.matches()) {
      continue;
    }
    String baseLocale=matcher.group(1);
    String country=matcher.group(2);
    String locale=country == null ? baseLocale : baseLocale + "_" + country;
    if (country != null && !regionSpecificToBaseLocaleMap.containsKey(locale)) {
      regionSpecificToBaseLocaleMap.put(locale,baseLocale);
    }
    localeToFiles.put(locale,filepath);
  }
  return localeToFiles.build();
}
