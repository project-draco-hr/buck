{
  if (!(value instanceof Collection)) {
    throw new IllegalArgumentException(String.format("May not set '%s' on a collection type in build file in %s",value,pathRelativeToProjectRoot));
  }
  List<Object> collection=Lists.newArrayList();
  for (  Object obj : (Iterable<Object>)value) {
    collection.add(coerceToExpectedType(ruleResolver,obj));
  }
  if (SortedSet.class.isAssignableFrom(containerType)) {
    return ImmutableSortedSet.copyOf(collection);
  }
 else   if (Set.class.isAssignableFrom(containerType)) {
    return ImmutableSet.copyOf(collection);
  }
 else {
    return ImmutableList.copyOf(collection);
  }
}
