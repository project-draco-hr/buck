{
  TestConsole console=new TestConsole();
  CommandRunnerParamsForTesting commandRunnerParams=CommandRunnerParamsForTesting.builder().setConsole(console).build();
  RunCommand runCommand=new RunCommand(commandRunnerParams);
  BuckConfig buckConfig=new FakeBuckConfig();
  RunCommandOptions options=new RunCommandOptions(buckConfig);
  options.setArguments(ImmutableList.of("//does/not/exist"));
  int exitCode=runCommand.runCommandWithOptionsInternal(options);
  assertEquals("",console.getTextWrittenToStdOut());
  String stderrText=console.getTextWrittenToStdErr();
  assertEquals(stderrText,"BUILD FAILED: No directory does/not/exist when resolving target " + "//does/not/exist:exist in context FULLY_QUALIFIED\n");
  assertEquals(1,exitCode);
}
