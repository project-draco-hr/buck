{
  BuildRuleResolver params=new BuildRuleResolver();
  AndroidLibraryRule androidLibraryRuleBuilderBar=getAndroidLibraryRuleBar(params);
  AndroidLibraryRule androidLibraryRuleBuilderFoo=getAndroidLibraryRuleFoo(params);
  BuildContext context=createMock(BuildContext.class);
  replay(context);
  MoreAsserts.assertIterablesEquals("getInputsToCompareToOutput() should include manifest and src.",ImmutableList.of(Paths.get("java/src/com/foo/Foo.java"),Paths.get("java/src/com/foo/AndroidManifest.xml")),androidLibraryRuleBuilderFoo.getInputsToCompareToOutput());
  MoreAsserts.assertIterablesEquals("getInputsToCompareToOutput() should include only src.",ImmutableList.of(Paths.get("java/src/com/bar/Bar.java")),androidLibraryRuleBuilderBar.getInputsToCompareToOutput());
  assertEquals("foo's exported deps should include bar",ImmutableSet.of(androidLibraryRuleBuilderBar),androidLibraryRuleBuilderFoo.getExportedDeps());
}
