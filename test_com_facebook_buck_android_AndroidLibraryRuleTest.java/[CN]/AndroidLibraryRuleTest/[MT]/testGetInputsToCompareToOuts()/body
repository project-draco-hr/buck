{
  BuildRuleResolver params=new BuildRuleResolver();
  AndroidLibraryRule androidLibraryRuleBuilderBar=getAndroidLibraryRuleBar(params);
  AndroidLibraryRule androidLibraryRuleBuilderFoo=getAndroidLibraryRuleFoo(params);
  BuildContext context=createMock(BuildContext.class);
  replay(context);
  MoreAsserts.assertListEquals("getInputsToCompareToOutput() should include manifest and src.",ImmutableList.of("java/src/com/foo/Foo.java","java/src/com/foo/AndroidManifest.xml"),androidLibraryRuleBuilderFoo.getInputsToCompareToOutput());
  MoreAsserts.assertListEquals("getInputsToCompareToOutput() should include only src.",ImmutableList.of("java/src/com/bar/Bar.java"),androidLibraryRuleBuilderBar.getInputsToCompareToOutput());
  assertEquals("foo's exported deps should include bar",ImmutableSet.of(androidLibraryRuleBuilderBar),androidLibraryRuleBuilderFoo.getExportedDeps());
}
