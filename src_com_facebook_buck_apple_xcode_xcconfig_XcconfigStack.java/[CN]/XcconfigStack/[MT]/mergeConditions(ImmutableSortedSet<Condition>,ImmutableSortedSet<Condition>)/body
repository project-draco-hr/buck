{
  ImmutableSortedSet.Builder<Condition> result=ImmutableSortedSet.naturalOrder();
  Multimap<String,Condition> map1=Multimaps.index(clause1,GET_KEY_FUNC);
  Multimap<String,Condition> map2=Multimaps.index(clause2,GET_KEY_FUNC);
  for (  String key : Sets.intersection(map1.keySet(),map2.keySet())) {
    Condition best=null;
    for (    Condition current : Iterables.concat(map1.get(key),map2.get(key))) {
      if (best == null) {
        best=current;
        continue;
      }
      best=best.narrow(current);
      if (best == null) {
        return null;
      }
    }
    result.add(best);
  }
  for (  String key : Sets.difference(map1.keySet(),map2.keySet())) {
    result.addAll(map1.get(key));
  }
  for (  String key : Sets.difference(map2.keySet(),map1.keySet())) {
    result.addAll(map2.get(key));
  }
  return result.build();
}
