{
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  RuleKeyBuilderFactory ruleKeyBuilderFactory=new DefaultRuleKeyBuilderFactory(FakeFileHashCache.createFromStrings(ImmutableMap.of("yacc",Strings.repeat("a",40),"input",Strings.repeat("b",40),"different",Strings.repeat("c",40))),pathResolver);
  RuleKey defaultRuleKey=generateRuleKey(ruleKeyBuilderFactory,new Yacc(params,pathResolver,DEFAULT_YACC,DEFAULT_FLAGS,DEFAULT_OUTPUT_PREFIX,DEFAULT_INPUT));
  RuleKey yaccChange=generateRuleKey(ruleKeyBuilderFactory,new Yacc(params,pathResolver,new HashedFileTool(Paths.get("different")),DEFAULT_FLAGS,DEFAULT_OUTPUT_PREFIX,DEFAULT_INPUT));
  assertNotEquals(defaultRuleKey,yaccChange);
  RuleKey flagsChange=generateRuleKey(ruleKeyBuilderFactory,new Yacc(params,pathResolver,DEFAULT_YACC,ImmutableList.of("-different"),DEFAULT_OUTPUT_PREFIX,DEFAULT_INPUT));
  assertNotEquals(defaultRuleKey,flagsChange);
  RuleKey outputPrefixChange=generateRuleKey(ruleKeyBuilderFactory,new Yacc(params,pathResolver,DEFAULT_YACC,DEFAULT_FLAGS,Paths.get("different"),DEFAULT_INPUT));
  assertNotEquals(defaultRuleKey,outputPrefixChange);
  RuleKey inputChange=generateRuleKey(ruleKeyBuilderFactory,new Yacc(params,pathResolver,DEFAULT_YACC,DEFAULT_FLAGS,DEFAULT_OUTPUT_PREFIX,new TestSourcePath("different")));
  assertNotEquals(defaultRuleKey,inputChange);
}
