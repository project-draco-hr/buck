{
  ImmutableSortedSet<BuildRule> originalDeps=originalBuildRuleParams.getDeps();
  ImmutableSet<HasAndroidResourceDeps> androidResourceDeps=FluentIterable.from(originalDeps).filter(HasAndroidResourceDeps.class).filter(HasAndroidResourceDeps.NON_EMPTY_RESOURCE).toSet();
  if (androidResourceDeps.isEmpty() && !createBuildableIfEmptyDeps) {
    return Optional.absent();
  }
  ImmutableSortedSet.Builder<BuildRule> actualDeps=ImmutableSortedSet.naturalOrder();
  for (  HasAndroidResourceDeps dep : androidResourceDeps) {
    actualDeps.add(ruleResolver.get(dep.getBuildTarget()));
  }
  BuildRuleParams dummyRDotJavaParams=originalBuildRuleParams.copyWithChanges(BuildRuleType.DUMMY_R_DOT_JAVA,dummyRDotJavaBuildTarget,actualDeps.build(),ImmutableSortedSet.<BuildRule>of());
  DummyRDotJava dummyRDotJava=new DummyRDotJava(dummyRDotJavaParams,androidResourceDeps,javacOptions);
  ruleResolver.addToIndex(dummyRDotJava);
  return Optional.of(dummyRDotJava);
}
