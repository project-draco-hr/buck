{
  String absoluteImportBuckPath=project.getBaseDir().getPath() + "/" + importBuckPath;
  StringBuilder currentBuck=new StringBuilder(readBuckFile(absoluteImportBuckPath + "/BUCK"));
  String newVisibility="'//" + currentBuckPath + ":"+ currentTarget+ "'";
  int startOfNewTarget=currentBuck.indexOf("'" + importTarget + "'");
  int startOfVisibility=0;
  int endOfVisibility;
  Matcher startMatcher=visibilityStartPattern.matcher(currentBuck);
  if (startMatcher.find(startOfNewTarget)) {
    startOfVisibility=startMatcher.end();
  }
  endOfVisibility=currentBuck.indexOf("]",startOfVisibility);
  if (!currentBuck.substring(startOfVisibility,endOfVisibility).contains(newVisibility) && !currentBuck.substring(startOfVisibility,endOfVisibility).contains("'PUBLIC'")) {
    currentBuck.insert(startOfVisibility,"\n\t\t" + newVisibility + ",");
    writeBuckFile(absoluteImportBuckPath + "/BUCK",currentBuck.toString());
  }
}
