{
  BuildRuleBuilderParams buildRuleBuilderParams=new BuildRuleBuilderParams();
  buildRuleBuilderParams.buildAndAddToIndex(DefaultJavaLibraryRule.newJavaLibraryRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//buck-android/com/facebook:R")).addSrc("buck-android/com/facebook/R.java").addVisibilityPattern(BuildTargetPattern.MATCH_ALL));
  guava=buildRuleBuilderParams.buildAndAddToIndex(PrebuiltJarRule.newPrebuiltJarRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//third_party/guava:guava")).setBinaryJar(PATH_TO_GUAVA_JAR).addVisibilityPattern(BuildTargetPattern.MATCH_ALL));
  buildRuleBuilderParams.buildAndAddToIndex(AndroidResourceRule.newAndroidResourceRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//android_res/base:res")).setRes("android_res/base/res").setRDotJavaPackage("com.facebook").addVisibilityPattern(BuildTargetPattern.MATCH_ALL));
  ProjectConfigRule projectConfigRuleForResource=buildRuleBuilderParams.buildAndAddToIndex(ProjectConfigRule.newProjectConfigRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//android_res/base:project_config")).setSrcTarget(Optional.of("//android_res/base:res")).setSrcRoots(ImmutableList.of("res")));
  buildRuleBuilderParams.buildAndAddToIndex(DefaultJavaLibraryRule.newJavaLibraryRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//java/src/com/facebook/grandchild:grandchild")).addSrc("Grandchild.java").addVisibilityPattern(BuildTargetPattern.MATCH_ALL));
  buildRuleBuilderParams.buildAndAddToIndex(DefaultJavaLibraryRule.newJavaLibraryRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//java/src/com/facebook/child:child")).addSrc("Child.java").addDep("//java/src/com/facebook/grandchild:grandchild").addVisibilityPattern(BuildTargetPattern.MATCH_ALL));
  buildRuleBuilderParams.buildAndAddToIndex(DefaultJavaLibraryRule.newJavaLibraryRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//java/src/com/facebook/exportlib:exportlib")).addSrc("ExportLib.java").addDep("//third_party/guava:guava").setExportDeps(true).addVisibilityPattern(BuildTargetPattern.MATCH_ALL));
  buildRuleBuilderParams.buildAndAddToIndex(AndroidLibraryRule.newAndroidLibraryRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//java/src/com/facebook/base:base")).addSrc("Base.java").addDep("//buck-android/com/facebook:R").addDep("//java/src/com/facebook/exportlib:exportlib").addDep("//java/src/com/facebook/child:child").addDep("//android_res/base:res").addVisibilityPattern(BuildTargetPattern.MATCH_ALL));
  ProjectConfigRule projectConfigRuleForLibrary=buildRuleBuilderParams.buildAndAddToIndex(ProjectConfigRule.newProjectConfigRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//java/src/com/facebook/base:project_config")).setSrcTarget(Optional.of("//java/src/com/facebook/base:base")).setSrcRoots(ImmutableList.of("src","src-gen")));
  ProjectConfigRule projectConfigRuleForExportLibrary=buildRuleBuilderParams.buildAndAddToIndex(ProjectConfigRule.newProjectConfigRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//java/src/com/facebook/exportlib:project_config")).setSrcTarget(Optional.of("//java/src/com/facebook/exportlib:exportlib")).setSrcRoots(ImmutableList.of("src")));
  buildRuleBuilderParams.buildAndAddToIndex(AndroidBinaryRule.newAndroidBinaryRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//foo:app")).addDep("//java/src/com/facebook/base:base").setManifest("foo/AndroidManifest.xml").setTarget("Google Inc.:Google APIs:16").setKeystorePropertiesPath("foo/../keystore.properties").addBuildRuleToExcludeFromDex("//third_party/guava:guava"));
  ProjectConfigRule projectConfigRuleUsingNoDx=buildRuleBuilderParams.buildAndAddToIndex(ProjectConfigRule.newProjectConfigRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//foo:project_config")).setSrcTarget(Optional.of("//foo:app")));
  buildRuleBuilderParams.buildAndAddToIndex(AndroidBinaryRule.newAndroidBinaryRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//bar:app")).addDep("//java/src/com/facebook/base:base").setManifest("foo/AndroidManifest.xml").setTarget("Google Inc.:Google APIs:16").setKeystorePropertiesPath("bar/../keystore.properties"));
  ProjectConfigRule projectConfigRule=buildRuleBuilderParams.buildAndAddToIndex(ProjectConfigRule.newProjectConfigRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//bar:project_config")).setSrcTarget(Optional.of("//bar:app")));
  return getModulesForPartialGraph(buildRuleBuilderParams,ImmutableList.of(projectConfigRuleForExportLibrary,projectConfigRuleForLibrary,projectConfigRuleForResource,projectConfigRuleUsingNoDx,projectConfigRule),javaPackageFinder);
}
