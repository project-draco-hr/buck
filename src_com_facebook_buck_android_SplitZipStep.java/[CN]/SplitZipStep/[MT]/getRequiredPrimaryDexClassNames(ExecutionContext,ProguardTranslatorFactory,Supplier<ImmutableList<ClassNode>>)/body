{
  ImmutableSet.Builder<String> builder=ImmutableSet.builder();
  Optional<Path> primaryDexClassesFile=dexSplitMode.getPrimaryDexClassesFile().transform(SourcePaths.TO_PATH);
  if (primaryDexClassesFile.isPresent()) {
    Iterable<String> classes=FluentIterable.from(context.getProjectFilesystem().readLines(primaryDexClassesFile.get())).transform(STRING_TRIM).filter(IS_NEITHER_EMPTY_NOR_COMMENT);
    builder.addAll(classes);
  }
  if (!dexSplitMode.isPrimaryDexScenarioOverflowAllowed() && primaryDexScenarioFile.isPresent()) {
    addScenarioClasses(context,translatorFactory,classesSupplier,builder);
  }
  return ImmutableSet.copyOf(builder.build());
}
