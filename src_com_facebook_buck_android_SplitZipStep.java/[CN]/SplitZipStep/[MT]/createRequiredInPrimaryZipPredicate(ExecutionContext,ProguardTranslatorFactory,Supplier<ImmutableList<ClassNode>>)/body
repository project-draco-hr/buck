{
  final Function<String,String> deobfuscate=translatorFactory.createDeobfuscationFunction();
  final ImmutableSet<String> primaryDexClassNames=getRequiredPrimaryDexClassNames(context,translatorFactory,classesSupplier);
  final ClassNameFilter primaryDexFilter=ClassNameFilter.fromConfiguration(primaryDexPatterns);
  return new Predicate<String>(){
    @Override public boolean apply(    String classFileName){
      if (!classFileName.endsWith(".class")) {
        return true;
      }
      String internalClassName=Preconditions.checkNotNull(deobfuscate.apply(classFileName.replaceAll("\\.class$","")));
      if (primaryDexClassNames.contains(internalClassName)) {
        return true;
      }
      return primaryDexFilter.matches(internalClassName);
    }
  }
;
}
