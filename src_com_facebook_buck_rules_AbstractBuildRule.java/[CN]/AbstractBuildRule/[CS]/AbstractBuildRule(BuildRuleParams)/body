{
  Preconditions.checkNotNull(buildRuleParams);
  this.buildTarget=buildRuleParams.getBuildTarget();
  this.deps=buildRuleParams.getDeps();
  this.visibilityPatterns=buildRuleParams.getVisibilityPatterns();
  this.ruleKeyBuilderFactory=buildRuleParams.getRuleKeyBuilderFactory();
  if (!buildTarget.isFlavored()) {
    for (    BuildRule dep : this.deps) {
      if (!dep.isVisibleTo(buildTarget)) {
        throw new HumanReadableException("%s depends on %s, which is not visible",buildTarget,dep);
      }
    }
  }
}
