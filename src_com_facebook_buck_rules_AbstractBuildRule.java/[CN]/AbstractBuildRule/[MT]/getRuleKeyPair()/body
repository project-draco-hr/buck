{
  if (ruleKeyPair == null) {
synchronized (this) {
      if (ruleKeyPair == null) {
        RuleKeyBuilder builder=ruleKeyBuilderFactory.newInstance(this);
        RuleKey ruleKeyWithoutDeps=builder.build();
        builder.setReflectively("deps",getDeclaredDeps());
        builder.setReflectively("buck.extraDeps",getExtraDeps());
        RuleKey totalRuleKey=builder.build();
        ruleKeyPair=RuleKeyPair.of(totalRuleKey,ruleKeyWithoutDeps);
      }
    }
  }
  return ruleKeyPair;
}
