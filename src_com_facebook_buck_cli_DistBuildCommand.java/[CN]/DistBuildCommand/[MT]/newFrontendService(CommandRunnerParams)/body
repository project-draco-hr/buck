{
  DistBuildConfig config=new DistBuildConfig(params.getBuckConfig());
  ClientSideSlb slb=config.getFrontendConfig().createHttpClientSideSlb(params.getClock(),params.getBuckEventBus(),new CommandThreadFactory("BuildCommand.HttpLoadBalancer"));
  OkHttpClient client=config.createOkHttpClient();
  return new ThriftOverHttpService<>(ThriftOverHttpServiceConfig.of(new LoadBalancedService(slb,client,params.getBuckEventBus())));
}
