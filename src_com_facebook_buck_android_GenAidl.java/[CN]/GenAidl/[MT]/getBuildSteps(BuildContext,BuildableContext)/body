{
  ImmutableList.Builder<Step> commands=ImmutableList.builder();
  Path outputDirectory=BuildTargets.getBinPath(buildTarget,".%s.aidl");
  commands.add(new MakeCleanDirectoryStep(outputDirectory));
  AidlStep command=new AidlStep(aidlFilePath,ImmutableSet.of(importPath),outputDirectory);
  commands.add(command);
  commands.add(new MakeCleanDirectoryStep(BuckConstant.GEN_PATH.resolve(buildTarget.getBasePath())));
{
    Path genDirectory=BuckConstant.GEN_PATH.resolve(importPath);
    commands.add(new MkdirStep(genDirectory));
    commands.add(new RecordArtifactsInDirectoryStep(buildableContext,outputDirectory,genDirectory));
  }
  commands.add(new MkdirStep(output.getParent()));
  commands.add(new JarDirectoryStep(output,ImmutableSet.of(outputDirectory),null,null));
  buildableContext.recordArtifact(output);
  return commands.build();
}
