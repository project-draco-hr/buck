{
  ImmutableList.Builder<Step> commands=ImmutableList.builder();
  commands.add(new MakeCleanDirectoryStep(genPath));
  BuildTarget target=getBuildTarget();
  Path outputDirectory=BuildTargets.getBinPath(target,"__%s.aidl");
  commands.add(new MakeCleanDirectoryStep(outputDirectory));
  AidlStep command=new AidlStep(target,aidlFilePath,ImmutableSet.of(importPath),outputDirectory);
  commands.add(command);
  Path genDirectory=Paths.get(BuckConstant.GEN_DIR,importPath);
  if (!importPath.startsWith(target.getBasePath().toString())) {
    context.logError("%s, gen_aidl import path (%s) should be a child of %s",target,importPath,target.getBasePath());
  }
  commands.add(new MkdirStep(genDirectory));
  commands.add(new JarDirectoryStep(output,ImmutableSet.of(outputDirectory),null,null));
  buildableContext.recordArtifact(output);
  return commands.build();
}
