{
  try {
    byte[] globalHeader=getBytes(archive,this.expectedGlobalHeader.length);
    checkArchive(Arrays.equals(this.expectedGlobalHeader,globalHeader),"invalid global header");
    while (archive.hasRemaining()) {
      getBytes(archive,16);
      putIntAsDecimalString(archive,12,0);
      putIntAsDecimalString(archive,6,0);
      putIntAsDecimalString(archive,6,0);
      putIntAsOctalString(archive,8,0100644);
      int fileSize=getDecimalStringAsInt(archive,10);
      byte[] fileMagic=getBytes(archive,2);
      checkArchive(Arrays.equals(FILE_MAGIC,fileMagic),"invalid file magic");
      archive.position(archive.position() + fileSize + fileSize % 2);
    }
  }
 catch (  BufferUnderflowException|ReadOnlyBufferException e) {
    throw new ArchiveException(e.getMessage());
  }
}
