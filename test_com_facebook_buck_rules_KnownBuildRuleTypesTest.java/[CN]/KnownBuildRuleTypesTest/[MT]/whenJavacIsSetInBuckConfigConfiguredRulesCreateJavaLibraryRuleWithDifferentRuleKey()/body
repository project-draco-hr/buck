{
  final File javac=temporaryFolder.newFile();
  javac.setExecutable(true);
  Map<String,Map<String,String>> sections=ImmutableMap.of("tools",(Map<String,String>)ImmutableMap.of("javac",javac.toString()));
  FakeBuckConfig buckConfig=new FakeBuckConfig(sections);
  KnownBuildRuleTypes buildRuleTypes=DefaultKnownBuildRuleTypes.getDefaultKnownBuildRuleTypes(new FakeProjectFilesystem());
  DefaultJavaLibrary libraryRule=createJavaLibrary(buildRuleTypes);
  KnownBuildRuleTypes configuredBuildRuleTypes=KnownBuildRuleTypes.createBuilder(buckConfig,new FakeAndroidDirectoryResolver(),new JavaCompilerEnvironment(Optional.<Path>absent(),Optional.of(new JavacVersion("fakeVersion 0.1")),TARGETED_JAVA_VERSION,TARGETED_JAVA_VERSION),DUMMY_PYTHON_ENVIRONMENT).build();
  DefaultJavaLibrary configuredRule=createJavaLibrary(configuredBuildRuleTypes);
  assertNotEquals(libraryRule.getRuleKey(),configuredRule.getRuleKey());
}
