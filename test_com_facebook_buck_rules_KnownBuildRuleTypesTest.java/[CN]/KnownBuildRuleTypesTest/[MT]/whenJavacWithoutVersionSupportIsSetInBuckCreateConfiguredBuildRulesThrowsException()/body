{
  final File javac=temporaryFolder.newFile();
  javac.setExecutable(true);
  Map<String,Map<String,String>> sections=ImmutableMap.of("tools",(Map<String,String>)ImmutableMap.of("javac",javac.toString()));
  FakeBuckConfig buckConfig=new FakeBuckConfig(sections);
  KnownBuildRuleTypes configuredBuildRuleTypes=KnownBuildRuleTypes.createConfiguredBuilder(buckConfig,new FakeProcessExecutor(1,"","error"),new FakeAndroidDirectoryResolver()).build();
  BuildRuleFactory<?> configuredFactory=configuredBuildRuleTypes.getFactory(BuildRuleType.JAVA_LIBRARY);
  configuredFactory.newInstance(params).build(new BuildRuleResolver());
}
