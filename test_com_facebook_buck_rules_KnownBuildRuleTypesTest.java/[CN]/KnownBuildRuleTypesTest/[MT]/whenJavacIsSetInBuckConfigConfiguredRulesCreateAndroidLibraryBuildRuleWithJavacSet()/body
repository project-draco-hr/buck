{
  final File javac=temporaryFolder.newFile();
  javac.setExecutable(true);
  Map<String,Map<String,String>> sections=ImmutableMap.of("tools",(Map<String,String>)ImmutableMap.of("javac",javac.toString()));
  FakeBuckConfig buckConfig=new FakeBuckConfig(sections);
  JavaBuckConfig javaConfig=new JavaBuckConfig(buckConfig);
  KnownBuildRuleTypes buildRuleTypes=KnownBuildRuleTypes.createBuilder(buckConfig,new FakeAndroidDirectoryResolver(),new JavaCompilerEnvironment(javaConfig.getJavac(),Optional.<JavacVersion>absent(),TARGETED_JAVA_VERSION,TARGETED_JAVA_VERSION)).build();
  AndroidLibraryDescription description=(AndroidLibraryDescription)buildRuleTypes.getDescription(AndroidLibraryDescription.TYPE);
  AndroidLibraryDescription.Arg arg=new AndroidLibraryDescription.Arg();
  populateJavaArg(arg);
  arg.manifest=Optional.absent();
  AndroidLibrary rule=description.createBuildRule(buildRuleParams,new BuildRuleResolver(),arg);
  assertEquals(javac.toPath(),rule.getJavac().get());
}
