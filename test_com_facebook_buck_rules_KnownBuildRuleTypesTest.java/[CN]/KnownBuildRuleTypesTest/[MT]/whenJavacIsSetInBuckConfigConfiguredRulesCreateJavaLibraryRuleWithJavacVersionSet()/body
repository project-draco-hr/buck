{
  final File javac=temporaryFolder.newFile();
  javac.setExecutable(true);
  JavacVersion javacVersion=new JavacVersion("fakeVersion 0.1");
  Map<String,Map<String,String>> sections=ImmutableMap.of("tools",(Map<String,String>)ImmutableMap.of("javac",javac.toString()));
  FakeBuckConfig buckConfig=new FakeBuckConfig(sections);
  KnownBuildRuleTypes buildRuleTypes=KnownBuildRuleTypes.createBuilder(buckConfig,new FakeAndroidDirectoryResolver(),new JavaCompilerEnvironment(Optional.<Path>absent(),Optional.of(javacVersion),TARGETED_JAVA_VERSION,TARGETED_JAVA_VERSION)).build();
  BuildRuleFactory<?> factory=buildRuleTypes.getFactory(JavaLibraryDescription.TYPE);
  BuildRule rule=factory.newInstance(params).build(new BuildRuleResolver());
  DefaultJavaLibrary libraryRule=(DefaultJavaLibrary)rule.getBuildable();
  assertEquals(javacVersion,libraryRule.getJavacVersion().get());
}
