{
  SimpleFileVisitor<Path> visitor=new SimpleFileVisitor<Path>(){
    @Override public FileVisitResult visitFile(    Path file,    BasicFileAttributes attrs) throws IOException {
      Path relativized=root.relativize(file);
      try (InputStream is=Files.newInputStream(file);BufferedInputStream bis=new BufferedInputStream(is)){
        onFile.visit(relativized,bis);
      }
       return FileVisitResult.CONTINUE;
    }
  }
;
  Files.walkFileTree(root,visitor);
}
