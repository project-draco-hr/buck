{
  BuildTarget invokingBuildTarget=Preconditions.checkNotNull(getBuildTarget());
  ImmutableSortedSet.Builder<BuildRule> buildRules=ImmutableSortedSet.naturalOrder();
  for (  BuildTarget target : buildTargets) {
    BuildRule buildRule=ruleResolver.get(target);
    if (buildRule != null) {
      buildRules.add(buildRule);
    }
 else     if (!allowNonExistentRule) {
      throw new HumanReadableException("No rule for %s found when processing %s",target,invokingBuildTarget.getFullyQualifiedName());
    }
  }
  return buildRules.build();
}
