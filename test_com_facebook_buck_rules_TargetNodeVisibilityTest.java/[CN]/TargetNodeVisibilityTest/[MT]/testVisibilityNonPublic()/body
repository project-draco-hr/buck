{
  TargetNode<?> nonPublicTargetNode1=createTargetNode(nonPublicTarget1,ImmutableSet.<BuildTargetPattern>of(new SingletonBuildTargetPattern(orcaTarget.getFullyQualifiedName())));
  TargetNode<?> nonPublicTargetNode2=createTargetNode(nonPublicTarget2,ImmutableSet.<BuildTargetPattern>of(new SingletonBuildTargetPattern(orcaTarget.getFullyQualifiedName())));
  TargetNode<?> orcaRule=createTargetNode(orcaTarget,noVisibilityPatterns);
  assertTrue(shouldBeVisibleMessage(nonPublicTargetNode1,orcaTarget),nonPublicTargetNode1.isVisibleTo(orcaTarget));
  assertTrue(shouldBeVisibleMessage(nonPublicTargetNode2,orcaTarget),nonPublicTargetNode2.isVisibleTo(orcaTarget));
  assertFalse(orcaRule.isVisibleTo(nonPublicTarget1));
  assertFalse(orcaRule.isVisibleTo(nonPublicTarget2));
  TargetNode<?> publicTargetNode=createTargetNode(publicTarget,ImmutableSet.of(BuildTargetPattern.MATCH_ALL));
  assertTrue(publicTargetNode.isVisibleTo(nonPublicTarget1));
  assertFalse(nonPublicTargetNode1.isVisibleTo(publicTarget));
}
