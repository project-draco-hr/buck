{
  Preconditions.checkArgument(targetNode.getConstructorArg() instanceof ReactNativeLibraryArgs);
  ProjectFilesystem filesystem=targetNode.getRuleFactoryParams().getProjectFilesystem();
  ReactNativeLibraryArgs args=(ReactNativeLibraryArgs)targetNode.getConstructorArg();
  IosReactNativeLibraryDescription description=(IosReactNativeLibraryDescription)targetNode.getDescription();
  ImmutableList.Builder<String> script=ImmutableList.builder();
  script.add("BASE_DIR=${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}");
  script.add("JS_OUT=${BASE_DIR}/" + args.bundleName);
  script.add("mkdir -p `dirname ${JS_OUT}`");
  script.add(Joiner.on(" ").join(ReactNativeBundle.getBundleScript(filesystem.resolve(sourcePathResolver.apply(description.getReactNativePackager())),filesystem.resolve(sourcePathResolver.apply(args.entryPath)),ReactNativePlatform.IOS,ReactNativeFlavors.isDevMode(targetNode.getBuildTarget()),"${JS_OUT}","${BASE_DIR}")));
  return Joiner.on(" && ").join(script.build());
}
