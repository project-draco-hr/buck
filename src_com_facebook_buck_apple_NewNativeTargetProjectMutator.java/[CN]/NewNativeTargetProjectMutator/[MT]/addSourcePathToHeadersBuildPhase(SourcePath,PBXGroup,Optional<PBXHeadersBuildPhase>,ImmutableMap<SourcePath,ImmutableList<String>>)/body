{
  PBXFileReference fileReference=headersGroup.getOrCreateFileReferenceBySourceTreePath(new SourceTreePath(PBXReference.SourceTree.SOURCE_ROOT,pathRelativizer.outputPathToSourcePath(headerPath)));
  PBXBuildFile buildFile=new PBXBuildFile(fileReference);
  Optional<HeaderVisibility> visibility=Optional.absent();
  ImmutableList<String> headerFlags=sourceFlags.get(headerPath);
  if (headerFlags != null) {
    visibility=HeaderVisibility.fromFlags(headerFlags);
  }
  if (visibility.isPresent()) {
    NSDictionary settings=new NSDictionary();
    settings.put("ATTRIBUTES",new NSArray(new NSString(visibility.get().toXcodeAttribute())));
    buildFile.setSettings(Optional.of(settings));
  }
 else {
    buildFile.setSettings(Optional.<NSDictionary>absent());
  }
  if (headersBuildPhase.isPresent()) {
    headersBuildPhase.get().getFiles().add(buildFile);
    LOG.verbose("Added header path %s to headers group %s, flags %s, PBXFileReference %s",headerPath,headersGroup.getName(),headerFlags,fileReference);
  }
 else {
    LOG.verbose("Skipped header path %s to headers group %s, flags %s, PBXFileReference %s",headerPath,headersGroup.getName(),headerFlags,fileReference);
  }
}
