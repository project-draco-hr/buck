{
  PBXNativeTarget target=new PBXNativeTarget(targetName);
  PBXGroup targetGroup=project.getMainGroup().getOrCreateDescendantGroupByPath(targetGroupPath);
  targetGroup=targetGroup.getOrCreateChildGroupByName(targetName);
  if (gid.isPresent()) {
    target.setGlobalID(gid.get());
  }
  addRunScriptBuildPhases(target,preBuildRunScriptPhases);
  addPhasesAndGroupsForSources(target,targetGroup);
  addFrameworksBuildPhase(project,target);
  addResourcesBuildPhase(target,targetGroup);
  addAssetCatalogFileReference(targetGroup);
  addAssetCatalogBuildPhase(target);
  target.getBuildPhases().addAll((Collection<? extends PBXBuildPhase>)copyFilesPhases);
  addRunScriptBuildPhases(target,postBuildRunScriptPhases);
  addRawScriptBuildPhases(target);
  PBXGroup productsGroup=project.getMainGroup().getOrCreateChildGroupByName("Products");
  PBXFileReference productReference=productsGroup.getOrCreateFileReferenceBySourceTreePath(SourceTreePath.ofAutodetectedType(PBXReference.SourceTree.BUILT_PRODUCTS_DIR,productOutputPath));
  target.setProductName(productName);
  target.setProductReference(productReference);
  target.setProductType(productType);
  project.getTargets().add(target);
  return new Result(target,targetGroup);
}
