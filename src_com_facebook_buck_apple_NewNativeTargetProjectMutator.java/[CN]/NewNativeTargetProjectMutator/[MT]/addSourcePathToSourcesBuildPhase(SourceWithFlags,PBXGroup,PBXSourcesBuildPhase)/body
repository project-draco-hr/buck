{
  PBXFileReference fileReference=sourcesGroup.getOrCreateFileReferenceBySourceTreePath(new SourceTreePath(PBXReference.SourceTree.SOURCE_ROOT,pathRelativizer.outputDirToRootRelative(sourcePathResolver.apply(sourceWithFlags.getSourcePath())),Optional.<String>absent()));
  PBXBuildFile buildFile=new PBXBuildFile(fileReference);
  sourcesBuildPhase.getFiles().add(buildFile);
  List<String> customFlags=sourceWithFlags.getFlags();
  if (!customFlags.isEmpty()) {
    NSDictionary settings=new NSDictionary();
    settings.put("COMPILER_FLAGS",Joiner.on(' ').join(customFlags));
    buildFile.setSettings(Optional.of(settings));
  }
  LOG.verbose("Added source path %s to group %s, flags %s, PBXFileReference %s",sourceWithFlags,sourcesGroup.getName(),customFlags,fileReference);
}
