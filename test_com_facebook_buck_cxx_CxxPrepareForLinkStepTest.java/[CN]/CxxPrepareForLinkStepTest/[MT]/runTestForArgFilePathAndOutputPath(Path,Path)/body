{
  ExecutionContext context=TestExecutionContext.newInstance();
  ImmutableList<String> args=ImmutableList.of("-rpath","hello","a.o","libb.a","-lsysroot","/Library/Application Support/blabla","-F/System/Frameworks","-L/System/libraries","-lz");
  CxxPrepareForLinkStep step=new CxxPrepareForLinkStep(argFilePath,output,args);
  step.execute(context);
  assertThat(Files.exists(argFilePath),Matchers.equalTo(true));
  ImmutableList<String> expectedFileContents=ImmutableList.<String>builder().add("-o",output.toString()).add("-rpath").add("hello").add("a.o").add("libb.a").add("-lsysroot").add("\"/Library/Application Support/blabla\"").add("-F/System/Frameworks").add("-L/System/libraries").add("-lz").build();
  List<String> fileContents=Files.readAllLines(argFilePath,StandardCharsets.UTF_8);
  assertThat(fileContents,Matchers.<List<String>>equalTo(expectedFileContents));
  Files.deleteIfExists(argFilePath);
}
