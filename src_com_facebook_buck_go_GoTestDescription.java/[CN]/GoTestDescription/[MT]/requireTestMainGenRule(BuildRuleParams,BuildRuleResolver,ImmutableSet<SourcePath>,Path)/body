{
  Tool testMainGenerator=GoDescriptors.getTestMainGenerator(goBuckConfig,params,resolver,params.getProjectFilesystem());
  SourcePathResolver sourceResolver=new SourcePathResolver(resolver);
  GoTestMain generatedTestMain=new GoTestMain(params.copyWithChanges(BuildTarget.builder(params.getBuildTarget()).addFlavors(ImmutableFlavor.of("test-main-src")).build(),Suppliers.ofInstance(ImmutableSortedSet.copyOf(testMainGenerator.getDeps(sourceResolver))),Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of())),sourceResolver,testMainGenerator,srcs,packageName);
  resolver.addToIndex(generatedTestMain);
  return generatedTestMain;
}
