{
  BuildRule rule=resolver.requireRule(args.exe);
  if (!(rule instanceof BinaryBuildRule)) {
    throw new HumanReadableException("The 'exe' argument of %s, %s, needs to correspond to a " + "binary rule, such as sh_binary().",params.getBuildTarget(),args.exe.getFullyQualifiedName());
  }
  String expandedStartupArgs;
  try {
    expandedStartupArgs=MACRO_HANDLER.expand(params.getBuildTarget(),params.getCellRoots(),resolver,args.args.or(""));
  }
 catch (  MacroException e) {
    throw new HumanReadableException(e,"%s: %s",params.getBuildTarget(),e.getMessage());
  }
  Iterable<BuildRule> rulesReferencedInStartupArgs=resolver.requireAllRules(getTargetsFromStartupArgs(params.getBuildTarget(),params.getCellRoots(),args.args));
  return new WorkerTool(params,new SourcePathResolver(resolver),(BinaryBuildRule)rule,rulesReferencedInStartupArgs,expandedStartupArgs);
}
