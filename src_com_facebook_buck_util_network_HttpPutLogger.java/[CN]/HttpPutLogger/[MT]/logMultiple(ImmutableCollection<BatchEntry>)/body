{
  StringWriter stringWriter=new StringWriter();
  try {
    JsonGenerator jsonGenerator=objectMapper.getJsonFactory().createJsonGenerator(stringWriter);
    jsonGenerator.writeStartArray();
    for (    BatchEntry entry : data) {
      jsonGenerator.writeRawValue(entry.getLine());
    }
    jsonGenerator.writeEndArray();
    jsonGenerator.close();
    return Futures.transform(endpoint.post(stringWriter.toString()),new Function<HttpResponse,Void>(){
      @Nullable @Override public Void apply(      HttpResponse input){
        return null;
      }
    }
);
  }
 catch (  IOException e) {
    return Futures.immediateFailedFuture(e);
  }
}
