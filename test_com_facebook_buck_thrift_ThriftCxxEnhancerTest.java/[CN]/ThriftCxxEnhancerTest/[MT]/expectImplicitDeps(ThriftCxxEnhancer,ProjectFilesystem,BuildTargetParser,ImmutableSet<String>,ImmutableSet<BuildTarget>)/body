{
  BuildRuleFactoryParams params=new BuildRuleFactoryParams(ImmutableMap.of("cppOptions",ImmutableList.copyOf(options),"cpp2Options",ImmutableList.copyOf(options.toArray())),filesystem,parser,TARGET,new FakeRuleKeyBuilderFactory());
  ThriftConstructorArg arg=new ThriftConstructorArg();
  arg.cppOptions=Optional.of(options);
  arg.cpp2Options=Optional.of(options);
  assertEquals(expected,enhancer.getImplicitDepsFromParams(params));
  assertEquals(expected,enhancer.getImplicitDepsFromArg(TARGET,arg));
}
