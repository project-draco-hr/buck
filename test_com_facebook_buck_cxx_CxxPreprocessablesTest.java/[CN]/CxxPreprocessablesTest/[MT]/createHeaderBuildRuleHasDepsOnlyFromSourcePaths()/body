{
  FakeBuildRule dep=createFakeBuildRule(BuildTargetFactory.newInstance("//random:dep"));
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=new FakeBuildRuleParamsBuilder(target).setDeps(ImmutableSortedSet.<BuildRule>of(dep)).build();
  Genrule genrule=GenruleBuilder.createGenrule(BuildTargetFactory.newInstance("//:genrule")).setOut("foo/bar.o").build();
  ImmutableMap<Path,SourcePath> links=ImmutableMap.<Path,SourcePath>of(Paths.get("link1"),new TestSourcePath("hello"),Paths.get("link2"),new BuildRuleSourcePath(genrule));
  CxxHeader cxxHeader=CxxPreprocessables.createHeaderBuildRule(target,params,links);
  assertEquals(ImmutableSortedSet.<BuildRule>of(genrule),cxxHeader.getDeps());
}
