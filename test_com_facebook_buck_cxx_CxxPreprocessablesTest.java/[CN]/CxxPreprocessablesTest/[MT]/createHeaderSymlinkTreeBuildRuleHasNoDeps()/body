{
  BuildRuleResolver resolver=new BuildRuleResolver();
  FakeBuildRule dep=createFakeBuildRule(BuildTargetFactory.newInstance("//random:dep"));
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=new FakeBuildRuleParamsBuilder(target).setDeps(ImmutableSortedSet.<BuildRule>of(dep)).build();
  Path root=Paths.get("root");
  Genrule genrule=(Genrule)GenruleBuilder.newGenruleBuilder(BuildTargetFactory.newInstance("//:genrule")).setOut("foo/bar.o").build(resolver);
  ImmutableMap<Path,SourcePath> links=ImmutableMap.<Path,SourcePath>of(Paths.get("link1"),new TestSourcePath("hello"),Paths.get("link2"),new BuildRuleSourcePath(genrule));
  SymlinkTree symlinkTree=CxxPreprocessables.createHeaderSymlinkTreeBuildRule(target,params,root,links);
  assertTrue(symlinkTree.getDeps().isEmpty());
}
