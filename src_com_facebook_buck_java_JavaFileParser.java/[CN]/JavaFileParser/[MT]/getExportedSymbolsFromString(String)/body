{
  final CompilationUnit compilationUnit=makeCompilationUnitFromSource(code);
  final ImmutableSortedSet.Builder<String> symbolsBuilder=ImmutableSortedSet.naturalOrder();
  compilationUnit.accept(new ASTVisitor(){
    @Override public boolean visit(    TypeDeclaration node){
      if (node.getParent() instanceof TypeDeclarationStatement) {
        return true;
      }
      symbolsBuilder.add(getFullyQualifiedTypeName(node));
      return true;
    }
    @Override public boolean visit(    EnumDeclaration node){
      symbolsBuilder.add(getFullyQualifiedTypeName(node));
      return true;
    }
    @Override public boolean visit(    AnnotationTypeDeclaration node){
      symbolsBuilder.add(getFullyQualifiedTypeName(node));
      return true;
    }
  }
);
  return symbolsBuilder.build();
}
