{
  if (headerOnly.apply(cxxPlatform)) {
    return PythonPackageComponents.of();
  }
  if (linkage == Linkage.STATIC) {
    return PythonPackageComponents.of();
  }
  if (!isPlatformSupported(cxxPlatform)) {
    return PythonPackageComponents.of();
  }
  ImmutableMap.Builder<Path,SourcePath> libs=ImmutableMap.builder();
  String sharedLibrarySoname=CxxDescriptionEnhancer.getSharedLibrarySoname(soname,getBuildTarget(),cxxPlatform);
  BuildRule sharedLibraryBuildRule=requireBuildRule(targetGraph,cxxPlatform.getFlavor(),CxxDescriptionEnhancer.SHARED_FLAVOR);
  libs.put(Paths.get(sharedLibrarySoname),new BuildTargetSourcePath(sharedLibraryBuildRule.getBuildTarget()));
  return PythonPackageComponents.of(ImmutableMap.<Path,SourcePath>of(),ImmutableMap.<Path,SourcePath>of(),libs.build(),ImmutableSet.<SourcePath>of(),Optional.<Boolean>absent());
}
