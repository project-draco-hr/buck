{
  if (headerOnly.apply(cxxPlatform)) {
    return ImmutableMap.of();
  }
  if (linkage == Linkage.STATIC) {
    return ImmutableMap.of();
  }
  if (!isPlatformSupported(cxxPlatform)) {
    return ImmutableMap.of();
  }
  ImmutableMap.Builder<String,SourcePath> libs=ImmutableMap.builder();
  String sharedLibrarySoname=soname.or(CxxDescriptionEnhancer.getDefaultSharedLibrarySoname(getBuildTarget(),cxxPlatform));
  BuildRule sharedLibraryBuildRule=CxxDescriptionEnhancer.requireBuildRule(params,ruleResolver,cxxPlatform.getFlavor(),CxxDescriptionEnhancer.SHARED_FLAVOR);
  libs.put(sharedLibrarySoname,new BuildTargetSourcePath(sharedLibraryBuildRule.getProjectFilesystem(),sharedLibraryBuildRule.getBuildTarget()));
  return libs.build();
}
