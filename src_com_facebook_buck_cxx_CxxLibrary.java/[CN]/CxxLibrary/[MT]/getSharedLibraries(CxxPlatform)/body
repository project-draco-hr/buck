{
  ImmutableMap.Builder<String,SourcePath> libs=ImmutableMap.builder();
  if (linkage != Linkage.STATIC) {
    String sharedLibrarySoname=soname.or(CxxDescriptionEnhancer.getSharedLibrarySoname(getBuildTarget(),cxxPlatform));
    BuildRule sharedLibraryBuildRule=CxxDescriptionEnhancer.requireBuildRule(params,ruleResolver,cxxPlatform.getFlavor(),CxxDescriptionEnhancer.SHARED_FLAVOR);
    libs.put(sharedLibrarySoname,new BuildTargetSourcePath(sharedLibraryBuildRule.getProjectFilesystem(),sharedLibraryBuildRule.getBuildTarget()));
  }
  return libs.build();
}
