{
  assumeTrue(Platform.detect() != Platform.WINDOWS);
  ProjectWorkspace workspace=InferHelper.setupCxxInferWorkspace(this,tmp,Optional.<String>absent());
  BuildTarget inputBuildTarget=BuildTargetFactory.newInstance("//foo:binary_with_chain_deps");
  String inputBuildTargetName=inputBuildTarget.withFlavors(CxxInferEnhancer.InferFlavors.INFER.get()).getFullyQualifiedName();
  workspace.runBuckCommand("build",inputBuildTargetName).assertSuccess();
  String reportPath="buck-out/gen/foo/infer-binary_with_chain_deps#infer/report.json";
  List<Object> bugs=InferHelper.loadInferReport(workspace,reportPath);
  Assert.assertThat("3 bugs expected in " + reportPath + " not found",bugs.size(),Matchers.equalTo(3));
}
