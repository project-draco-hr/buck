{
  BuildRuleResolver resolver=new BuildRuleResolver();
  SourcePathResolver pathResolver=new SourcePathResolver(resolver);
  ProjectFilesystem filesystem=new FakeProjectFilesystem();
  FakeBuildRule dep=resolver.addToIndex(new FakeBuildRule(BuildTargetFactory.newInstance("//:dep"),pathResolver));
  BuildTarget target=BuildTargetFactory.newInstance("//:rule");
  JavacOptions options=JavacOptions.builder().setSourceLevel("5").setTargetLevel("5").setJavacJarPath(new BuildTargetSourcePath(filesystem,dep.getBuildTarget())).build();
  AndroidLibraryGraphEnhancer graphEnhancer=new AndroidLibraryGraphEnhancer(target,new FakeBuildRuleParamsBuilder(target).build(),options,ResourceDependencyMode.FIRST_ORDER);
  Optional<DummyRDotJava> result=graphEnhancer.getBuildableForAndroidResources(resolver,true);
  assertTrue(result.isPresent());
  assertThat(result.get().getDeps(),Matchers.<BuildRule>hasItem(dep));
}
