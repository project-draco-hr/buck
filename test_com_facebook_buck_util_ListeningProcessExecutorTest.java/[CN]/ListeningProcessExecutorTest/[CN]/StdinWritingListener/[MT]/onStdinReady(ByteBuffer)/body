{
  if (!bufferToWrite.hasRemaining()) {
    process.closeStdin(true);
    return false;
  }
  if (buffer.remaining() >= bufferToWrite.remaining()) {
    buffer.put(bufferToWrite);
  }
 else {
    ByteBuffer subBuffer=bufferToWrite.slice();
    subBuffer.limit(buffer.remaining());
    buffer.put(subBuffer);
    bufferToWrite.position(bufferToWrite.position() + subBuffer.limit());
  }
  buffer.flip();
  return true;
}
