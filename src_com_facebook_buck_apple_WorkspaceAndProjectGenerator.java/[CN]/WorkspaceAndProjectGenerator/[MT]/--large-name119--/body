{
  for (  Map.Entry<String,XcodeWorkspaceConfigDescription.Arg> schemeConfigEntry : schemeConfigs.entrySet()) {
    String schemeName=schemeConfigEntry.getKey();
    boolean isMainScheme=schemeName.equals(workspaceName);
    XcodeWorkspaceConfigDescription.Arg schemeConfigArg=schemeConfigEntry.getValue();
    Iterable<PBXTarget> orderedBuildTargets=FluentIterable.from(orderedTargetNodes.get(schemeName)).transform(targetNodeToPBXTargetTransformer).toSet();
    FluentIterable<PBXTarget> orderedBuildTestTargets=FluentIterable.from(buildForTestNodes.get(schemeName)).transform(targetNodeToPBXTargetTransformer);
    if (isMainScheme) {
      orderedBuildTestTargets=orderedBuildTestTargets.append(synthesizedCombinedTestTargets);
    }
    FluentIterable<PBXTarget> orderedRunTestTargets=FluentIterable.from(ungroupedTests.get(schemeName)).transform(targetNodeToPBXTargetTransformer);
    if (isMainScheme) {
      orderedRunTestTargets=orderedRunTestTargets.append(synthesizedCombinedTestTargets);
    }
    Optional<String> remoteRunnablePath;
    if (schemeConfigArg.isRemoteRunnable.or(false)) {
      remoteRunnablePath=Optional.of("/" + workspaceName);
    }
 else {
      remoteRunnablePath=Optional.absent();
    }
    SchemeGenerator schemeGenerator=new SchemeGenerator(projectFilesystem,schemeConfigArg.srcTarget.transform(buildTargetToPBXTargetTransformer),orderedBuildTargets,orderedBuildTestTargets,orderedRunTestTargets,schemeName,outputDirectory.resolve(workspaceName + ".xcworkspace"),remoteRunnablePath,XcodeWorkspaceConfigDescription.getActionConfigNamesFromArg(workspaceArguments),targetToProjectPathMap);
    schemeGenerator.writeScheme();
    schemeGenerators.put(schemeName,schemeGenerator);
  }
}
