{
  ImmutableMultimap.Builder<AppleTestBundleParamsKey,TargetNode<AppleTestDescription.Arg>> groupsBuilder=ImmutableMultimap.builder();
  ImmutableSet.Builder<TargetNode<AppleTestDescription.Arg>> ungroupedTestsBuilder=ImmutableSet.builder();
  for (  TargetNode<AppleTestDescription.Arg> test : tests) {
    if (groupableTests.contains(test)) {
      Preconditions.checkState(test.getConstructorArg().canGroup(),"Groupable test should actually be groupable.");
      groupsBuilder.put(AppleTestBundleParamsKey.fromAppleTestDescriptionArg(test.getConstructorArg()),test);
    }
 else {
      ungroupedTestsBuilder.add(test);
    }
  }
  return new GroupedTestResults(groupsBuilder.build(),ungroupedTestsBuilder.build());
}
