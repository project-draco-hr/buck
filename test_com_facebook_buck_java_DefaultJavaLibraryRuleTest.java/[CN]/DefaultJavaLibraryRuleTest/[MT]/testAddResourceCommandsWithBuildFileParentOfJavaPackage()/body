{
  BuildTarget buildTarget=BuildTargetFactory.newInstance("//android/java/src","resources",new File("android/java/src/BUILD"));
  ImmutableSortedSet<BuildRule> deps=ImmutableSortedSet.of();
  ImmutableSet<BuildTargetPattern> visibilityPatterns=ImmutableSet.of();
  DefaultJavaLibraryRule javaRule=new DefaultJavaLibraryRule(new CachingBuildRuleParams(buildTarget,deps,visibilityPatterns,artifactCache),ImmutableSet.<String>of(),ImmutableSet.of("android/java/src/com/facebook/base/data.json","android/java/src/com/facebook/common/util/data.json"),Optional.<String>absent(),AnnotationProcessingParams.EMPTY,false,JavacOptionsUtil.DEFAULT_SOURCE_LEVEL,JavacOptionsUtil.DEFAULT_TARGET_LEVEL);
  ImmutableList.Builder<Step> commands=ImmutableList.builder();
  JavaPackageFinder javaPackageFinder=createJavaPackageFinder();
  javaRule.addResourceCommands(commands,BIN_DIR + "/android/java/src/lib__resources__classes",javaPackageFinder);
  List<? extends Step> expected=ImmutableList.of(new MkdirAndSymlinkFileStep("android/java/src/com/facebook/base/data.json",BIN_DIR + "/android/java/src/lib__resources__classes/com/facebook/base/data.json"),new MkdirAndSymlinkFileStep("android/java/src/com/facebook/common/util/data.json",BIN_DIR + "/android/java/src/lib__resources__classes/com/facebook/common/util/data.json"));
  MoreAsserts.assertListEquals(expected,commands.build());
  EasyMock.verify(javaPackageFinder);
}
