{
  AbstractBuildRuleBuilderParams params=new FakeAbstractBuildRuleBuilderParams();
  BuildRuleResolver ruleResolver=new BuildRuleResolver();
  BuildTarget genruleBuildTarget=BuildTargetFactory.newInstance("//generated:stuff");
  Genrule.newGenruleBuilder(params).setBuildTarget(genruleBuildTarget).setCmd("echo 'aha' > $OUT").setOut("stuff.txt").build(ruleResolver);
  DefaultJavaLibraryRule javaRule=DefaultJavaLibraryRule.newJavaLibraryRuleBuilder(params).setBuildTarget(BuildTargetFactory.newInstance("//library:code")).addResource(new BuildTargetSourcePath(genruleBuildTarget)).addResource(new FileSourcePath("library/data.txt")).build(ruleResolver);
  assertEquals("Generated files should not be included in getInputsToCompareToOutput() because they " + "should not be part of the RuleKey computation.",ImmutableList.of("library/data.txt"),javaRule.getInputsToCompareToOutput());
}
