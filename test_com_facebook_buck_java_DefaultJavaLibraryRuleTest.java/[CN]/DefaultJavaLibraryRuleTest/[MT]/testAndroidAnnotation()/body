{
  BuildRuleResolver ruleResolver=new BuildRuleResolver();
  BuildTarget processorTarget=BuildTargetFactory.newInstance("//java/processor:processor");
  ruleResolver.buildAndAddToIndex(DefaultJavaLibraryRule.newJavaLibraryRuleBuilder(new FakeAbstractBuildRuleBuilderParams()).setBuildTarget(processorTarget).addSrc(Paths.get("java/processor/processor.java")));
  BuildTarget libTarget=BuildTargetFactory.newInstance("//java/lib:lib");
  AndroidLibraryRule.Builder builder=AndroidLibraryRule.newAndroidLibraryRuleBuilder(new FakeAbstractBuildRuleBuilderParams()).setBuildTarget(libTarget);
  builder.getAnnotationProcessingBuilder().addAllProcessors(ImmutableList.of("MyProcessor")).addProcessorBuildTarget(processorTarget);
  AndroidLibraryRule rule=(AndroidLibraryRule)ruleResolver.buildAndAddToIndex(builder);
  AnnotationProcessingData processingData=rule.getAnnotationProcessingData();
  assertNotNull(processingData.getGeneratedSourceFolderName());
}
