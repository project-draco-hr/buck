{
  String path=Paths.get("/path/to/sdk").toAbsolutePath().toString();
  Optional<Properties> properties=Optional.absent();
  ImmutableMap<String,String> systemEnvironment=ImmutableMap.of("ANDROID_SDK",path);
  HostFilesystem hostFilesystem=FakeHostFilesystem.empty();
  thrown.expect(RuntimeException.class);
  thrown.expectMessage(String.format("Environment variable ANDROID_SDK points to invalid path [%s].",path));
  DefaultPropertyFinder.findDirectoryByPropertiesThenEnvironmentVariable(properties,hostFilesystem,systemEnvironment,"sdk.dir","ANDROID_SDK");
}
