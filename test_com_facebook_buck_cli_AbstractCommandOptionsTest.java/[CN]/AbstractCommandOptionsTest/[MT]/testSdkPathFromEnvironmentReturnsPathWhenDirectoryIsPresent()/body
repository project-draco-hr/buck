{
  Optional<Properties> properties=Optional.absent();
  ImmutableMap<String,String> systemEnvironment=ImmutableMap.of("ANDROID_SDK","/path/to/sdk");
  HostFilesystem hostFilesystem=FakeHostFilesystem.withDirectories("/path/to/sdk");
  Optional<File> path=AbstractCommandOptions.findDirectoryByPropertiesThenEnvironmentVariable(properties,hostFilesystem,systemEnvironment,"sdk.dir","ANDROID_SDK");
  assertEquals(new File("/path/to/sdk"),path.get());
}
