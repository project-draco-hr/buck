{
  Optional<Properties> properties=Optional.absent();
  ImmutableMap<String,String> systemEnvironment=ImmutableMap.of("ANDROID_SDK","/path/to/sdk");
  HostFilesystem hostFilesystem=FakeHostFilesystem.empty();
  thrown.expect(RuntimeException.class);
  thrown.expectMessage("Environment variable ANDROID_SDK points to invalid path [/path/to/sdk].");
  AbstractCommandOptions.findDirectoryByPropertiesThenEnvironmentVariable(properties,hostFilesystem,systemEnvironment,"sdk.dir","ANDROID_SDK");
}
