{
  ImmutableList.Builder<String> args=ImmutableList.builder();
  args.add("java");
  args.add("-Xmx1024M");
  args.add("-classpath",JUnitStep.PATH_TO_EMMA_JAR);
  args.add("emma","report");
  args.add(String.format("-D%s=%s",REPORT_OUTPUT_DIR,outputDirectory));
  for (  String reportFormat : CODE_COVERAGE_OUTPUT_FORMAT) {
    args.add("-report",reportFormat);
  }
  args.add("-input",String.format("%s/coverage.ec,%s/coverage.em",JUnitStep.EMMA_OUTPUT_DIR,JUnitStep.EMMA_OUTPUT_DIR));
  String sourcepathArg=Joiner.on(",").join(srcDirectories);
  args.add("-sourcepath").add(sourcepathArg);
  return args.build();
}
