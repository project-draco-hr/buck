{
  ArtifactCacheBuckConfig cacheConfig=ArtifactCacheBuckConfigTest.createFromText("[cache]","mode = dir");
  ProjectFilesystem projectFilesystem=new FakeProjectFilesystem();
  BuckEventBus buckEventBus=BuckEventBusFactory.newInstance();
  ArtifactCache artifactCache=ArtifactCaches.newInstance(cacheConfig,buckEventBus,projectFilesystem,Optional.<String>absent());
  assertThat(artifactCache,Matchers.instanceOf(LoggingArtifactCacheDecorator.class));
  LoggingArtifactCacheDecorator cacheDecorator=(LoggingArtifactCacheDecorator)artifactCache;
  assertThat(cacheDecorator.getDelegate(),Matchers.instanceOf(DirArtifactCache.class));
}
