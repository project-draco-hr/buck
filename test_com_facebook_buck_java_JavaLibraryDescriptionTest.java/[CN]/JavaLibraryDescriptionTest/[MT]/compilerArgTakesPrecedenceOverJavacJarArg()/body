{
  ProjectFilesystem filesystem=new FakeProjectFilesystem();
  Path javacJarPath=Paths.get("langtools").resolve("javac.jar");
  BuildTarget target=BuildTargetFactory.newInstance("//langtools:javac");
  PrebuiltJarBuilder.createBuilder(target).setBinaryJar(javacJarPath).build(ruleResolver);
  SourcePath sourcePath=new BuildTargetSourcePath(filesystem,target);
  Either<BuiltInJavac,SourcePath> either=Either.ofRight(sourcePath);
  arg.compiler=Optional.of(either);
  arg.javacJar=Optional.<SourcePath>of(new PathSourcePath(new FakeProjectFilesystem(),Paths.get("does-not-exist")));
  JavacOptions options=JavaLibraryDescription.getJavacOptions(resolver,arg,defaults).build();
  Javac javac=options.getJavac();
  assertEquals(Optional.of(sourcePath),options.getJavacJarPath());
  assertEquals(Optional.<Path>absent(),options.getJavacPath());
  assertTrue(javac.getClass().getName(),javac instanceof Jsr199Javac);
}
