{
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  BuildRule dep=new FakeBuildRule(BuildRuleParamsFactory.createTrivialBuildRuleParams(BuildTargetFactory.newInstance("//:fake")),pathResolver);
  BuildTarget target=BuildTargetFactory.newInstance("//:archive");
  BuildRuleParams params=new FakeBuildRuleParamsBuilder(BuildTargetFactory.newInstance("//:dummy")).setDeps(ImmutableSortedSet.of(dep)).build();
  Archive archive=Archives.createArchiveRule(pathResolver,target,params,DEFAULT_ARCHIVER,DEFAULT_EXPECTED_GLOBAL_HEADER,DEFAULT_OUTPUT,DEFAULT_INPUTS);
  assertEquals(archive.getDeps(),ImmutableSortedSet.<BuildRule>of());
}
