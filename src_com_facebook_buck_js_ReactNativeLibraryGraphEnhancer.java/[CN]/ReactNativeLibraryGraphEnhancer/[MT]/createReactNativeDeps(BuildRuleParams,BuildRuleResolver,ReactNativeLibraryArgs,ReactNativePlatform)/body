{
  BuildTarget originalBuildTarget=params.getBuildTarget();
  SourcePathResolver sourcePathResolver=new SourcePathResolver(resolver);
  BuildTarget depsFinderTarget=BuildTarget.builder(originalBuildTarget).addFlavors(REACT_NATIVE_DEPS_FLAVOR).build();
  BuildRuleParams paramsForDepsFinder=params.copyWithBuildTarget(depsFinderTarget).appendExtraDeps(resolver.getAllRules(SourcePaths.filterBuildTargetSourcePaths(Collections.singleton(buckConfig.getPackager()))));
  ReactNativeDeps depsFinder=new ReactNativeDeps(paramsForDepsFinder,sourcePathResolver,buckConfig.getPackager(),args.srcs.get(),args.entryPath,platform);
  return resolver.addToIndex(depsFinder);
}
