{
  return new Function<TargetNode<?>,Path>(){
    @Nullable @Override public Path apply(    TargetNode<?> input){
      TargetGraphToActionGraph targetGraphToActionGraph=new TargetGraphToActionGraph(BuckEventBusFactory.newInstance(),new BuildTargetNodeToBuildRuleTransformer());
      TargetGraph subgraph=targetGraph.getSubgraph(ImmutableSet.of(input));
      ActionGraph actionGraph=Preconditions.checkNotNull(targetGraphToActionGraph.apply(subgraph)).getFirst();
      BuildRule rule=Preconditions.checkNotNull(actionGraph.findBuildRuleByTarget(input.getBuildTarget()));
      return rule.getPathToOutput();
    }
  }
;
}
