{
  final MissingSymbolsHandler missingSymbolsHandler=create(projectFilesystem,descriptions,config,buckEventBus,console,javacOptions,environment);
  final Multimap<BuildId,MissingSymbolEvent> missingSymbolEvents=HashMultimap.create();
  BuckEventListener missingSymbolsListener=new BuckEventListener(){
    @Override public void outputTrace(    BuildId buildId){
    }
    @Subscribe public void onMissingSymbol(    MissingSymbolEvent event){
      missingSymbolEvents.put(event.getBuildId(),event);
    }
    @Subscribe public void onBuildFinished(    BuildEvent.Finished event){
      if (missingSymbolEvents.get(event.getBuildId()).isEmpty()) {
        return;
      }
      try {
        missingSymbolsHandler.printNeededDependencies(missingSymbolEvents.get(event.getBuildId()));
      }
 catch (      InterruptedException e) {
        LOG.error(e,"Missing symbols handler did not complete in time.");
      }
      missingSymbolEvents.removeAll(event.getBuildId());
    }
  }
;
  return missingSymbolsListener;
}
