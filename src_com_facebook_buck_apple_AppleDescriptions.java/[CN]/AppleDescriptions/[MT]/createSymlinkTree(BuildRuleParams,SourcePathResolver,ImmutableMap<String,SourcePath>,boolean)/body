{
  ImmutableMap<Path,SourcePath> headersToCopy;
  if (useBuckHeaderMaps) {
    headersToCopy=ImmutableMap.of();
  }
 else {
    ImmutableMap.Builder<Path,SourcePath> headersToCopyBuilder=ImmutableMap.builder();
    for (    Map.Entry<String,SourcePath> entry : publicHeaders.entrySet()) {
      headersToCopyBuilder.put(Paths.get(entry.getKey()),entry.getValue());
    }
    headersToCopy=headersToCopyBuilder.build();
  }
  BuildRuleParams headerParams=params.copyWithDeps(Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of()),Suppliers.ofInstance(params.getExtraDeps()));
  Path root=getPathToHeaders(params.getBuildTarget());
  return new SymlinkTree(headerParams,pathResolver,root,headersToCopy);
}
