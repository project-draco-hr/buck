{
  UnflavoredBuildTarget targetForOriginalRule=params.getBuildTarget().getUnflavoredBuildTarget();
  BuildTarget headersTarget=BuildTargets.createFlavoredBuildTarget(targetForOriginalRule,AppleDescriptions.HEADERS);
  BuildRuleParams headerRuleParams=params.copyWithChanges(HEADERS_RULE_TYPE,headersTarget,Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of()),Suppliers.ofInstance(params.getExtraDeps()));
  boolean useBuckHeaderMaps=args.useBuckHeaderMaps.or(Boolean.FALSE);
  Path headerPathPrefix=AppleDescriptions.getHeaderPathPrefix(args,params.getBuildTarget());
  ImmutableMap<String,SourcePath> publicHeaders=convertAppleHeadersToPublicCxxHeaders(resolver,headerPathPrefix,args);
  return createSymlinkTree(headerRuleParams,resolver,publicHeaders,useBuckHeaderMaps);
}
