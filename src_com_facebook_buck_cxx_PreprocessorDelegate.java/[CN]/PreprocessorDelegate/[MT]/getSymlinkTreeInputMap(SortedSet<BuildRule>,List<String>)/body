{
  ImmutableMultimap.Builder<String,String> fullHeaderMapBuilder=ImmutableMultimap.builder();
  for (  HeaderSymlinkTree headerSymlinkTree : Iterables.filter(deps,HeaderSymlinkTree.class)) {
    for (    Map.Entry<Path,Path> entry : Maps.transformValues(headerSymlinkTree.getFullLinks(),resolver.deprecatedPathFunction()).entrySet()) {
      fullHeaderMapBuilder.put(entry.getValue().toString(),entry.getKey().toString());
    }
  }
  ImmutableMultimap<String,String> fullHeaderMap=fullHeaderMapBuilder.build();
  ImmutableMultimap.Builder<String,String> headerMap=ImmutableMultimap.builder();
  for (  String input : depFileLines) {
    if (!fullHeaderMap.containsKey(input)) {
      return Optional.absent();
    }
    headerMap.putAll(input,fullHeaderMap.get(input));
  }
  return Optional.of(headerMap.build());
}
