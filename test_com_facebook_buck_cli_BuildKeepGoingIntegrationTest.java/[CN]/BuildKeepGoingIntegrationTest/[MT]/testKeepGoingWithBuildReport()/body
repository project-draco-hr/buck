{
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"keep_going",tmp).setUp();
  File buildReport=new File(tmpFolderForBuildReport.getRoot(),"build-report.txt");
  workspace.runBuckBuild("--build-report",buildReport.getAbsolutePath(),"--keep-going","//:rule_with_output","//:failing_rule").assertFailure();
  assertTrue(buildReport.exists());
  String buildReportContents=com.google.common.io.Files.toString(buildReport,Charsets.UTF_8);
  String expectedReport=Joiner.on('\n').join("{","  \"results\" : {","    \"//:rule_with_output\" : {","      \"success\" : true,","      \"type\" : \"BUILT_LOCALLY\",","      \"output\" : \"buck-out/gen/rule_with_output.txt\"","    },","    \"//:failing_rule\" : {","      \"success\" : false","    }","  }","}");
  assertEquals(expectedReport,buildReportContents);
}
