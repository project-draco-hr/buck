{
  String name;
  if (rule instanceof PrebuiltJar) {
    PrebuiltJar prebuiltJar=(PrebuiltJar)rule;
    Path absolutePath=resolver.getAbsolutePath(prebuiltJar.getBinaryJar());
    String binaryJar=projectFilesystem.getRootPath().relativize(absolutePath).toString();
    return getIntellijNameForBinaryJar(binaryJar);
  }
 else {
    Path basePath=rule.getBuildTarget().getBasePath();
    if (basePathToAliasMap != null && basePathToAliasMap.containsKey(basePath)) {
      name=Preconditions.checkNotNull(basePathToAliasMap.get(basePath));
    }
 else {
      name=rule.getBuildTarget().getBasePath().toString();
      name=name.replace('/','_');
      name="module_" + name;
    }
    return normalizeIntelliJName(name);
  }
}
