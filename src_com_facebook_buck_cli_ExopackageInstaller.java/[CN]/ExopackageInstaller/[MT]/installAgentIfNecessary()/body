{
  Optional<PackageInfo> agentInfo=getPackageInfo(AgentUtil.AGENT_PACKAGE_NAME);
  if (!agentInfo.isPresent()) {
    logFine("Agent not installed.  Installing.");
    return installAgentApk();
  }
  logFine("Agent version: %s",agentInfo.get().versionCode);
  if (!agentInfo.get().versionCode.equals(AgentUtil.AGENT_VERSION_CODE)) {
    return installAgentApk();
  }
  return agentInfo;
}
