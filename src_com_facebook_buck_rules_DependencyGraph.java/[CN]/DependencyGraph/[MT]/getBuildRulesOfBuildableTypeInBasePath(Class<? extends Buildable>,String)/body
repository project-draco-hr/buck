{
  ImmutableList.Builder<BuildRule> result=ImmutableList.builder();
  for (  BuildRule rule : getNodes()) {
    if (rule.getBuildTarget().getBasePath().equals(basePath) && klass.isInstance(rule.getBuildable())) {
      result.add(rule);
    }
  }
  return result.build();
}
