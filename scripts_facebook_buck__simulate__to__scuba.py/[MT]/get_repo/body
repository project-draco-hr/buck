def get_repo(path):
    path = os.path.realpath(path)
    git_path = os.path.join(path, u'.git')
    if os.path.isdir(git_path):
        return GitRepository(path)
    else:
        return HgRepository(path)
