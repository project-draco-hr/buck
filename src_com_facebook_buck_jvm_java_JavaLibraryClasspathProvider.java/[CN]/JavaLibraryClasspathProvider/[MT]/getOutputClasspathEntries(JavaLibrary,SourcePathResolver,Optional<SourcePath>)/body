{
  ImmutableSetMultimap.Builder<JavaLibrary,Path> outputClasspathBuilder=ImmutableSetMultimap.builder();
  Iterable<JavaLibrary> javaExportedLibraryDeps;
  if (javaLibraryRule instanceof ExportDependencies) {
    javaExportedLibraryDeps=getJavaLibraryDeps(((ExportDependencies)javaLibraryRule).getExportedDeps());
  }
 else {
    javaExportedLibraryDeps=Sets.newHashSet();
  }
  for (  JavaLibrary rule : javaExportedLibraryDeps) {
    outputClasspathBuilder.putAll(rule,rule.getOutputClasspathEntries().values());
    outputClasspathBuilder.putAll(javaLibraryRule,rule.getOutputClasspathEntries().values());
  }
  if (outputJar.isPresent()) {
    outputClasspathBuilder.put(javaLibraryRule,resolver.getAbsolutePath(outputJar.get()));
  }
  return outputClasspathBuilder.build();
}
