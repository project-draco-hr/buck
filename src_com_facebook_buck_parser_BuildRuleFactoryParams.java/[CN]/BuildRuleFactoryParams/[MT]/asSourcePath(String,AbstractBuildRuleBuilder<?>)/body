{
  if (resource.startsWith(BuildTarget.BUILD_TARGET_PREFIX) || resource.charAt(0) == ':') {
    BuildTarget buildTarget;
    try {
      buildTarget=resolveBuildTarget(resource);
    }
 catch (    NoSuchBuildTargetException e) {
      throw new HumanReadableException("Unable to find build target '%s' while parsing definition of %s",resource,target);
    }
    builder.addDep(buildTarget);
    return new BuildTargetSourcePath(buildTarget);
  }
 else {
    String relativePath=resolveFilePathRelativeToBuildFileDirectory(resource);
    return new FileSourcePath(relativePath);
  }
}
