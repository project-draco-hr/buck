{
  if (resource.startsWith(BuildTarget.BUILD_TARGET_PREFIX) || resource.charAt(0) == ':') {
    try {
      BuildTarget buildTarget=buildTargetParser.parse(resource,sourcePathContext);
      return new BuildTargetSourcePath(buildTarget);
    }
 catch (    NoSuchBuildTargetException e) {
      throw new HumanReadableException("Unable to find build target '%s' while parsing definition of %s",resource,target);
    }
  }
 else {
    String relativePath=resolveFilePathRelativeToBuildFileDirectory(resource);
    return new FileSourcePath(relativePath);
  }
}
