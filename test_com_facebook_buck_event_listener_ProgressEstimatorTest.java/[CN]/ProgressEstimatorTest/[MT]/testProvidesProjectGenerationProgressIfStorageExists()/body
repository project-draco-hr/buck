{
  Path storagePath=getStorageForTest();
  Map<String,Object> storageContents=ImmutableSortedMap.<String,Object>naturalOrder().put("project arg1 arg2",ImmutableSortedMap.<String,Number>naturalOrder().put(ProgressEstimator.EXPECTED_NUMBER_OF_GENERATED_PROJECT_FILES,10).build()).build();
  String contents=new ObjectMapper().writeValueAsString(storageContents);
  Files.createDirectories(storagePath.getParent());
  Files.write(storagePath,contents.getBytes());
  ProgressEstimator estimator=new ProgressEstimator(storagePath.getParent().getParent(),getBuckEventBus());
  estimator.setCurrentCommand("project",ImmutableList.<String>of("arg1","arg2"));
  estimator.didGenerateProjectForTarget();
  estimator.didGenerateProjectForTarget();
  assertThat(estimator.getEstimatedProgressOfGeneratingProjectFiles().get().doubleValue(),Matchers.closeTo(0.2,0.01));
}
