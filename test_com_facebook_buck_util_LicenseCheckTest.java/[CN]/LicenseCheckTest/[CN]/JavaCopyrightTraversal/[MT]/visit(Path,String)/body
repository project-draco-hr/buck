{
  if (!"java".equals(MorePaths.getFileExtension(file)) || !Files.exists(file) || NON_APACHE_LICENSE_WHITELIST.contains(relativePath)|| relativePath.startsWith(NON_APACHE_LICENSE_WHITELIST_DIR)) {
    return;
  }
  if (ignoreTestData) {
    for (    Path path : file) {
      if (TEST_DATA.equals(path)) {
        return;
      }
    }
  }
  try {
    String asString=new String(Files.readAllBytes(file),StandardCharsets.UTF_8);
    assertTrue("Check license of: " + relativePath,LICENSE_FRAGMENT.matcher(asString).matches());
  }
 catch (  IOException e) {
    fail("Unable to read: " + relativePath);
  }
}
