{
  InstallCommandOptions options=getOptions(TargetDeviceOptions.DEVICE_MODE_LONG_ARG);
  IDevice[] devices=new IDevice[]{createRealDevice("1",IDevice.DeviceState.ONLINE),createEmulator("2",IDevice.DeviceState.ONLINE)};
  List<IDevice> filteredDevices=installCommand.filterDevices(devices,options.adbOptions(),options.targetDeviceOptions());
  assertNotNull(filteredDevices);
  assertEquals(1,filteredDevices.size());
  assertSame(devices[0],filteredDevices.get(0));
}
