{
  ProjectFilesystem filesystem=new AllExistingProjectFilesystem();
  PrebuiltCxxLibraryBuilder prebuiltCxxLibraryBuilder=new PrebuiltCxxLibraryBuilder(BuildTargetFactory.newInstance("//:rule")).setSoname("libsoname.so");
  BuildRuleResolver resolver=new BuildRuleResolver(TargetGraphFactory.newInstance(prebuiltCxxLibraryBuilder.build()),new BuildTargetNodeToBuildRuleTransformer());
  PrebuiltCxxLibrary rule=(PrebuiltCxxLibrary)prebuiltCxxLibraryBuilder.build(resolver,filesystem);
  assertThat(rule.getSharedNativeLinkTarget(CXX_PLATFORM).get().getSharedNativeLinkTargetLibraryName(CXX_PLATFORM),Matchers.equalTo(Optional.of("libsoname.so")));
}
