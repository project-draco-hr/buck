{
  BuildRuleResolver resolver=new BuildRuleResolver();
  PrebuiltCxxLibraryDescription.Arg arg=getDefaultArg();
  ProjectFilesystem filesystem=new FakeProjectFilesystem();
  BuildRuleParams params=new FakeBuildRuleParamsBuilder(TARGET).setProjectFilesystem(filesystem).setTargetGraph(TargetGraphFactory.newInstance(createTargetNode(TARGET,DESC,arg))).build();
  PrebuiltCxxLibrary lib=(PrebuiltCxxLibrary)DESC.createBuildRule(params,resolver,arg);
  NativeLinkableInput nativeLinkableInput=lib.getNativeLinkableInput(CXX_PLATFORM.getLd(),NativeLinkable.Type.SHARED);
  SourcePath input=nativeLinkableInput.getInputs().get(0);
  assertTrue(input instanceof BuildTargetSourcePath);
  assertTrue(new SourcePathResolver(resolver).getRule(input).get() instanceof CxxLink);
}
