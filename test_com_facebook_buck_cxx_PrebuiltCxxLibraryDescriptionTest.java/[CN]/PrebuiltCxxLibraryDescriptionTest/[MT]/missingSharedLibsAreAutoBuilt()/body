{
  BuildRuleResolver resolver=new BuildRuleResolver();
  ProjectFilesystem filesystem=new FakeProjectFilesystem();
  PrebuiltCxxLibraryBuilder libBuilder=new PrebuiltCxxLibraryBuilder(TARGET);
  PrebuiltCxxLibrary lib=(PrebuiltCxxLibrary)libBuilder.build(resolver,filesystem,TargetGraphFactory.newInstance(libBuilder.build()));
  NativeLinkableInput nativeLinkableInput=lib.getNativeLinkableInput(CXX_PLATFORM,Linker.LinkableDepType.SHARED);
  SourcePath input=nativeLinkableInput.getInputs().get(0);
  assertTrue(input instanceof BuildTargetSourcePath);
  assertTrue(new SourcePathResolver(resolver).getRule(input).get() instanceof CxxLink);
}
