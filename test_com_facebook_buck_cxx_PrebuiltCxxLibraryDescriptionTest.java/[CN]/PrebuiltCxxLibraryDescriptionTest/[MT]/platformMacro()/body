{
  Optional<String> libDir=Optional.of("libs/$(platform)");
  Optional<String> libName=Optional.of("test-$(platform)");
  Optional<String> soname=Optional.absent();
  BuildRuleResolver resolver=new BuildRuleResolver(TargetGraph.EMPTY,new BuildTargetNodeToBuildRuleTransformer());
  ProjectFilesystem filesystem=new AllExistingProjectFilesystem();
  Function<Optional<String>,Path> cellRoots=TestCellBuilder.createCellRoots(filesystem);
  CxxPlatform platform1=CxxPlatformUtils.DEFAULT_PLATFORM.withFlavor(ImmutableFlavor.of("PLATFORM1"));
  CxxPlatform platform2=CxxPlatformUtils.DEFAULT_PLATFORM.withFlavor(ImmutableFlavor.of("PLATFORM2"));
  assertEquals(String.format("libtest-PLATFORM1.%s",platform1.getSharedLibraryExtension()),PrebuiltCxxLibraryDescription.getSoname(TARGET,cellRoots,resolver,platform1,soname,libName));
  assertEquals(String.format("libtest-PLATFORM2.%s",platform2.getSharedLibraryExtension()),PrebuiltCxxLibraryDescription.getSoname(TARGET,cellRoots,resolver,platform2,soname,libName));
  assertEquals(TARGET.getBasePath().resolve(String.format("libs/PLATFORM1/libtest-PLATFORM1.%s",platform1.getSharedLibraryExtension())),PrebuiltCxxLibraryDescription.getSharedLibraryPath(TARGET,cellRoots,resolver,platform1,libDir,libName));
  assertEquals(TARGET.getBasePath().resolve("libs/PLATFORM1/libtest-PLATFORM1.a"),PrebuiltCxxLibraryDescription.getStaticLibraryPath(TARGET,cellRoots,resolver,platform1,libDir,libName));
  assertEquals(TARGET.getBasePath().resolve(String.format("libs/PLATFORM2/libtest-PLATFORM2.%s",platform2.getSharedLibraryExtension())),PrebuiltCxxLibraryDescription.getSharedLibraryPath(TARGET,cellRoots,resolver,platform2,libDir,libName));
  assertEquals(TARGET.getBasePath().resolve("libs/PLATFORM2/libtest-PLATFORM2.a"),PrebuiltCxxLibraryDescription.getStaticLibraryPath(TARGET,cellRoots,resolver,platform2,libDir,libName));
}
