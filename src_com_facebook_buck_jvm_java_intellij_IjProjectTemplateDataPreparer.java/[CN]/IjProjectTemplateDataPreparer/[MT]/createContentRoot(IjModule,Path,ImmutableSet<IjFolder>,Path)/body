{
  String url=toModuleDirRelativeString(contentRootPath,moduleLocationBasePath);
  ImmutableSet<IjFolder> simplifiedFolders=sourceRootSimplifier.simplify(SimplificationLimit.of(contentRootPath.getNameCount()),folders);
  ImmutableSortedSet<IjSourceFolder> sourceFolders=FluentIterable.from(simplifiedFolders).transform(new Function<IjFolder,IjSourceFolder>(){
    @Override public IjSourceFolder apply(    IjFolder input){
      String packagePrefix;
      if (module.getAndroidFacet().isPresent() && module.getAndroidFacet().get().getPackageName().isPresent()) {
        packagePrefix=module.getAndroidFacet().get().getPackageName().get();
      }
 else {
        packagePrefix=getPackagePrefix(input);
      }
      return createSourceFolder(input,moduleLocationBasePath,packagePrefix);
    }
  }
).toSortedSet(Ordering.natural());
  return ContentRoot.builder().setUrl(url).setFolders(sourceFolders).build();
}
