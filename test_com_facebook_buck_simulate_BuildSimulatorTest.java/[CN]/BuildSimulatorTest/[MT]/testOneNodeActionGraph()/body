{
  SimulateTimes times=SimulateTimes.createEmpty(DEFAULT_MILLIS);
  TargetGraph oneNodeGraph=createOneNodeGraph();
  ActionGraphAndResolver result=Preconditions.checkNotNull(ActionGraphCache.getFreshActionGraph(eventBus,oneNodeGraph));
  BuildSimulator sim=newBuildSimulator(times,result);
  SimulateReport report=sim.simulateBuild(0,ImmutableList.of(ROOT_NODE));
  Assert.assertEquals(1,report.getRunReports().size());
  SingleRunReport runReport=report.getRunReports().get(0);
  Assert.assertEquals(1,runReport.getActionGraphNodesWithoutSimulateTime());
  Assert.assertEquals(times.getRuleFallbackTimeMillis(),runReport.getBuildDurationMillis());
}
