{
  SimulateTimes times=SimulateTimesTest.createDefaultTestInstance();
  TargetGraph oneNodeGraph=createOneNodeGraph();
  TargetGraphTransformer transformer=new TargetGraphToActionGraph(eventBus,new DefaultTargetNodeToBuildRuleTransformer());
  Pair<ActionGraph,BuildRuleResolver> result=Preconditions.checkNotNull(transformer.apply(oneNodeGraph));
  BuildSimulator sim=new BuildSimulator(times,result.getFirst(),result.getSecond(),NUMBER_OF_THREADS);
  SimulateReport report=sim.simulateBuild(System.currentTimeMillis(),ImmutableList.of(ROOT_NODE));
  Assert.assertEquals(times.getTimeAggregates().size(),report.getRunReports().size());
}
