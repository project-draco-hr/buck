{
  File a=createMock(File.class);
  expect(a.lastModified()).andStubReturn(1000L);
  expect(a.getName()).andStubReturn("build.a.trace");
  File b=createMock(File.class);
  expect(b.lastModified()).andStubReturn(4000L);
  expect(b.getName()).andStubReturn("build.b.trace");
  File c=createMock(File.class);
  expect(c.lastModified()).andStubReturn(2000L);
  expect(c.getName()).andStubReturn("build.c.trace");
  File d=createMock(File.class);
  expect(d.lastModified()).andStubReturn(3000L);
  expect(d.getName()).andStubReturn("build.d.trace");
  TracesHelper tracesHelper=createMock(TracesHelper.class);
  expect(tracesHelper.getTraceAttributesFor(a)).andReturn(new TraceAttributes(Optional.of("buck build buck"),1000L));
  expect(tracesHelper.getTraceAttributesFor(b)).andReturn(new TraceAttributes(Optional.of("buck test --all --code-coverage"),4000L));
  expect(tracesHelper.getTraceAttributesFor(c)).andReturn(new TraceAttributes(Optional.<String>absent(),2000L));
  expect(tracesHelper.getTraceAttributesFor(d)).andReturn(new TraceAttributes(Optional.of("buck test --all --code-coverage"),3000L));
  expect(tracesHelper.listTraceFiles()).andReturn(new File[]{a,b,c,d});
  Request baseRequest=createMock(Request.class);
  replayAll();
  TracesHandlerDelegate delegate=new TracesHandlerDelegate(tracesHelper);
  TemplateHandler tracesHandler=new TemplateHandler(delegate);
  String html=tracesHandler.createHtmlForResponse(baseRequest);
  int indexB=html.indexOf("<a href=\"/trace/b\" target=\"_blank\">build.b.trace</a>");
  assertTrue(indexB > 0);
  int indexD=html.indexOf("<a href=\"/trace/d\" target=\"_blank\">build.d.trace</a>");
  assertTrue(indexD > indexB);
  int indexC=html.indexOf("<a href=\"/trace/c\" target=\"_blank\">build.c.trace</a>");
  assertTrue(indexC > indexD);
  int indexA=html.indexOf("<a href=\"/trace/a\" target=\"_blank\">build.a.trace</a>");
  assertTrue(indexA > indexC);
  verifyAll();
}
