{
  ProjectFilesystem projectFilesystem=context.getProjectFilesystem();
  KeystoreProperties keystoreProperties=KeystoreProperties.createFromPropertiesFile(pathToKeystore,pathToKeystorePropertiesFile,projectFilesystem);
  KeyStore keystore=KeyStore.getInstance(JARSIGNER_KEY_STORE_TYPE);
  InputStream inputStream=projectFilesystem.getInputSupplierForRelativePath(pathToKeystore).getInput();
  char[] keystorePassword=keystoreProperties.getStorepass().toCharArray();
  keystore.load(inputStream,keystorePassword);
  String alias=keystoreProperties.getAlias();
  char[] keyPassword=keystoreProperties.getKeypass().toCharArray();
  Key key=keystore.getKey(alias,keyPassword);
  Certificate certificate=keystore.getCertificate(alias);
  return new PrivateKeyAndCertificate((PrivateKey)key,(X509Certificate)certificate);
}
