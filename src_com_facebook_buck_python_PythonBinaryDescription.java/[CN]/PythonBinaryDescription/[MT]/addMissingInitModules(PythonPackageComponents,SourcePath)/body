{
  Map<Path,SourcePath> initModules=Maps.newLinkedHashMap();
  Set<Path> packages=Sets.newHashSet();
  for (  Path module : components.getModules().keySet()) {
    Path pkg=module;
    while ((pkg=pkg.getParent()) != null && !packages.contains(pkg)) {
      Path init=pkg.resolve("__init__.py");
      if (!components.getModules().containsKey(init)) {
        initModules.put(init,emptyInit);
      }
      packages.add(pkg);
    }
  }
  return components.withModules(ImmutableMap.<Path,SourcePath>builder().putAll(components.getModules()).putAll(initModules).build());
}
