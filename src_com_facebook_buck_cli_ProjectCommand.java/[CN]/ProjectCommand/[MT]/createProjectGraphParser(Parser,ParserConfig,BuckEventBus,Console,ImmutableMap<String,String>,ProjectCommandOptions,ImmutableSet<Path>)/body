{
  return new ProjectGraphParser(){
    @Override public TargetGraph buildTargetGraphForBuildTargets(    Collection<BuildTarget> passedInTargets) throws IOException, InterruptedException {
      try {
        ImmutableList.Builder<TargetNodeSpec> specsBuilder=ImmutableList.builder();
        if (options.getIde() == ProjectCommandOptions.Ide.XCODE && !passedInTargets.isEmpty()) {
          specsBuilder.addAll(Iterables.transform(passedInTargets,BuildTargetSpec.TO_BUILD_TARGET_SPEC));
        }
 else {
          specsBuilder.add(new TargetNodePredicateSpec(Predicates.<TargetNode<?>>alwaysTrue(),ignoreDirs));
        }
        return parser.buildTargetGraphForTargetNodeSpecs(specsBuilder.build(),parserConfig,buckEventBus,console,environment,options.getEnableProfiling());
      }
 catch (      BuildTargetException|BuildFileParseException e) {
        throw new HumanReadableException(e);
      }
    }
  }
;
}
