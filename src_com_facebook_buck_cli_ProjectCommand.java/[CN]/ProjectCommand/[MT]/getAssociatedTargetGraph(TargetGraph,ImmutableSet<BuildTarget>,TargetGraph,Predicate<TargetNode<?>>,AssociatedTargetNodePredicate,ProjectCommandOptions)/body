{
  ImmutableSet<BuildTarget> candidateTargets=filterTargetsFromGraph(fullGraph,predicate);
  TargetGraph candidateGraph=getParser().buildTargetGraphForBuildTargets(candidateTargets,options.getDefaultIncludes(),getBuckEventBus(),console,environment,options.getEnableProfiling());
  ImmutableSet.Builder<BuildTarget> rootsBuilder=ImmutableSet.builder();
  rootsBuilder.addAll(additionalRoots);
  for (  BuildTarget buildTarget : candidateTargets) {
    TargetNode<?> targetNode=candidateGraph.get(buildTarget);
    if (associatedTargetNodePredicate.apply(targetNode,targetGraph)) {
      rootsBuilder.add(buildTarget);
    }
  }
  return getParser().buildTargetGraphForBuildTargets(rootsBuilder.build(),options.getDefaultIncludes(),getBuckEventBus(),console,environment,options.getEnableProfiling());
}
