{
  List<String> argumentsAsBuildTargets=options.getArgumentsFormattedAsBuildTargets();
  if (argumentsAsBuildTargets.isEmpty()) {
    return PartialGraph.createPartialGraph(rulePredicate,getProjectFilesystem(),options.getDefaultIncludes(),getParser(),getBuckEventBus(),console,environment);
  }
 else {
    ImmutableList<BuildTarget> targets=getBuildTargets(argumentsAsBuildTargets);
    ImmutableList.Builder<RuleJsonPredicate> predicateBuilder=ImmutableList.builder();
    ImmutableList.Builder<AssociatedRulePredicate> associatedRulePredicateBuilder=ImmutableList.builder();
    if (options.isWithTests()) {
      predicateBuilder.add(RuleJsonPredicates.isTestRule());
      associatedRulePredicateBuilder.add(AssociatedRulePredicates.associatedTestsRules());
    }
    predicateBuilder.add(rulePredicate);
    associatedRulePredicateBuilder.add(associatedRulePredicate);
    return PartialGraph.createPartialGraphFromRootsWithAssociatedRules(targets,predicateBuilder.build(),associatedRulePredicateBuilder.build(),getProjectFilesystem(),options.getDefaultIncludes(),getParser(),getBuckEventBus(),console,environment);
  }
}
