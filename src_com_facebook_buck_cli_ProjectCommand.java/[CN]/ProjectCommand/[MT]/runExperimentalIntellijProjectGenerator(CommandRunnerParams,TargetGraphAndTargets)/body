{
  ActionGraph actionGraph=new TargetGraphToActionGraph(params.getBuckEventBus(),new BuildTargetNodeToBuildRuleTransformer()).apply(targetGraphAndTargets.getTargetGraph());
  BuildRuleResolver buildRuleResolver=new BuildRuleResolver(actionGraph.getNodes());
  SourcePathResolver sourcePathResolver=new SourcePathResolver(buildRuleResolver);
  IjProject project=new IjProject(targetGraphAndTargets,getJavaPackageFinder(params.getBuckConfig()),buildRuleResolver,sourcePathResolver,params.getRepository().getFilesystem());
  ImmutableSet<BuildTarget> requiredBuildTargets=project.write();
  if (!requiredBuildTargets.isEmpty()) {
    BuildCommand buildCommand=new BuildCommand();
    buildCommand.setArguments(FluentIterable.from(requiredBuildTargets).transform(Functions.toStringFunction()).toList());
    return buildCommand.run(params);
  }
  return 0;
}
