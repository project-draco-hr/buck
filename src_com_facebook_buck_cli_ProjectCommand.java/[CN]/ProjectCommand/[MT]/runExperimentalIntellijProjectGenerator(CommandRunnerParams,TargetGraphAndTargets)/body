{
  ActionGraph actionGraph=new TargetGraphToActionGraph(params.getBuckEventBus(),new BuildTargetNodeToBuildRuleTransformer(),params.getFileHashCache()).apply(targetGraphAndTargets.getTargetGraph());
  BuildRuleResolver buildRuleResolver=new BuildRuleResolver(ImmutableSet.copyOf(actionGraph.getNodes()));
  SourcePathResolver sourcePathResolver=new SourcePathResolver(buildRuleResolver);
  JavacOptions javacOptions=new JavaBuckConfig(params.getBuckConfig()).getDefaultJavacOptions();
  IjProject project=new IjProject(targetGraphAndTargets,getJavaPackageFinder(params.getBuckConfig()),JavaFileParser.createJavaFileParser(javacOptions),buildRuleResolver,sourcePathResolver,params.getRepository().getFilesystem());
  ImmutableSet<BuildTarget> requiredBuildTargets=project.write();
  if (!requiredBuildTargets.isEmpty()) {
    BuildCommand buildCommand=new BuildCommand();
    buildCommand.setArguments(FluentIterable.from(requiredBuildTargets).transform(Functions.toStringFunction()).toList());
    return buildCommand.run(params);
  }
  return 0;
}
