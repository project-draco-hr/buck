{
  List<String> argumentsAsBuildTargets=options.getArgumentsFormattedAsBuildTargets();
  if (argumentsAsBuildTargets.isEmpty()) {
    return PartialGraph.createPartialGraph(rulePredicate,getProjectFilesystem(),options.getDefaultIncludes(),getParser(),getBuckEventBus(),console,environment);
  }
 else {
    ImmutableList<BuildTarget> targets=getBuildTargets(argumentsAsBuildTargets);
    if (options.isWithTests()) {
      return PartialGraph.createPartialGraphFromRootsWithTests(targets,rulePredicate,getProjectFilesystem(),options.getDefaultIncludes(),getParser(),getBuckEventBus(),console,environment);
    }
 else {
      return PartialGraph.createPartialGraphFromRoots(targets,rulePredicate,options.getDefaultIncludes(),getParser(),getBuckEventBus(),console,environment);
    }
  }
}
