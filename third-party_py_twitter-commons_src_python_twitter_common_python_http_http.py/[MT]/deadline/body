def deadline(fn, *args, **kw):
    'Helper function to prevent fn(*args, **kw) from running more than\n     a specified timeout.\n\n     Takes timeout= kwarg in seconds, which defaults to 150ms (0.150)\n  '
    DEFAULT_TIMEOUT_SECS = 0.15
    from threading import Thread
    q = Queue(maxsize=1)
    timeout = kw.pop('timeout', DEFAULT_TIMEOUT_SECS)


    class AnonymousThread(Thread):

        def run(self):
            q.put(fn(*args, **kw))
    AnonymousThread().start()
    try:
        return q.get(timeout=timeout)
    except Empty:
        raise Timeout
