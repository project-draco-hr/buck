import contextlib
import hashlib
import os
import socket
import struct
import time
from ..common import safe_delete, safe_mkdir, safe_mkdtemp
from ..compatibility import PY2, PY3
from .tracer import TRACER
if PY3:
    from http.client import parse_headers, HTTPException
    from queue import Queue, Empty
    import urllib.error as urllib_error
    import urllib.parse as urlparse
    import urllib.request as urllib_request
    from urllib.request import addinfourl
else:
    from httplib import HTTPMessage, HTTPException
    from Queue import Queue, Empty
    from urllib import addinfourl
    import urllib2 as urllib_request
    import urllib2 as urllib_error
    import urlparse
