{
  Path ndkDir=tmpDir.newFolder("ndk-dir");
  PropertyFinder propertyFinder=new FakePropertyFinder(ImmutableMap.of("ndk.dir",Optional.of(ndkDir),"ndk.repository",Optional.<Path>absent()));
  DefaultAndroidDirectoryResolver androidDirectoryResolver=new DefaultAndroidDirectoryResolver(new ProjectFilesystem(tmpDir.getRoot()),Optional.<String>absent(),Optional.<String>absent(),propertyFinder);
  expectedException.expect(HumanReadableException.class);
  expectedException.expectMessage("Failed to read NDK version from " + ndkDir.toAbsolutePath());
  androidDirectoryResolver.findAndroidNdkDir();
}
