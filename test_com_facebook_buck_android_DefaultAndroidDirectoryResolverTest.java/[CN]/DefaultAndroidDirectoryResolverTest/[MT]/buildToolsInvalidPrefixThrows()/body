{
  Path sdkDir=tmpDir.newFolder("sdk");
  createBuildToolsVersions(sdkDir,"build-tools/foobar-17.2.2");
  PropertyFinder propertyFinder=new FakePropertyFinder(ImmutableMap.of("sdk.dir",Optional.of(sdkDir)));
  DefaultAndroidDirectoryResolver androidDirectoryResolver=new DefaultAndroidDirectoryResolver(new ProjectFilesystem(tmpDir.getRoot()),Optional.<String>absent(),Optional.<String>absent(),propertyFinder);
  expectedException.expect(HumanReadableException.class);
  expectedException.expectMessage("foobar-17.2.2");
  androidDirectoryResolver.findAndroidBuildToolsDir();
}
