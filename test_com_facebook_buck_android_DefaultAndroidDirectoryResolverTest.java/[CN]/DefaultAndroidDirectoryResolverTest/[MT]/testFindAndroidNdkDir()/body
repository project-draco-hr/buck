{
  File ndkDir=tmpDir.newFolder("ndk-dir");
  File releaseFile=tmpDir.newFile("ndk-dir/RELEASE.TXT");
  MoreFiles.writeLinesToFile(ImmutableList.of("r9d (64-bit)"),releaseFile);
  PropertyFinder propertyFinder=new FakePropertyFinder(ImmutableMap.of("ndk.dir",Optional.of(ndkDir.toPath()),"ndk.repository",Optional.<Path>absent()));
  DefaultAndroidDirectoryResolver androidDirectoryResolver=new DefaultAndroidDirectoryResolver(new ProjectFilesystem(tmpDir.getRoot().toPath()),Optional.of("r9d"),propertyFinder);
  assertEquals(Optional.of(ndkDir.toPath()),androidDirectoryResolver.findAndroidNdkDir());
}
