{
  tmpDir.newFolder("ndk-dir-r9a");
  tmpDir.newFolder("ndk-dir-r9b");
  createTmpNdkVersions(NDK_PRE_R11_VERSION_FILENAME,"ndk-dir-r9c","r9c");
  PropertyFinder propertyFinder=new FakePropertyFinder(ImmutableMap.of("ndk.dir",Optional.<Path>absent(),"ndk.repository",Optional.of(tmpDir.getRoot())));
  DefaultAndroidDirectoryResolver androidDirectoryResolver=new DefaultAndroidDirectoryResolver(new ProjectFilesystem(tmpDir.getRoot()),Optional.<String>absent(),Optional.of("r9e"),propertyFinder);
  expectedException.expect(HumanReadableException.class);
  expectedException.expectMessage("Couldn't find a valid NDK under " + tmpDir.getRoot().toAbsolutePath());
  androidDirectoryResolver.findAndroidNdkDir();
}
