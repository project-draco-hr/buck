{
  Path releaseDir=createTmpNdkVersions("ndk-dir-r9a","r9a","ndk-dir-r9b","r9b (64-bit)","ndk-dir-r9c","r9c (64-bit)")[2];
  PropertyFinder propertyFinder=new FakePropertyFinder(ImmutableMap.of("ndk.dir",Optional.<Path>absent(),"ndk.repository",Optional.of(tmpDir.getRoot())));
  DefaultAndroidDirectoryResolver androidDirectoryResolver=new DefaultAndroidDirectoryResolver(new ProjectFilesystem(tmpDir.getRoot()),Optional.<String>absent(),Optional.<String>absent(),propertyFinder);
  assertEquals(Optional.of(releaseDir),androidDirectoryResolver.findAndroidNdkDir());
}
