{
  Path ndkDir=createTmpNdkVersions(NDK_PRE_R11_VERSION_FILENAME,"ndk-dir","r9q")[0];
  DefaultAndroidDirectoryResolver androidDirectoryResolver=new DefaultAndroidDirectoryResolver(new ProjectFilesystem(tmpDir.getRoot()),Optional.<String>absent(),Optional.of("r9e"),createPropertiesFinder(Optional.<Path>absent(),Optional.of(ndkDir),Optional.<Path>absent()));
  expectedException.expect(HumanReadableException.class);
  expectedException.expectMessage("Buck is configured to use Android NDK version r9e at " + "ndk.dir or ANDROID_NDK or NDK_HOME. The found version is r9q located at " + ndkDir);
  androidDirectoryResolver.getNdkOrThrow();
}
