{
  Properties closureMap=null;
  InputStream in=null;
  try {
    in=RTExitHook.class.getResourceAsStream(CLOSURE_RESOURCE);
    if (in != null) {
      closureMap=new Properties();
      closureMap.load(in);
    }
 else {
      throw new Error("packaging failure: closure resource not found");
    }
  }
 catch (  Exception e) {
    e.printStackTrace(System.out);
    throw new Error("packaging failure: " + e.toString());
  }
 finally {
    if (in != null)     try {
      in.close();
    }
 catch (    IOException ignore) {
      ignore.printStackTrace();
    }
  }
  in=null;
  final String closureList=closureMap.getProperty("closure");
  if (closureList == null) {
    throw new Error("packaging failure: no closure mapping");
  }
  final ClassLoader loader=RTExitHook.class.getClassLoader();
  final StringTokenizer tokenizer=new StringTokenizer(closureList,",");
  while (tokenizer.hasMoreTokens()) {
    final String className=tokenizer.nextToken();
    try {
      Class.forName(className,true,loader);
    }
 catch (    Exception e) {
      throw new Error("packaging failure: class [" + className + "] not found {"+ e.toString()+ "}");
    }
  }
}
