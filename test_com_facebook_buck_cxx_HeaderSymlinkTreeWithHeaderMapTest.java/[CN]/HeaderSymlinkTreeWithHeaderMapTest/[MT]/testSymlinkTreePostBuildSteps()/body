{
  BuildContext buildContext=FakeBuildContext.NOOP_CONTEXT;
  FakeBuildableContext buildableContext=new FakeBuildableContext();
  ImmutableList<Step> expectedBuildSteps=ImmutableList.of(new MakeCleanDirectoryStep(symlinkTreeRoot),new SymlinkTreeStep(symlinkTreeRoot,new SourcePathResolver(new BuildRuleResolver()).getMappedPaths(links)),new HeaderMapStep(headerMapPath,ImmutableMap.of(Paths.get("file"),BuckConstant.BUCK_OUTPUT_PATH.relativize(symlinkTreeRoot).resolve("file"),Paths.get("directory/then/file"),BuckConstant.BUCK_OUTPUT_PATH.relativize(symlinkTreeRoot).resolve("directory/then/file"))));
  ImmutableList<Step> actualBuildSteps=symlinkTreeBuildRule.getPostBuildSteps(buildContext,buildableContext);
  assertEquals(expectedBuildSteps,actualBuildSteps);
}
