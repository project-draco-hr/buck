{
  String message;
  if (buildTarget.isPresent()) {
    message=String.format("%s failed on step %s with an exception:\n%s",buildTarget.get().getFullyQualifiedName(),step.getShortName(),throwable.getMessage());
  }
 else {
    message=String.format("Failed on step %s with an exception:\n%s",step.getShortName(),throwable.getMessage());
  }
  return new StepFailedException(message,step,1);
}
