{
  assumeTrue(Platform.detect() == Platform.MACOS);
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"simple_app_with_extension",tmp);
  workspace.setUp();
  ProjectWorkspace.ProcessResult result=workspace.runBuckCommand("targets","--show-output","//:DemoAppWithExtension#no-debug");
  result.assertSuccess();
  assertEquals("//:DemoAppWithExtension#no-debug " + "buck-out/gen/" + "DemoAppWithExtension#no-debug,no-include-frameworks,transitive-resources/"+ "DemoAppWithExtension.app",result.getStdout().trim());
  result=workspace.runBuckCommand("build","//:DemoAppWithExtension#no-debug");
  result.assertSuccess();
  Path bundleDir=tmp.getRootPath().resolve(BuckConstant.GEN_DIR).resolve("DemoAppWithExtension#no-debug,no-include-frameworks,transitive-resources/" + "DemoAppWithExtension.app");
  assertTrue(Files.exists(bundleDir.resolve("DemoAppWithExtension")));
  assertTrue(Files.exists(bundleDir.resolve("PlugIns/DemoExtension.appex/DemoExtension")));
}
