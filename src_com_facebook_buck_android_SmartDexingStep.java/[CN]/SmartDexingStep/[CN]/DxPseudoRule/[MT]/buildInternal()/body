{
  Preconditions.checkState(newInputsHash != null,"Must call checkIsCached first!");
  List<Step> steps=Lists.newArrayList();
  EnumSet<Option> dxOptions=optimizeDex ? EnumSet.noneOf(DxStep.Option.class) : EnumSet.of(DxStep.Option.NO_OPTIMIZE);
  steps.add(createDxStepForDxPseudoRule(srcs,outputPath,dxOptions));
  steps.add(new WriteFileStep(newInputsHash,outputHashPath));
  return ImmutableList.<Step>of(new CompositeStep(steps));
}
