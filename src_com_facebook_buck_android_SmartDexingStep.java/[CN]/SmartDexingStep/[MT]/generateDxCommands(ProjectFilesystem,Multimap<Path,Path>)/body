{
  ImmutableList.Builder<DxPseudoRule> pseudoRules=ImmutableList.builder();
  for (  Path outputFile : outputToInputs.keySet()) {
    pseudoRules.add(new DxPseudoRule(filesystem,FluentIterable.from(outputToInputs.get(outputFile)).toSet(),outputFile,successDir.resolve(outputFile.getFileName()),dxOptions));
  }
  ImmutableList.Builder<Step> steps=ImmutableList.builder();
  for (  DxPseudoRule pseudoRule : pseudoRules.build()) {
    if (!pseudoRule.checkIsCached()) {
      steps.addAll(pseudoRule.buildInternal());
    }
  }
  return steps.build();
}
