{
  BuildTarget buildTargetForFilterResources=createBuildTargetWithFlavor(RESOURCES_FILTER_FLAVOR);
  BuildRule resourcesFilterBuildRule=ruleResolver.buildAndAddToIndex(ResourcesFilter.newResourcesFilterBuilder(buildRuleBuilderParams).setBuildTarget(buildTargetForFilterResources).setResourceCompressionMode(resourceCompressionMode).setResourceFilter(resourceFilter).setAndroidResourceDepsFinder(androidResourceDepsFinder));
  ResourcesFilter resourcesFilter=(ResourcesFilter)resourcesFilterBuildRule.getBuildable();
  BuildTarget buildTargetForUberRDotJava=createBuildTargetWithFlavor(UBER_R_DOT_JAVA_FLAVOR);
  BuildRule uberRDotJavaBuildRule=ruleResolver.buildAndAddToIndex(UberRDotJava.newUberRDotJavaBuilder(buildRuleBuilderParams).setBuildTarget(buildTargetForUberRDotJava).setResourcesFilter(resourcesFilter).setAndroidResourceDepsFinder(androidResourceDepsFinder).setJavacOptions(javacOptions).setRDotJavaNeedsDexing(rDotJavaNeedsDexing).setBuildStringSourceMap(shouldBuildStringSourceMap));
  UberRDotJava uberRDotJava=(UberRDotJava)uberRDotJavaBuildRule.getBuildable();
  BuildTarget buildTargetForAapt=createBuildTargetWithFlavor(AAPT_PACKAGE_FLAVOR);
  BuildRule aaptPackageResourcesBuildRule=ruleResolver.buildAndAddToIndex(AaptPackageResources.newAaptPackageResourcesBuildableBuilder(buildRuleBuilderParams).setBuildTarget(buildTargetForAapt).setAllParams(manifest,resourcesFilter,uberRDotJava,androidResourceDepsFinder.getAndroidTransitiveDependencies().nativeTargetsWithAssets,packageType,cpuFilters));
  AaptPackageResources aaptPackageResources=(AaptPackageResources)aaptPackageResourcesBuildRule.getBuildable();
  totalDeps.add(resourcesFilterBuildRule).add(uberRDotJavaBuildRule).add(aaptPackageResourcesBuildRule).build();
  return new AaptEnhancementResult(resourcesFilter,uberRDotJava,aaptPackageResources);
}
