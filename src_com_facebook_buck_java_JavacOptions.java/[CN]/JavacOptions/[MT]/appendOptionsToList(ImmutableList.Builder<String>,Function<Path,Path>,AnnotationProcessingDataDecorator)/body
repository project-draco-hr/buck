{
  Preconditions.checkNotNull(optionsBuilder);
  optionsBuilder.add("-source",javacEnv.getSourceLevel());
  optionsBuilder.add("-target",javacEnv.getTargetLevel());
  if (debug) {
    optionsBuilder.add("-g");
  }
  if (verbose) {
    optionsBuilder.add("-verbose");
  }
  if (bootclasspath.isPresent()) {
    optionsBuilder.add("-bootclasspath",bootclasspath.get());
  }
  AnnotationProcessingData annotationProcessingData=decorator.decorate(this.annotationProcessingData);
  if (!annotationProcessingData.isEmpty()) {
    Path generateTo=annotationProcessingData.getGeneratedSourceFolderName();
    if (generateTo != null) {
      optionsBuilder.add("-s").add(generateTo.toString());
    }
    Function<Path,Path> pathRelativizerThatOmitsAbiProcessor=new Function<Path,Path>(){
      @Override public Path apply(      Path searchPathElement){
        if (AbiWritingAnnotationProcessingDataDecorator.ABI_PROCESSOR_CLASSPATH.equals(searchPathElement)) {
          return searchPathElement;
        }
 else {
          return pathRelativizer.apply(searchPathElement);
        }
      }
    }
;
    optionsBuilder.add("-processorpath",Joiner.on(':').join(FluentIterable.from(annotationProcessingData.getSearchPathElements()).transform(pathRelativizerThatOmitsAbiProcessor).transform(Functions.toStringFunction())));
    if (!annotationProcessingData.getNames().isEmpty()) {
      optionsBuilder.add("-processor",Joiner.on(',').join(annotationProcessingData.getNames()));
    }
    for (    String parameter : annotationProcessingData.getParameters()) {
      optionsBuilder.add("-A" + parameter);
    }
    if (annotationProcessingData.getProcessOnly()) {
      optionsBuilder.add("-proc:only");
    }
  }
}
