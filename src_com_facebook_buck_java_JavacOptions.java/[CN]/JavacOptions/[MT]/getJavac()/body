{
  Optional<Path> externalJavac=getJavacPath();
  if (externalJavac.isPresent()) {
    if (!getProcessExecutor().isPresent()) {
      throw new RuntimeException("Misconfigured JavacOptions --- no process executor");
    }
    ProcessExecutorParams params=ImmutableProcessExecutorParams.builder().setCommand(ImmutableList.of(externalJavac.get().toString(),"-version")).build();
    ProcessExecutor.Result result=null;
    try {
      result=getProcessExecutor().get().launchAndExecute(params);
    }
 catch (    InterruptedException|IOException e) {
      throw new RuntimeException(e);
    }
    Optional<JavacVersion> version;
    Optional<String> stderr=result.getStderr();
    if (Strings.isNullOrEmpty(stderr.orNull())) {
      version=Optional.absent();
    }
 else {
      version=Optional.of((JavacVersion)ImmutableJavacVersion.of(stderr.get()));
    }
    return new ExternalJavac(externalJavac.get(),version);
  }
  return new Jsr199Javac(getJavacJarPath());
}
