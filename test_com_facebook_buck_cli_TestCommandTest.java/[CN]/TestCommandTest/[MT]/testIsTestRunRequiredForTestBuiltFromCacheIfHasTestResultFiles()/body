{
  ExecutionContext executionContext=createMock(ExecutionContext.class);
  expect(executionContext.isDebugEnabled()).andReturn(false);
  TestRule testRule=createMock(TestRule.class);
  expect(testRule.getBuildResultType()).andReturn(BuildRuleSuccess.Type.FETCHED_FROM_CACHE);
  replay(executionContext,testRule);
  assertTrue("A cache hit updates the build artifact but not the test results. " + "Therefore, the test should be re-run to ensure the test results are up to date.",TestCommand.isTestRunRequiredForTest(testRule,executionContext,createMock(TestRuleKeyFileHelper.class),false));
  verify(executionContext,testRule);
}
