{
  String excludedLabel="exclude_me";
  BuckConfig config=new FakeBuckConfig(ImmutableMap.of("test",ImmutableMap.of("excluded_labels",excludedLabel)));
  assertThat(config.getDefaultRawExcludedLabelSelectors(),contains(excludedLabel));
  TestCommandOptions options=new TestCommandOptions();
  new CmdLineParserAdditionalOptions(options).parseArgument("//example:test");
  FakeTestRule rule=new FakeTestRule(BuildRuleType.of("java_test"),ImmutableSet.<Label>of(Label.of(excludedLabel)),BuildTargetFactory.newInstance("//example:test"),new SourcePathResolver(new BuildRuleResolver()),ImmutableSortedSet.<BuildRule>of());
  Iterable<TestRule> filtered=TestCommand.filterTestRules(config,options,ImmutableSet.<TestRule>of(rule));
  assertEquals(rule,Iterables.getOnlyElement(filtered));
}
