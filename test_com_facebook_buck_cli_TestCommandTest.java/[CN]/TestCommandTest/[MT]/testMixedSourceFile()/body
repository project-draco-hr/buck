{
  Path pathToGenFile=GEN_PATH.resolve("com/facebook/GeneratedFile.java");
  Path pathToNonGenFile1=Paths.get("package/src/SourceFile1.java");
  Path pathToNonGenFile2=Paths.get("package/src-gen/SourceFile2.java");
  ImmutableSortedSet<Path> javaSrcs=ImmutableSortedSet.of(pathToGenFile,pathToNonGenFile1,pathToNonGenFile2);
  DefaultJavaPackageFinder defaultJavaPackageFinder=createMock(DefaultJavaPackageFinder.class);
  expect(defaultJavaPackageFinder.getPathsFromRoot()).andReturn(pathsFromRoot).times(2);
  expect(defaultJavaPackageFinder.getPathElements()).andReturn(pathElements).times(2);
  JavaLibrary javaLibrary=new FakeJavaLibrary(BuildTarget.builder("//foo","bar").build(),new SourcePathResolver(new BuildRuleResolver())).setJavaSrcs(javaSrcs);
  replay(defaultJavaPackageFinder);
  ImmutableSet<String> result=TestCommand.getPathToSourceFolders(javaLibrary,Optional.of(defaultJavaPackageFinder),new FakeProjectFilesystem());
  assertEquals("The non-generated source files are under two different source folders.",ImmutableSet.of("./package/src-gen/","./package/src/"),result);
  verify(defaultJavaPackageFinder);
}
