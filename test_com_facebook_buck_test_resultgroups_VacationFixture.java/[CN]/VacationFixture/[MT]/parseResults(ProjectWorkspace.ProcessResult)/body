{
  List<TestName> testsSeen=Lists.newArrayList();
  Map<TestName,ResultType> results=Maps.newHashMap();
  String[] lines=buckResult.getStderr().split("\n");
  for (  String line : lines) {
    Matcher matcher=RESULT_LINE_PATTERN.matcher(line);
    if (matcher.find()) {
      ResultType resultType=ResultType.valueOf(matcher.group(1));
      TestName test=new TestName(matcher.group(2));
      testsSeen.add(test);
      if (results.containsKey(test)) {
        fail(String.format("After seeing tests {%s}, we got a duplicate results for test class '%s'",Joiner.on(", ").join(testsSeen),test));
      }
      results.put(test,resultType);
    }
  }
  return results;
}
