{
  Preconditions.checkState(rDotJavaNeedsDexing,"Error trying to get R.java dex file: R.java is not supposed to be dexed.");
  final Optional<Integer> linearAllocSizeEstimate=buildOutputInitializer.getBuildOutput().rDotJavaDexLinearAllocEstimate;
  if (!linearAllocSizeEstimate.isPresent()) {
    return Optional.absent();
  }
  return Optional.<DexWithClasses>of(new DexWithClasses(){
    @Override public Path getPathToDexFile(){
      return getPathToRDotJavaDex();
    }
    @Override public ImmutableSet<String> getClassNames(){
      throw new RuntimeException("Since R.java is unconditionally packed in the primary dex, no" + "one should call this method.");
    }
    @Override public int getSizeEstimate(){
      return linearAllocSizeEstimate.get();
    }
  }
);
}
