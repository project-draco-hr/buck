{
  final ImmutableList<String> command=ImmutableList.of("hello","world");
  FakeCxxTest cxxTest=new FakeCxxTest(){
    @Override protected ImmutableList<String> getShellCommand(    ExecutionContext context,    Path output){
      return command;
    }
  }
;
  BuildContext buildContext=FakeBuildContext.NOOP_CONTEXT;
  ExecutionContext executionContext=TestExecutionContext.newInstance();
  ImmutableList<Step> actualSteps=cxxTest.runTests(buildContext,executionContext,false,false,TestSelectorList.empty(),FakeTestRule.NOOP_REPORTING_CALLBACK);
  CxxTestStep cxxTestStep=new CxxTestStep(command,cxxTest.getPathToTestExitCode(),cxxTest.getPathToTestOutput());
  assertEquals(cxxTestStep,Iterables.getLast(actualSteps));
}
