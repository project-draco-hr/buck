{
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  BuildRuleSourcePath sourcePath=new BuildRuleSourcePath(new FakeBuildRule("//:fake",pathResolver),Paths.get("Example.java"));
  JavacInMemoryStep javac=createJavac(ImmutableSet.of(pathResolver.getPath(sourcePath)),false);
  ExecutionContext executionContext=createExecutionContext();
  int exitCode=javac.execute(executionContext);
  assertEquals("javac should exit with code 0.",exitCode,0);
  File srcsListFile=pathToSrcsList.toFile();
  assertTrue(srcsListFile.exists());
  assertTrue(srcsListFile.isFile());
  assertEquals("Example.java",Files.toString(srcsListFile,Charsets.UTF_8).trim());
}
