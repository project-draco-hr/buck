{
  BuildTarget resourceTarget=BuildTarget.builder("//foo","resource").build();
  Set<SourcePath> variants=ImmutableSet.<SourcePath>of(new TestSourcePath("path/aa.lproj/Localizable.strings"),new TestSourcePath("path/bb.lproj/Localizable.strings"),new TestSourcePath("path/cc.lproj/Localizable.strings"));
  TargetNode<AppleResourceDescription.Arg> resourceNode=AppleResourceBuilder.createBuilder(resourceTarget).setFiles(ImmutableSet.<SourcePath>of(new TestSourcePath("foo.png"))).setDirs(ImmutableSet.<SourcePath>of()).setVariants(Optional.of(variants)).build();
  TargetNode<AppleNativeTargetDescriptionArg> libNode=AppleLibraryBuilder.createBuilder(BuildTarget.builder("//foo","lib").build()).setDeps(Optional.of(ImmutableSortedSet.of(resourceTarget))).build();
  ImmutableSet<TargetNode<?>> graphNodes=ImmutableSet.of(resourceNode,libNode);
  TargetGraph targetGraph=TargetGraphFactory.newInstance(graphNodes);
  ImmutableSet<TargetNode<AppleNativeTargetDescriptionArg>> targetNodes=ImmutableSet.of(libNode);
  assertThat(AppleResources.collectRecursiveResources(targetGraph,targetNodes),hasItem(resourceNode.getConstructorArg()));
}
