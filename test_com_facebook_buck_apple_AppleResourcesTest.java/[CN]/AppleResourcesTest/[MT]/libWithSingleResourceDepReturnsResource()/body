{
  BuildTarget resourceTarget=BuildTarget.builder("//foo","resource").build();
  TargetNode<AppleResourceDescription.Arg> resourceNode=AppleResourceBuilder.createBuilder(resourceTarget).setFiles(ImmutableSet.<SourcePath>of(new TestSourcePath("foo.png"))).setDirs(ImmutableSet.<Path>of()).build();
  TargetNode<AppleNativeTargetDescriptionArg> libNode=AppleLibraryBuilder.createBuilder(BuildTarget.builder("//foo","lib").build()).setDeps(Optional.of(ImmutableSortedSet.of(resourceTarget))).build();
  ImmutableSet<TargetNode<?>> graphNodes=ImmutableSet.of(resourceNode,libNode);
  TargetGraph targetGraph=TargetGraphFactory.newInstance(graphNodes);
  ImmutableSet<TargetNode<AppleNativeTargetDescriptionArg>> targetNodes=ImmutableSet.of(libNode);
  assertThat(AppleResources.collectRecursiveResources(targetGraph,targetNodes),hasItem(resourceNode.getConstructorArg()));
}
