{
  final ImmutableSet<String> fullyQualifiedBuildTargets=ImmutableSet.copyOf(getArgumentsFormattedAsBuildTargets(params.getBuckConfig()));
  if (fullyQualifiedBuildTargets.isEmpty()) {
    params.getConsole().printBuildFailure("Must specify at least one build target.");
    return 1;
  }
  if (params.getConsole().getAnsi().isAnsiTerminal()) {
    params.getBuckEventBus().post(ConsoleEvent.info("'buck audit tests' is deprecated. Please use 'buck query' instead. e.g.\n\t%s\n\n" + "The query language is documented at https://buckbuild.com/command/query.html",QueryCommand.buildAuditTestsQueryExpression(getArguments(),shouldGenerateJsonOutput())));
  }
  BuckQueryEnvironment env=new BuckQueryEnvironment(params,getEnableProfiling());
  try {
    return QueryCommand.runMultipleQuery(params,env,"testsof('%s')",getArgumentsFormattedAsBuildTargets(params.getBuckConfig()),shouldGenerateJsonOutput());
  }
 catch (  QueryException e) {
    if (e.getCause() instanceof InterruptedException) {
      throw (InterruptedException)e.getCause();
    }
    params.getConsole().printBuildFailureWithoutStacktrace(e);
    return 1;
  }
}
