{
  checkResourceNames(resources);
  for (  Map.Entry<String,Integer> entry : resources.entrySet()) {
    Integer oldValue=actualCounters.get(entry.getKey());
    Preconditions.checkNotNull(oldValue);
    Integer newValue=oldValue - entry.getValue();
    Preconditions.checkArgument(newValue.intValue() >= 0,"Resource %s has been over-released, new actual value is %d, old value was %d",entry.getKey(),newValue,oldValue);
    actualCounters.put(entry.getKey(),newValue);
  }
}
