{
  String watchmanError="Watch does not exist.";
  String watchmanOutput=Joiner.on('\n').join("{","\"version\": \"2.9.2\",","\"error\": \"" + watchmanError + "\"","}");
  EventBus eventBus=createStrictMock(EventBus.class);
  Process process=createWaitForProcessMock(watchmanOutput);
  replay(eventBus,process);
  WatchmanWatcher watcher=createWatcher(eventBus,process,new IncrementingFakeClock(),new ObjectMapper());
  try {
    watcher.postEvents();
    fail("Should have thrown RuntimeException");
  }
 catch (  RuntimeException e) {
    assertThat("Should contain watchman error.",e.getMessage(),Matchers.containsString(watchmanError));
  }
}
