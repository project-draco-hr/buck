{
  String message="I'm a warning!";
  String watchmanOutput=Joiner.on('\n').join("{\"files\": [","{","\"warning\": \"" + message + "\"","}","]}");
  EventBus eventBus=new EventBus("watchman test");
  WatchmanWatcher watcher=createWatcher(eventBus,new FakeProcess(0,watchmanOutput,""),new IncrementingFakeClock(),new ObjectMapper(),10000,10000);
  ImmutableSet.Builder<String> warningsBuilder=ImmutableSet.builder();
  watcher.postEvents(new BuckEventBus(new FakeClock(0),new BuildId()),warningsBuilder);
  assertThat(warningsBuilder.build(),equalTo(ImmutableSet.of(message)));
}
