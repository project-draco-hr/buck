{
  String query=WatchmanWatcher.createQuery(new ObjectMapper(),"/path/to/repo",Optional.<String>absent(),"uuid",Lists.<Path>newArrayList(),Lists.newArrayList("*.pbxproj"),ImmutableSet.of(Watchman.Capability.DIRNAME));
  assertEquals("[\"query\",\"/path/to/repo\",{\"since\":\"n:buckduuid\"," + "\"expression\":[\"not\",[\"anyof\"," + "[\"type\",\"d\"],"+ "[\"match\",\"*.pbxproj\"]]],"+ "\"empty_on_fresh_instance\":true,\"fields\":[\"name\",\"exists\",\"new\"]}]",query);
}
