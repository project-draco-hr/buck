{
  String watchmanOutput=Joiner.on('\n').join("{\"files\": [","{","\"name\": \"/foo/bar/baz\"","}","]}");
  EventBus eventBus=createStrictMock(EventBus.class);
  Process process=createMockProcess(watchmanOutput);
  replay(eventBus,process);
  WatchmanWatcher watcher=createWatcher(eventBus,process,ImmutableSet.<Path>of(new File("/foo/bar/").toPath()),200);
  watcher.postEvents();
  verify(eventBus,process);
}
