{
  String query=WatchmanWatcher.createQuery(new ObjectMapper(),"/path/to/repo",Optional.<String>absent(),"uuid",Lists.newArrayList(Paths.get("foo"),Paths.get("bar/baz")),Lists.<String>newArrayList(),ImmutableSet.of(WatchmanWatcher.Capability.DIRNAME));
  assertEquals("[\"query\",\"/path/to/repo\",{\"since\":\"n:buckduuid\"," + "\"expression\":[\"not\",[\"anyof\"," + "[\"type\",\"d\"],"+ "[\"dirname\",\"foo\"],"+ "[\"dirname\",\"bar/baz\"]]],"+ "\"empty_on_fresh_instance\":true,\"fields\":[\"name\",\"exists\",\"new\"]}]",query);
}
