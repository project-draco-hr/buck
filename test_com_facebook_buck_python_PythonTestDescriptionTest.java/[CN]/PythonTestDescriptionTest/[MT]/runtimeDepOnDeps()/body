{
  BuildRuleResolver resolver=new BuildRuleResolver(TargetGraph.EMPTY,new BuildTargetNodeToBuildRuleTransformer());
  BuildRule cxxBinary=new CxxBinaryBuilder(BuildTargetFactory.newInstance("//:dep")).build(resolver);
  BuildRule pythonLibrary=new PythonLibraryBuilder(BuildTargetFactory.newInstance("//:lib")).setDeps(ImmutableSortedSet.of(cxxBinary.getBuildTarget())).build(resolver);
  PythonTest pythonTest=(PythonTest)PythonTestBuilder.create(BuildTargetFactory.newInstance("//:test")).setDeps(ImmutableSortedSet.of(pythonLibrary.getBuildTarget())).build(resolver);
  assertThat(BuildRules.getTransitiveRuntimeDeps(pythonTest),Matchers.hasItem(cxxBinary));
}
