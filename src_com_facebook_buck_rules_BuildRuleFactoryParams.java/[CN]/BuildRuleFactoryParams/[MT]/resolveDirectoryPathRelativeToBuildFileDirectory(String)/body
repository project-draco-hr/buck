{
  Preconditions.checkNotNull(path);
  Preconditions.checkArgument(!path.startsWith(GENFILE_PREFIX));
  String fullPath=resolvePathAgainstBuildTargetBase(path);
  checkFullPath(fullPath);
  File file=filesystem.getFileForRelativePath(fullPath);
  if (!ignoreFileExistenceChecks && !file.isDirectory()) {
    throw new RuntimeException("Not a directory: " + fullPath);
  }
  return Paths.get(fullPath);
}
