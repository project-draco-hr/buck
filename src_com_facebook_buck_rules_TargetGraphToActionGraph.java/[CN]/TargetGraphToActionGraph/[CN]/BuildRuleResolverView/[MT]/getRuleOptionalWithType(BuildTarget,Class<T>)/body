{
  ProjectFilesystem filesystem=nameResolver.apply(target.getRepository());
  BuildRuleResolver toUse=ruleResolvers.getUnchecked(filesystem);
  return toUse.getRuleOptionalWithType(target,cls);
}
