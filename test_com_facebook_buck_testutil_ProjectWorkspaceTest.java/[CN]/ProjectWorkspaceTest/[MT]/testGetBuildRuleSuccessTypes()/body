{
  DebuggableTemporaryFolder tmpFolder=new DebuggableTemporaryFolder();
  tmpFolder.create();
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"dir_doesnt_exist",tmpFolder);
  List<String> buildLogLines=Lists.newArrayList("735 INFO  BuildRuleFinished(//example/base:one): " + "SUCCESS MISS BUILT_LOCALLY 489e1b85f804dc0f66545f2ce06f57ee85204747","735 INFO  BuildRuleFinished(//example/base:two): " + "SUCCESS MISS MISSING 489e1b85f804dc0f66545f2ce06f57ee85204747");
  tmpFolder.newFolder("buck-out");
  tmpFolder.newFolder("buck-out/bin");
  File buildLogFile=tmpFolder.newFile("buck-out/bin/build.log");
  MoreFiles.writeLinesToFile(buildLogLines,buildLogFile);
  Map<BuildTarget,Optional<BuildRuleSuccess.Type>> successTypes=workspace.getBuildRuleSuccessTypes();
  assertEquals(BuildRuleSuccess.Type.BUILT_LOCALLY,successTypes.get(BuildTargetFactory.newInstance("//example/base:one")).get());
  assertFalse(successTypes.get(BuildTargetFactory.newInstance("//example/base:two")).isPresent());
}
