{
  MutableDirectedGraph<BuildRule> graph=new MutableDirectedGraph<BuildRule>();
  for (  BuildRule rule : rules) {
    for (    BuildRule dep : rule.getDeps()) {
      graph.addEdge(rule,dep);
    }
  }
  List<BuildTarget> buildTargets=Lists.transform(targets,new Function<String,BuildTarget>(){
    @Override public BuildTarget apply(    String target){
      return BuildTargetFactory.newInstance(target);
    }
  }
);
  DependencyGraph dependencyGraph=new DependencyGraph(graph);
  return PartialGraphFactory.newInstance(dependencyGraph,buildTargets);
}
