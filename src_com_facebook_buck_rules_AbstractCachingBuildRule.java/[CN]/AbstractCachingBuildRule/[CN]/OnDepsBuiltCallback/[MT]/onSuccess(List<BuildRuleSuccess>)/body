{
  final SettableFuture<BuildRuleSuccess> result=(SettableFuture<BuildRuleSuccess>)buildRuleResult;
  ListenableFuture<BuildRuleSuccess> future=executeCommandsNowThatDepsAreBuilt(context);
  Futures.addCallback(future,new FutureCallback<BuildRuleSuccess>(){
    @Override public void onSuccess(    BuildRuleSuccess buildRuleSuccess){
      result.set(buildRuleSuccess);
    }
    @Override public void onFailure(    Throwable throwable){
      result.setException(throwable);
    }
  }
,context.getExecutor());
}
