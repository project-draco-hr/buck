{
  ImmutableSet<JavaLibraryRule> sourceUnderTest=generateSourceUnderTest(sourceUnderTestNames,buildRuleIndex);
  AnnotationProcessingParams processingParams=getAnnotationProcessingBuilder().build(buildRuleIndex);
  javacOptions.setAnnotationProcessingData(processingParams);
  return new JavaTestRule(createCachingBuildRuleParams(buildRuleIndex),srcs,resources,labels,proguardConfig,javacOptions.build(),vmArgs,sourceUnderTest);
}
