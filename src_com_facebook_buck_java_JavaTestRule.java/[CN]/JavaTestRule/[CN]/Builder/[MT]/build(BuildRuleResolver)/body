{
  ImmutableSet<BuildRule> sourceUnderTest=generateSourceUnderTest(sourcesUnderTest,ruleResolver);
  AnnotationProcessingParams processingParams=getAnnotationProcessingBuilder().build(ruleResolver);
  javacOptions.setAnnotationProcessingData(processingParams);
  BuildRuleParams buildRuleParams=createBuildRuleParams(ruleResolver);
  return new JavaTestRule(buildRuleParams,srcs,resources,labels,contacts,proguardConfig,ImmutableSet.<String>of(),javacOptions.build(),vmArgs,sourceUnderTest);
}
