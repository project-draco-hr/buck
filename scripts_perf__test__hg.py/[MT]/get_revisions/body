def get_revisions(args):
    cmd = ['hg', 'log', '--limit', str((args.revisions_to_go_back + 1)), '-T', '{node}\\n', args.project_under_test]
    proc = subprocess.Popen(cmd, cwd=args.repo_under_test, stdout=subprocess.PIPE)
    try:
        return list(reversed(proc.communicate()[0].splitlines()))
    finally:
        if proc.wait():
            raise subprocess.CalledProcessError(proc.returncode, ' '.join(cmd))
