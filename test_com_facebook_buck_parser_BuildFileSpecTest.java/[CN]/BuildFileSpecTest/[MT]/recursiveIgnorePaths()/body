{
  Path ignoredBuildFile=Paths.get("a","b","BUCK");
  ImmutableSet<Path> ignore=ImmutableSet.of(ignoredBuildFile.getParent());
  ProjectFilesystem filesystem=new ProjectFilesystem(tmp.getRoot().toPath(),ignore);
  Path buildFile=Paths.get("a","BUCK");
  filesystem.mkdirs(buildFile.getParent());
  filesystem.writeContentsToPath("",buildFile);
  filesystem.mkdirs(ignoredBuildFile.getParent());
  filesystem.writeContentsToPath("",ignoredBuildFile);
  BuildFileSpec recursiveSpec=BuildFileSpec.fromRecursivePath(buildFile.getParent());
  ImmutableSet<Path> expectedBuildFiles=ImmutableSet.of(filesystem.resolve(buildFile));
  Cell cell=new TestCellBuilder().setFilesystem(filesystem).build();
  ImmutableSet<Path> actualBuildFiles=recursiveSpec.findBuildFiles(cell);
  assertEquals(expectedBuildFiles,actualBuildFiles);
}
