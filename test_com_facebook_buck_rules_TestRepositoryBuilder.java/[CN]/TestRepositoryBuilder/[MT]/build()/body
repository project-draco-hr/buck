{
  ProcessExecutor executor=new ProcessExecutor(new TestConsole());
  KnownBuildRuleTypesFactory typesFactory=new KnownBuildRuleTypesFactory(executor,androidDirectoryResolver,Optional.<Path>absent());
  if (parserFactory == null) {
    return new Repository(filesystem,new TestConsole(),NULL_WATCHMAN,buckConfig,typesFactory,androidDirectoryResolver);
  }
  return new Repository(filesystem,new TestConsole(),NULL_WATCHMAN,buckConfig,typesFactory,androidDirectoryResolver){
    @Override public ProjectBuildFileParserFactory createBuildFileParserFactory(    boolean useWatchmanGlob){
      return parserFactory;
    }
  }
;
}
