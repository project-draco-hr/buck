{
  ProcessExecutor executor=new ProcessExecutor(new TestConsole());
  KnownBuildRuleTypesFactory typesFactory=new KnownBuildRuleTypesFactory(executor,androidDirectoryResolver,Optional.<Path>absent());
  if (parserFactory == null) {
    return new Repository(filesystem,new TestConsole(),NULL_WATCHMAN,buckConfig,typesFactory,androidDirectoryResolver,new FakeClock(0));
  }
  return new Repository(filesystem,new TestConsole(),NULL_WATCHMAN,buckConfig,typesFactory,androidDirectoryResolver,new FakeClock(0)){
    @Override public ProjectBuildFileParserFactory createBuildFileParserFactory(    boolean useWatchmanGlob){
      return parserFactory;
    }
  }
;
}
