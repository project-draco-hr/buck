{
  super(buildRuleParams);
  this.srcs=ImmutableList.copyOf(srcs);
  this.cmd=Preconditions.checkNotNull(cmd);
  this.bash=Preconditions.checkNotNull(bash);
  this.cmdExe=Preconditions.checkNotNull(cmdExe);
  this.srcsToAbsolutePaths=Maps.toMap(srcs,relativeToAbsolutePathFunction);
  Preconditions.checkNotNull(out);
  this.pathToOutDirectory=String.format("%s/%s",BuckConstant.GEN_DIR,buildRuleParams.getBuildTarget().getBasePathWithSlash());
  this.pathToOutFile=String.format("%s%s",pathToOutDirectory,out);
  this.absolutePathToOutFile=relativeToAbsolutePathFunction.apply(this.pathToOutFile);
  this.pathToTmpDirectory=String.format("%s/%s%s__tmp",BuckConstant.GEN_DIR,buildRuleParams.getBuildTarget().getBasePathWithSlash(),getBuildTarget().getShortName());
  this.absolutePathToTmpDirectory=relativeToAbsolutePathFunction.apply(pathToTmpDirectory);
  this.pathToSrcDirectory=String.format("%s/%s%s__srcs",BuckConstant.GEN_DIR,buildRuleParams.getBuildTarget().getBasePathWithSlash(),getBuildTarget().getShortName());
  this.absolutePathToSrcDirectory=relativeToAbsolutePathFunction.apply(pathToSrcDirectory);
  this.relativeToAbsolutePathFunction=relativeToAbsolutePathFunction;
}
