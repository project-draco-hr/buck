{
  super(cachingBuildRuleParams);
  this.srcs=ImmutableSortedSet.<String>naturalOrder().addAll(srcs).build();
  this.cmd=Preconditions.checkNotNull(cmd);
  this.srcsToAbsolutePaths=Maps.toMap(srcs,relativeToAbsolutePathFunction);
  Preconditions.checkNotNull(out);
  this.outDirectory=String.format("%s/%s",BuckConstant.GEN_DIR,cachingBuildRuleParams.getBuildTarget().getBasePathWithSlash());
  String outWithGenDirPrefix=String.format("%s%s",outDirectory,out);
  this.outAsAbsolutePath=relativeToAbsolutePathFunction.apply(outWithGenDirPrefix);
  String temp=String.format("%s/%s/%s__tmp",BuckConstant.GEN_DIR,cachingBuildRuleParams.getBuildTarget().getBasePath(),getBuildTarget().getShortName());
  this.tmpDirectory=relativeToAbsolutePathFunction.apply(temp);
  String srcdir=String.format("%s/%s/%s__srcs",BuckConstant.GEN_DIR,cachingBuildRuleParams.getBuildTarget().getBasePath(),getBuildTarget().getShortName());
  this.srcDirectory=relativeToAbsolutePathFunction.apply(srcdir);
  this.relativeToAbsolutePathFunction=relativeToAbsolutePathFunction;
}
