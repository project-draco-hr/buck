{
  environmentVariablesBuilder.put("SRCS",Joiner.on(' ').join(srcsToAbsolutePaths.values()));
  environmentVariablesBuilder.put("OUT",getAbsoluteOutputFilePath());
  final Set<String> depFiles=Sets.newHashSet();
  final Set<BuildRule> processedBuildRules=Sets.newHashSet();
  for (  BuildRule dep : getDeps()) {
    transformNames(processedBuildRules,depFiles,dep);
  }
  environmentVariablesBuilder.put("DEPS",Joiner.on(' ').skipNulls().join(depFiles));
  environmentVariablesBuilder.put("SRCDIR",absolutePathToSrcDirectory);
  environmentVariablesBuilder.put("TMP",absolutePathToTmpDirectory);
  Optional<AndroidPlatformTarget> optionalAndroid=context.getAndroidPlatformTargetOptional();
  if (optionalAndroid.isPresent()) {
    AndroidPlatformTarget android=optionalAndroid.get();
    environmentVariablesBuilder.put("DX",android.getDxExecutable().getAbsolutePath());
  }
}
