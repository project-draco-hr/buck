{
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  RuleKeyBuilderFactory ruleKeyBuilderFactory=new FakeRuleKeyBuilderFactory(FakeFileHashCache.createFromStrings(ImmutableMap.of("ar",Strings.repeat("0",40),"a.o",Strings.repeat("a",40),"b.o",Strings.repeat("b",40),"c.o",Strings.repeat("c",40),"different",Strings.repeat("d",40))));
  RuleKey.Builder.RuleKeyPair defaultRuleKey=generateRuleKey(ruleKeyBuilderFactory,new Archive(params,DEFAULT_ARCHIVER,DEFAULT_OUTPUT,DEFAULT_INPUTS));
  RuleKey.Builder.RuleKeyPair archiverChange=generateRuleKey(ruleKeyBuilderFactory,new Archive(params,Paths.get("different"),DEFAULT_OUTPUT,DEFAULT_INPUTS));
  assertNotEquals(defaultRuleKey,archiverChange);
  RuleKey.Builder.RuleKeyPair outputChange=generateRuleKey(ruleKeyBuilderFactory,new Archive(params,DEFAULT_ARCHIVER,Paths.get("different"),DEFAULT_INPUTS));
  assertNotEquals(defaultRuleKey,outputChange);
  RuleKey.Builder.RuleKeyPair inputChange=generateRuleKey(ruleKeyBuilderFactory,new Archive(params,DEFAULT_ARCHIVER,DEFAULT_OUTPUT,ImmutableList.<SourcePath>of(new TestSourcePath("different"))));
  assertNotEquals(defaultRuleKey,inputChange);
}
