{
  Path path=Paths.get(workingDir.isPresent() ? sanitizer.restore(workingDir,original) : original);
  String result=Optional.fromNullable(replacementPaths.get(path)).transform(Escaper.PATH_FOR_C_INCLUDE_STRING_ESCAPER).or(Escaper.escapePathForCIncludeString(path));
  if (absolutifier.isPresent()) {
    result=Preconditions.checkNotNull(absolutifier.get().apply(Paths.get(result))).toString();
  }
  return result;
}
