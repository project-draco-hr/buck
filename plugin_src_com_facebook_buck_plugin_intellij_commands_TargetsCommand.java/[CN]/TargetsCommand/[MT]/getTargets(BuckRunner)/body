{
  try {
    int exitCode=buckRunner.execute("targets","--json");
    if (exitCode != 0) {
      throw new RuntimeException(buckRunner.getStderr());
    }
    ObjectMapper mapper=new ObjectMapper();
    JsonFactory factory=mapper.getJsonFactory();
    JsonParser parser=factory.createJsonParser(buckRunner.getStdout());
    JsonNode jsonNode=mapper.readTree(parser);
    if (!jsonNode.isArray()) {
      throw new IllegalStateException();
    }
    ImmutableList.Builder<BuckTarget> builder=ImmutableList.builder();
    for (    JsonNode target : jsonNode) {
      if (!target.isObject()) {
        throw new IllegalStateException();
      }
      String basePath=target.get("buck.base_path").asText();
      String name=target.get("name").asText();
      String type=target.get("type").asText();
      builder.add(new BuckTarget(type,name,basePath));
    }
    return builder.build();
  }
 catch (  IOException e) {
    LOG.error(e);
  }
catch (  RuntimeException e) {
    LOG.error(e);
  }
  return ImmutableList.of();
}
