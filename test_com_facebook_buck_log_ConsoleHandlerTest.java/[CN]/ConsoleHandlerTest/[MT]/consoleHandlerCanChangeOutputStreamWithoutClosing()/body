{
  FakeOutputStream outputStream1=new FakeOutputStream();
  FakeOutputStream outputStream2=new FakeOutputStream();
  ConsoleHandler handler=new ConsoleHandler(outputStream1,new MessageOnlyFormatter(),Level.INFO);
  publishAndFlush(handler,new LogRecord(Level.INFO,"Stream 1"));
  assertThat(outputStream1.toString("UTF-8"),equalTo("Stream 1"));
  handler.setOutputStream(outputStream2);
  assertThat(outputStream1.isClosed(),equalTo(false));
  publishAndFlush(handler,new LogRecord(Level.INFO,"Stream 2"));
  assertThat(outputStream1.toString("UTF-8"),equalTo("Stream 1"));
  assertThat(outputStream2.toString("UTF-8"),equalTo("Stream 2"));
  handler.setOutputStream(outputStream1);
  assertThat(outputStream2.isClosed(),equalTo(false));
  publishAndFlush(handler,new LogRecord(Level.INFO," - DONE"));
  assertThat(outputStream1.toString("UTF-8"),equalTo("Stream 1 - DONE"));
  assertThat(outputStream2.toString("UTF-8"),equalTo("Stream 2"));
}
