{
  if (!isBuildTimeDownloadingOk) {
    throw new HumanReadableException("Downloading files at runtime is disabled, please run 'buck fetch' before your build");
  }
  ImmutableList.Builder<Step> steps=ImmutableList.builder();
  Path tempFile=BuildTargets.getBinPath(getBuildTarget(),String.format("%%s/%s",output.getFileName()));
  steps.add(new MakeCleanDirectoryStep(tempFile.getParent()));
  steps.add(new DownloadStep(downloader,uri,sha1,tempFile));
  steps.add(new MakeCleanDirectoryStep(output.getParent()));
  steps.add(CopyStep.forFile(tempFile,output));
  return steps.build();
}
