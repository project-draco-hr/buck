{
  FakeProjectFilesystem projectFilesystem=new FakeProjectFilesystem();
  FileHashCache fileHashCache=new DefaultFileHashCache(projectFilesystem);
  SourcePathResolver resolver=new SourcePathResolver(new BuildRuleResolver(TargetGraph.EMPTY,new DefaultTargetNodeToBuildRuleTransformer()));
  return new RuleKeyBuilder(resolver,new DefaultFileHashCache(projectFilesystem),new DefaultRuleKeyBuilderFactory(fileHashCache,resolver));
}
