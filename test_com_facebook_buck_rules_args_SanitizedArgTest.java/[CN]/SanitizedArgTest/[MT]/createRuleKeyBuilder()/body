{
  FakeProjectFilesystem projectFilesystem=new FakeProjectFilesystem();
  FileHashCache fileHashCache=new DefaultFileHashCache(projectFilesystem);
  SourcePathResolver resolver=new SourcePathResolver(new BuildRuleResolver());
  return new RuleKeyBuilder(resolver,new DefaultFileHashCache(projectFilesystem),new DefaultRuleKeyBuilderFactory(fileHashCache,resolver));
}
