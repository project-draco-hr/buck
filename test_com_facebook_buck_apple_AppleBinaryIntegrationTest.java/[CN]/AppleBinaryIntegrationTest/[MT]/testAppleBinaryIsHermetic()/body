{
  assumeTrue(Platform.detect() == Platform.MACOS);
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"apple_binary_is_hermetic",tmp);
  workspace.setUp();
  ProjectWorkspace.ProcessResult first=workspace.runBuckCommand(workspace.getPath("first"),"build","//Apps/TestApp:TestApp#iphonesimulator-x86_64");
  first.assertSuccess();
  ProjectWorkspace.ProcessResult second=workspace.runBuckCommand(workspace.getPath("second"),"build","//Apps/TestApp:TestApp#iphonesimulator-x86_64");
  second.assertSuccess();
  MoreAsserts.assertContentsEqual(workspace.getPath("first/buck-out/gen/Apps/TestApp/" + "TestApp#compile-" + sanitize("TestClass.m.o") + ",iphonesimulator-x86_64/"+ "TestClass.m.o"),workspace.getPath("second/buck-out/gen/Apps/TestApp/" + "TestApp#compile-" + sanitize("TestClass.m.o") + ",iphonesimulator-x86_64/"+ "TestClass.m.o"));
  MoreAsserts.assertContentsEqual(workspace.getPath("first/buck-out/gen/Apps/TestApp/TestApp#iphonesimulator-x86_64"),workspace.getPath("second/buck-out/gen/Apps/TestApp/TestApp#iphonesimulator-x86_64"));
}
