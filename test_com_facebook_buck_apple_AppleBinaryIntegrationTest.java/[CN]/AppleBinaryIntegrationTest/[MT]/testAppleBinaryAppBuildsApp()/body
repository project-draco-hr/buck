{
  assumeTrue(Platform.detect() == Platform.MACOS);
  ProjectWorkspace workspace=TestDataHelper.createProjectWorkspaceForScenario(this,"apple_binary_builds_something",tmp);
  workspace.setUp();
  BuildTarget target=BuildTargetFactory.newInstance("//Apps/TestApp:TestApp#app");
  workspace.runBuckCommand("build",target.getFullyQualifiedName()).assertSuccess();
  BuildTarget appTarget=target.withFlavors(AppleBinaryDescription.APP_FLAVOR,AppleDescriptions.NO_INCLUDE_FRAMEWORKS_FLAVOR);
  Path outputPath=workspace.getPath(BuildTargets.getGenPath(appTarget,"%s").resolve(appTarget.getShortName() + ".app"));
  assertThat(Files.exists(outputPath),is(true));
  assertThat(workspace.runCommand("file",outputPath.resolve(appTarget.getShortName()).toString()).getStdout().get(),containsString("executable"));
}
