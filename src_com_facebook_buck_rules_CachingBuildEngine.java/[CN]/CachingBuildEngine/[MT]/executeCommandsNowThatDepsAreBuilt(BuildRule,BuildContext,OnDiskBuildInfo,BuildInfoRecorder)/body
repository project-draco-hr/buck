{
  LOG.debug("Building locally: %s",rule);
  BuildableContext buildableContext=new DefaultBuildableContext(onDiskBuildInfo,buildInfoRecorder);
  List<Step> steps=rule.getBuildSteps(context,buildableContext);
  AbiRule abiRule=checkIfRuleOrBuildableIsAbiRule(rule);
  if (abiRule != null) {
    buildableContext.addMetadata(ABI_KEY_FOR_DEPS_ON_DISK_METADATA,abiRule.getAbiKeyForDeps().getHash());
  }
  StepRunner stepRunner=context.getStepRunner();
  for (  Step step : steps) {
    stepRunner.runStepForBuildTarget(step,rule.getBuildTarget());
    if (Thread.interrupted()) {
      Thread.currentThread().interrupt();
      throw new InterruptedException();
    }
  }
  LOG.debug("Build completed: %s",rule);
}
