{
  LOG.debug("Building locally: %s",rule);
  @SuppressWarnings("PMD.PrematureDeclaration") long start=System.nanoTime();
  List<Step> steps=rule.getBuildSteps(context,buildableContext);
  AbiRule abiRule=checkIfRuleOrBuildableIsAbiRule(rule);
  if (abiRule != null) {
    buildableContext.addMetadata(ABI_KEY_FOR_DEPS_ON_DISK_METADATA,abiRule.getAbiKeyForDeps().getHash());
  }
  StepRunner stepRunner=context.getStepRunner();
  Optional<BuildTarget> optionalTarget=Optional.of(rule.getBuildTarget());
  for (  Step step : steps) {
    stepRunner.runStepForBuildTarget(step,optionalTarget);
    if (Thread.interrupted()) {
      Thread.currentThread().interrupt();
      throw new InterruptedException();
    }
  }
  long end=System.nanoTime();
  LOG.debug("Build completed: %s %s (%dns)",rule.getType(),rule.getFullyQualifiedName(),end - start);
}
