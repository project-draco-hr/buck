{
  this.service=service;
  this.fileHashCache=fileHashCache;
  this.buildMode=buildMode;
  this.depFiles=depFiles;
  ImmutableMap.Builder<ProjectFilesystem,RuleKeyFactories> factories=ImmutableMap.builder();
  for (  Map.Entry<ProjectFilesystem,BuildRuleResolver> entry : pathResolver.entrySet()) {
    factories.put(entry.getKey(),RuleKeyFactories.build(fileHashCache,entry.getKey(),entry.getValue()));
  }
  this.ruleKeyFactories=factories.build();
}
