{
  this.service=service;
  this.buildMode=buildMode;
  this.dependencySchedulingOrder=dependencySchedulingOrder;
  this.depFiles=depFiles;
  this.pathResolver=new SourcePathResolver(resolver);
  this.fileHashCaches=createFileHashCacheLoader(fileHashCache);
  this.ruleKeyFactories=CacheBuilder.newBuilder().build(new CacheLoader<ProjectFilesystem,RuleKeyFactories>(){
    @Override public RuleKeyFactories load(    ProjectFilesystem filesystem) throws Exception {
      return RuleKeyFactories.build(fileHashCaches.get(filesystem),resolver);
    }
  }
);
}
