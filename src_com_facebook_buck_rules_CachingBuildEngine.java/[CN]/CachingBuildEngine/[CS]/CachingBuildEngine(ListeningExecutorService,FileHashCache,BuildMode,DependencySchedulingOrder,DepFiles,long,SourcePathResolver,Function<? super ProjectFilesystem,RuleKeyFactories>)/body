{
  this.service=service;
  this.buildMode=buildMode;
  this.dependencySchedulingOrder=dependencySchedulingOrder;
  this.depFiles=depFiles;
  this.maxDepFileCacheEntries=maxDepFileCacheEntries;
  this.pathResolver=pathResolver;
  this.fileHashCaches=createFileHashCacheLoader(fileHashCache);
  this.ruleKeyFactories=CacheBuilder.newBuilder().build(new CacheLoader<ProjectFilesystem,RuleKeyFactories>(){
    @Override public RuleKeyFactories load(    @Nonnull ProjectFilesystem filesystem) throws Exception {
      return ruleKeyFactoriesFunction.apply(filesystem);
    }
  }
);
}
