{
  StringBuilder report=new StringBuilder();
  for (  Map.Entry<BuildRule,Optional<BuildResult>> entry : ruleToResult.entrySet()) {
    BuildRule rule=entry.getKey();
    Optional<BuildRuleSuccessType> success=entry.getValue().transform(BuildResult.RULE_TO_SUCCESS);
    String successIndicator;
    String successType;
    Path outputFile;
    if (success.isPresent()) {
      successIndicator=ansi.asHighlightedSuccessText("OK  ");
      successType=success.get().name();
      outputFile=rule.getPathToOutputFile();
    }
 else {
      successIndicator=ansi.asHighlightedFailureText("FAIL");
      successType=null;
      outputFile=null;
    }
    report.append(String.format("%s %s%s%s\n",successIndicator,rule.getBuildTarget(),successType != null ? " " + successType : "",outputFile != null ? " " + outputFile : ""));
  }
  return report.toString();
}
