{
  StringBuilder report=new StringBuilder();
  for (  Map.Entry<BuildRule,Optional<BuildResult>> entry : ruleToResult.entrySet()) {
    BuildRule rule=entry.getKey();
    Optional<BuildRuleSuccessType> success=Optional.absent();
    Optional<BuildResult> result=entry.getValue();
    if (result.isPresent()) {
      success=Optional.fromNullable(result.get().getSuccess());
    }
    String successIndicator;
    String successType;
    Path outputFile;
    if (success.isPresent()) {
      successIndicator=ansi.asHighlightedSuccessText("OK  ");
      successType=success.get().name();
      outputFile=rule.getPathToOutput();
    }
 else {
      successIndicator=ansi.asHighlightedFailureText("FAIL");
      successType=null;
      outputFile=null;
    }
    report.append(String.format("%s %s%s%s\n",successIndicator,rule.getBuildTarget(),successType != null ? " " + successType : "",outputFile != null ? " " + outputFile : ""));
  }
  return report.toString();
}
