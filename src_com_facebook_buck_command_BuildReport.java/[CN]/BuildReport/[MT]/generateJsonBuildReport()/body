{
  LinkedHashMap<String,Object> results=Maps.newLinkedHashMap();
  for (  Map.Entry<BuildRule,Optional<BuildRuleSuccess>> entry : ruleToResult.entrySet()) {
    BuildRule rule=entry.getKey();
    Optional<BuildRuleSuccess> success=entry.getValue();
    Map<String,Object> value=Maps.newLinkedHashMap();
    if (success.isPresent()) {
      value.put("success",true);
      value.put("type",success.get().getType().name());
      Path outputFile=rule.getPathToOutputFile();
      value.put("output",outputFile != null ? outputFile.toString() : null);
    }
 else {
      value.put("success",false);
    }
    results.put(rule.getFullyQualifiedName(),value);
  }
  Map<String,Object> report=Maps.newHashMap();
  report.put("results",results);
  ObjectMapper objectMapper=new ObjectMapper();
  objectMapper.enable(SerializationFeature.INDENT_OUTPUT);
  return objectMapper.writeValueAsString(report);
}
