{
  if (!(env instanceof BuckQueryEnvironment)) {
    throw new QueryException("The environment should be an instance of BuckQueryEnvironment");
  }
  try {
    ImmutableList<String> files=ImmutableList.of(args.get(0).getWord());
    BuckQueryEnvironment buckEnv=(BuckQueryEnvironment)env;
    AuditOwnerCommand.OwnersReport report=AuditOwnerCommand.buildOwnersReport(buckEnv.getParams(),buckEnv.getParserConfig(),buckEnv.getBuildFileTree(),files,false);
    return (Set<T>)Sets.newHashSet(Collections2.transform(report.owners.keySet(),new Function<TargetNode<?>,BuildTarget>(){
      @Override public BuildTarget apply(      TargetNode<?> input){
        return Preconditions.checkNotNull(input.getBuildTarget());
      }
    }
));
  }
 catch (  BuildFileParseException|BuildTargetException|IOException e) {
    throw new QueryException("Could not parse build targets.\n" + e.getMessage());
  }
}
