{
  ImmutableSet<String> files=ImmutableSet.of("/project/dir/res/values-da/strings.xml","/project/dir/res/values-da-rAB/strings.xml","/project/dir/dontmatch/res/values/strings.xml","/project/groupme/res/values-da/strings.xml","/project/groupmetoo/res/values-da-rAB/strings.xml","/project/foreveralone/res/values-es/strings.xml");
  ImmutableMultimap<String,String> groupedByLocale=createNonExecutingStep().groupFilesByLocale(files);
  ImmutableMultimap<String,String> expectedMap=ImmutableMultimap.<String,String>builder().putAll("da",ImmutableSet.<String>of("/project/dir/res/values-da/strings.xml","/project/groupme/res/values-da/strings.xml")).putAll("da_AB",ImmutableSet.<String>of("/project/dir/res/values-da-rAB/strings.xml","/project/groupmetoo/res/values-da-rAB/strings.xml")).putAll("es",ImmutableSet.<String>of("/project/foreveralone/res/values-es/strings.xml")).build();
  assertEquals("Incorrect grouping of files by locale.",expectedMap,groupedByLocale);
}
