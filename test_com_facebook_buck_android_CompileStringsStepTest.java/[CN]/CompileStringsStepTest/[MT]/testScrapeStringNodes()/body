{
  String xmlInput="<string name='name1'>Value1</string>" + "<string name='name2'>Value with space</string>" + "<string name='name3'>Value with \"quotes\"</string>"+ "<string name='name4'></string>"+ "<string name='name3'>IGNORE</string>"+ "<string name='name5'>Value with %1$s</string>";
  NodeList stringNodes=XmlDomParser.parse(createResourcesXml(xmlInput)).getElementsByTagName("string");
  Map<Integer,String> stringsMap=Maps.newHashMap();
  CompileStringsStep step=createNonExecutingStep();
  step.addResourceNameToIdMap(ImmutableMap.of("name1",1,"name2",2,"name3",3,"name4",4,"name5",5));
  step.scrapeStringNodes(stringNodes,stringsMap);
  assertEquals("Incorrect map of resource id to string values.",ImmutableMap.of(1,"Value1",2,"Value with space",3,"Value with \"quotes\"",4,"",5,"Value with %1$s"),stringsMap);
}
