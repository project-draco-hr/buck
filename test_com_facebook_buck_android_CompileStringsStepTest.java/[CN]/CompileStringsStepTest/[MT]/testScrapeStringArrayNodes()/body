{
  String xmlInput="<string-array name='name1'>" + "<item>Value12</item>" + "<item>Value11</item>"+ "</string-array>"+ "<string-array name='name2'>"+ "<item>Value21</item>"+ "</string-array>"+ "<string-array name='name3'></string-array>"+ "<string-array name='name2'>"+ "<item>ignored</item>"+ "</string-array>";
  NodeList arrayNodes=XmlDomParser.parse(createResourcesXml(xmlInput)).getElementsByTagName("string-array");
  Map<Integer,ImmutableList<String>> arraysMap=Maps.newTreeMap();
  CompileStringsStep step=createNonExecutingStep();
  step.addResourceNameToIdMap(ImmutableMap.of("name1",1,"name2",2,"name3",3));
  step.scrapeStringArrayNodes(arrayNodes,arraysMap);
  assertEquals("Incorrect map of resource id to string arrays.",ImmutableMap.of(1,ImmutableList.of("Value12","Value11"),2,ImmutableList.of("Value21")),arraysMap);
}
