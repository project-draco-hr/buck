{
  String xmlInput="<plurals name='name1'>" + "<item quantity='zero'>%d people saw this</item>" + "<item quantity='one'>%d person saw this</item>"+ "<item quantity='many'>%d people saw this</item>"+ "</plurals>"+ "<plurals name='name2'>"+ "<item quantity='zero'>%d people ate this</item>"+ "<item quantity='many'>%d people ate this</item>"+ "</plurals>"+ "<plurals name='name3'></plurals>"+ "<plurals name='name2'></plurals>";
  NodeList pluralsNodes=XmlDomParser.parse(createResourcesXml(xmlInput)).getElementsByTagName("plurals");
  Map<Integer,ImmutableMap<String,String>> pluralsMap=Maps.newHashMap();
  CompileStringsStep step=createNonExecutingStep();
  step.addPluralsResourceNameToIdMap(ImmutableMap.of("name1",1,"name2",2,"name3",3));
  step.scrapePluralsNodes(pluralsNodes,pluralsMap);
  assertEquals("Incorrect map of resource id to plural values.",ImmutableMap.of(1,ImmutableMap.of("zero","%d people saw this","one","%d person saw this","many","%d people saw this"),2,ImmutableMap.of("zero","%d people ate this","many","%d people ate this"),3,ImmutableMap.of()),pluralsMap);
}
