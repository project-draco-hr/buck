{
  if (path == null)   throw new IllegalArgumentException("null input: path");
  if (path.length == 0)   return IConstants.EMPTY_FILE_ARRAY;
  final List _result=new ArrayList(path.length);
  final Set pathnames=new HashSet(path.length);
  final String separators=",".concat(File.pathSeparator);
  for (int i=0; i < path.length; ++i) {
    String segment=path[i];
    if (segment == null)     throw new IllegalArgumentException("null input: path[" + i + "]");
    final StringTokenizer tokenizer=new StringTokenizer(segment,separators);
    while (tokenizer.hasMoreTokens()) {
      String pathname=tokenizer.nextToken();
      if (canonical)       pathname=canonicalizePathname(pathname);
      if (pathnames.add(pathname)) {
        _result.add(new File(pathname));
      }
    }
  }
  final File[] result=new File[_result.size()];
  _result.toArray(result);
  return result;
}
