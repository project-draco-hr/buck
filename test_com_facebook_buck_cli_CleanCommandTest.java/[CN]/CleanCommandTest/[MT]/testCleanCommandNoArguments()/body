{
  CleanCommand cleanCommand=createCommand();
  Capture<Path> binDir=new Capture<>();
  projectFilesystem.rmdir(capture(binDir));
  Capture<Path> genDir=new Capture<>();
  projectFilesystem.rmdir(capture(genDir));
  replayAll();
  CleanCommandOptions options=createOptionsFromArgs();
  int exitCode=cleanCommand.runCommandWithOptions(options);
  assertEquals(0,exitCode);
  assertEquals(BuckConstant.BIN_PATH,binDir.getValue());
  assertEquals(BuckConstant.GEN_PATH,genDir.getValue());
  verifyAll();
}
