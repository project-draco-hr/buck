{
  CommandRunnerParams params=createCommandRunnerParams();
  Capture<Path> binDir=newCapture();
  projectFilesystem.deleteRecursivelyIfExists(capture(binDir));
  Capture<Path> genDir=newCapture();
  projectFilesystem.deleteRecursivelyIfExists(capture(genDir));
  replayAll();
  CleanCommand cleanCommand=createCommandFromArgs();
  int exitCode=cleanCommand.run(params);
  assertEquals(0,exitCode);
  assertEquals(BuckConstant.SCRATCH_PATH,binDir.getValue());
  assertEquals(BuckConstant.GEN_PATH,genDir.getValue());
  verifyAll();
}
