{
  Path base;
  if (testTempDirOverride.isPresent()) {
    base=testTempDirOverride.get().resolve(getBuildTarget().getBasePath()).resolve(String.format("__java_test_%s_tmp__",getBuildTarget().getShortNameAndFlavorPostfix()));
    LOG.debug("Using overridden test temp dir base %s",base);
  }
 else {
    base=BuildTargets.getScratchPath(getProjectFilesystem(),getBuildTarget(),"__java_test_%s_tmp__");
    LOG.debug("Using standard test temp dir base %s",base);
  }
  return base;
}
