{
  Flavor hello=new Flavor("hello");
  Flavor goodbye=new Flavor("goodbye");
  FlavorDomain<String> domain=new FlavorDomain<>("test",ImmutableMap.of(hello,"something",goodbye,"something"));
  BuildTarget target=BuildTargets.extendFlavoredBuildTarget(BuildTargetFactory.newInstance("//:test"),ImmutableSet.of(hello,goodbye));
  try {
    domain.getFlavor(target.getFlavors());
    fail("should have thrown");
  }
 catch (  FlavorDomainException e) {
    assertTrue(e.getMessage().contains("multiple \"test\" flavors"));
  }
}
