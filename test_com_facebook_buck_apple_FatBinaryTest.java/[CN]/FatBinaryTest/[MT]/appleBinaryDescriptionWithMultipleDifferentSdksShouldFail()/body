{
  BuildRuleResolver resolver=new BuildRuleResolver(TargetGraph.EMPTY,new BuildTargetNodeToBuildRuleTransformer());
  HumanReadableException exception=null;
  try {
    AppleBinaryBuilder.createBuilder(BuildTargetFactory.newInstance("//foo:xctest#iphoneos-i386,macosx-x86_64")).build(resolver);
  }
 catch (  HumanReadableException e) {
    exception=e;
  }
  assertThat(exception,notNullValue());
  assertThat("Should throw exception about different architectures",exception.getHumanReadableErrorMessage(),endsWith("Fat binaries can only be generated from binaries compiled for the same SDK."));
}
