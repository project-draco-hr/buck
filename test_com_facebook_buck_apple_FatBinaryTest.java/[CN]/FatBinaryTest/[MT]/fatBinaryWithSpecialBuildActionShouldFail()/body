{
  BuildRuleResolver resolver=new BuildRuleResolver();
  HumanReadableException exception=null;
  Iterable<Flavor> forbiddenFlavors=ImmutableList.of(CxxInferEnhancer.INFER,CxxInferEnhancer.INFER_ANALYZE,CxxCompilationDatabase.COMPILATION_DATABASE);
  for (  Flavor flavor : forbiddenFlavors) {
    try {
      AppleBinaryBuilder.createBuilder(BuildTarget.builder("//foo","xctest").addFlavors(ImmutableFlavor.of("iphoneos-i386"),ImmutableFlavor.of("iphoneos-x86_64"),ImmutableFlavor.of(flavor.toString())).build()).build(resolver);
    }
 catch (    HumanReadableException e) {
      exception=e;
    }
    assertThat(exception,notNullValue());
    assertThat("Should throw exception about special build actions.",exception.getHumanReadableErrorMessage(),endsWith("Fat binaries is only supported when building an actual binary."));
  }
}
