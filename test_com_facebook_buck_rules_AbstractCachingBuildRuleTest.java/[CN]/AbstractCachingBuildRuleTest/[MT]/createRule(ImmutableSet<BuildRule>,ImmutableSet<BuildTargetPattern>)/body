{
  Comparator<BuildRule> comparator=RetainOrderComparator.createComparator(deps);
  ImmutableSortedSet<BuildRule> sortedDeps=ImmutableSortedSet.copyOf(comparator,deps);
  CachingBuildRuleParams cachingBuildRuleParams=new CachingBuildRuleParams(buildTarget,sortedDeps,visibilityPatterns,artifactCache);
  return new AbstractCachingBuildRule(cachingBuildRuleParams){
    @Override public BuildRuleType getType(){
      throw new IllegalStateException("This method should not be called");
    }
    @Override protected Iterable<String> getInputsToCompareToOutput(    BuildContext context){
      List<String> inputs=Lists.newArrayList();
      for (      BuildTarget inputTarget : inputTargets) {
        inputs.add(inputTarget.getBasePath());
      }
      return inputs;
    }
    @Override protected List<Step> buildInternal(    BuildContext context) throws IOException {
      throw new IllegalStateException("This method should not be called");
    }
  }
;
}
