{
  Preconditions.checkNotNull(from);
  Preconditions.checkArgument(from.isEmpty() || from.endsWith("/"),"Directory path must either be the empty string or end with a slash");
  Preconditions.checkNotNull(to);
  if (from.isEmpty()) {
    return to;
  }
  int samePrefixIndex=0;
  while (true) {
    int slashIndex=from.indexOf('/',samePrefixIndex);
    if (slashIndex < 0) {
      break;
    }
    int indexIncludingSlash=slashIndex + 1;
    if (indexIncludingSlash > to.length()) {
      break;
    }
    String fromPathElement=from.substring(samePrefixIndex,indexIncludingSlash);
    String toPathElement=to.substring(samePrefixIndex,indexIncludingSlash);
    if (fromPathElement.equals(toPathElement)) {
      samePrefixIndex=indexIncludingSlash;
    }
 else {
      break;
    }
  }
  int directoryDepth=0;
  for (int charIndex=samePrefixIndex + 1; charIndex < from.length(); charIndex++) {
    if (from.charAt(charIndex) == '/') {
      directoryDepth++;
    }
  }
  return Strings.repeat("../",directoryDepth) + to.substring(samePrefixIndex);
}
