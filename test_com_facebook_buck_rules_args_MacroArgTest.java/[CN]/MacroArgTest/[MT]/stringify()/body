{
  MacroHandler macroHandler=new MacroHandler(ImmutableMap.<String,MacroExpander>of("macro",new StringExpander("expanded")));
  BuildRuleResolver resolver=new BuildRuleResolver(TargetGraph.EMPTY,new BuildTargetNodeToBuildRuleTransformer());
  ProjectFilesystem filesystem=new FakeProjectFilesystem();
  MacroArg arg=new MacroArg(macroHandler,BuildTargetFactory.newInstance("//:rule"),TestCellBuilder.createCellRoots(filesystem),resolver,filesystem,"$(macro)");
  assertThat(arg.stringify(),Matchers.equalTo("expanded"));
}
