{
  BuildRule rule=generateFakeBuildRule();
  BuildRuleEvent.Started event=BuildRuleEvent.started(rule,new FakeRuleKeyBuilderFactory(ImmutableMap.of(rule.getBuildTarget(),new RuleKey("aaaa"))));
  event.configure(timestamp,nanoTime,threadId,buildId);
  String message=new ObjectMapper().writeValueAsString(event);
  assertJsonEquals("{\"timestamp\":%d,\"nanoTime\":%d,\"threadId\":%d,\"buildId\":\"%s\"," + "\"buildRule\":{\"type\":\"fake_build_rule\",\"name\":\"//fake:rule\"}," + "\"ruleKeySafe\":\"aaaa\",\"type\":\"BuildRuleStarted\","+ "\"eventKey\":{\"value\":1024186770}}",message);
}
