{
  ImmutableBiMap.Builder<String,String> filteredResourcesDirMapBuilder=ImmutableBiMap.builder();
  String resDestinationBasePath=getBinPath("__filtered__%s__");
  int count=0;
  for (  String resDir : resourceDirectories) {
    filteredResourcesDirMapBuilder.put(resDir,Paths.get(resDestinationBasePath,String.valueOf(count++)).toString());
  }
  ImmutableBiMap<String,String> resSourceToDestDirMap=filteredResourcesDirMapBuilder.build();
  FilterResourcesStep.Builder filterResourcesStepBuilder=FilterResourcesStep.builder().setInResToOutResDirMap(resSourceToDestDirMap).setResourceFilter(resourceFilter);
  if (isStoreStringsAsAssets()) {
    filterResourcesStepBuilder.enableStringsFilter();
  }
  return filterResourcesStepBuilder.build();
}
