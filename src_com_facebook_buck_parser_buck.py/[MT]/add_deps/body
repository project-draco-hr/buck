@provide_for_build
def add_deps(name, deps=[], build_env=None):
    assert (build_env.type == BuildContextType.BUILD_FILE), 'Cannot use `add_deps()` at the top-level of an included file.'
    if (name not in build_env.rules):
        raise ValueError(("Invoked 'add_deps' on non-existent rule %s." % name))
    rule = build_env.rules[name]
    if ('deps' not in rule):
        raise ValueError(("Invoked 'add_deps' on rule %s that has no 'deps' field" % name))
    rule['deps'] = (rule['deps'] + deps)
