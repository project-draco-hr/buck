{
  ImmutableList.Builder<BuildRule> builder=ImmutableList.builder();
  ImmutableList<CxxPreprocessorInput> inputs=getCxxPreprocessorInput();
  for (  CxxPreprocessorInput input : inputs) {
    builder.addAll(getPathResolver().filterBuildRuleInputs(ImmutableList.<SourcePath>builder().addAll(input.getIncludes().getNameToPathMap().values()).build()));
    builder.addAll(BuildRules.toBuildRulesFor(getParams().getBuildTarget(),getResolver(),input.getRules()));
  }
  return builder.build();
}
