{
  ProjectFilesystem projectFilesystem=new FakeProjectFilesystem();
  BuildRule libraryRule=JavaLibraryBuilder.createBuilder(BuildTarget.builder("//java/src/com/bar","bar").build()).build(new BuildRuleResolver());
  return AndroidLibraryBuilder.createBuilder(BuildTargetFactory.newInstance("//java/src/com/foo:foo")).addSrc(Paths.get("java/src/com/foo/Foo.java")).setManifestFile(new PathSourcePath(projectFilesystem,Paths.get("java/src/com/foo/AndroidManifest.xml"))).addExportedDep(libraryRule.getBuildTarget()).addDep(libraryRule.getBuildTarget()).build(ruleResolver);
}
