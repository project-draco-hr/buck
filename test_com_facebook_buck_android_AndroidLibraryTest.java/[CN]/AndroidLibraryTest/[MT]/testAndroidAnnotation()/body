{
  BuildRuleResolver ruleResolver=new BuildRuleResolver();
  BuildTarget processorTarget=BuildTargetFactory.newInstance("//java/processor:processor");
  BuildRule processorRule=JavaLibraryBuilder.createBuilder(processorTarget).addSrc(Paths.get("java/processor/processor.java")).build(ruleResolver);
  BuildTarget libTarget=BuildTargetFactory.newInstance("//java/lib:lib");
  BuildRule rule=AndroidLibraryBuilder.createBuilder(libTarget).addProcessor("MyProcessor").addProcessorBuildTarget(processorRule).build(ruleResolver);
  AndroidLibrary library=(AndroidLibrary)rule.getBuildable();
  AnnotationProcessingData processingData=library.getAnnotationProcessingData();
  assertNotNull(processingData.getGeneratedSourceFolderName());
}
