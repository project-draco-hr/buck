{
  Preconditions.checkNotNull(buildTargetFromCommandLine);
  if (buildTargetFromCommandLine.startsWith("//:")) {
    return buildTargetFromCommandLine;
  }
  String target=buildTargetFromCommandLine;
  int colonIndex=target.indexOf(':');
  if (colonIndex < 0) {
    if (target.endsWith("/")) {
      target=target.substring(0,target.length() - 1);
    }
    int lastSlashIndex=target.lastIndexOf('/');
    if (lastSlashIndex < 0) {
      target=target + ':' + target;
    }
 else {
      target=target + ':' + target.substring(lastSlashIndex + 1);
    }
  }
 else   if (colonIndex != 0) {
    char charBeforeColon=target.charAt(colonIndex - 1);
    if (charBeforeColon == '/') {
      target=target.substring(0,colonIndex - 1) + target.substring(colonIndex);
    }
  }
  if (!target.startsWith("//")) {
    target="//" + target;
  }
  return target;
}
