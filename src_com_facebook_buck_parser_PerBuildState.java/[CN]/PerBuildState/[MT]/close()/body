{
  stdout.close();
  stderr.close();
  BuildFileParseException lastSeen=null;
  try {
    closer.close();
  }
 catch (  IOException e) {
    if (e.getCause() instanceof BuildFileParseException) {
      lastSeen=(BuildFileParseException)e.getCause();
    }
    if (e.getCause() instanceof InterruptedException) {
      throw (InterruptedException)e.getCause();
    }
    Throwables.propagate(e);
  }
  LOG.debug("Cleaning cache of build files with inputs under symlink %s",buildInputPathsUnderSymlink);
  Set<Path> buildInputPathsUnderSymlinkCopy=new HashSet<>(buildInputPathsUnderSymlink);
  buildInputPathsUnderSymlink.clear();
  for (  Path buildFilePath : buildInputPathsUnderSymlinkCopy) {
    permState.invalidatePath(buildFilePath);
  }
  if (lastSeen != null) {
    throw lastSeen;
  }
}
