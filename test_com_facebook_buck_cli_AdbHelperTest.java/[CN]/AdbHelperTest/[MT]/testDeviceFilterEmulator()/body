{
  InstallCommandOptions options=getOptions(TargetDeviceOptions.EMULATOR_MODE_SHORT_ARG);
  IDevice[] devices=new IDevice[]{createEmulator("1",IDevice.DeviceState.ONLINE),createRealDevice("2",IDevice.DeviceState.ONLINE)};
  List<IDevice> filteredDevices=adbHelper.filterDevices(devices,options.adbOptions(),options.targetDeviceOptions());
  assertNotNull(filteredDevices);
  assertEquals(1,filteredDevices.size());
  assertSame(devices[0],filteredDevices.get(0));
}
