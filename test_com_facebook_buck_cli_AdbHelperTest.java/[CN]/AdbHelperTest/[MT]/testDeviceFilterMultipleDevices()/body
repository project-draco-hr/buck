{
  IDevice[] devices=new IDevice[]{createEmulator("1",IDevice.DeviceState.ONLINE),createEmulator("2",IDevice.DeviceState.ONLINE),createRealDevice("4",IDevice.DeviceState.ONLINE),createRealDevice("5",IDevice.DeviceState.ONLINE)};
  InstallCommandOptions options=getOptions();
  assertNull(adbHelper.filterDevices(devices,options.adbOptions(),options.targetDeviceOptions()));
  options=getOptions(AdbOptions.MULTI_INSTALL_MODE_SHORT_ARG);
  List<IDevice> filteredDevices=adbHelper.filterDevices(devices,options.adbOptions(),options.targetDeviceOptions());
  assertNotNull(filteredDevices);
  assertEquals(devices.length,filteredDevices.size());
}
