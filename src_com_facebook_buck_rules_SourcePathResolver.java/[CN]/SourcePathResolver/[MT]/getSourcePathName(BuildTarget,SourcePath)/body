{
  if (sourcePath instanceof BuildRuleSourcePath) {
    return getNameForRule(((BuildRuleSourcePath)sourcePath).getRule());
  }
  Preconditions.checkArgument(sourcePath instanceof PathSourcePath);
  Path path=((PathSourcePath)sourcePath).getRelativePath();
  return MorePaths.relativize(target.getBasePath(),path).toString();
}
