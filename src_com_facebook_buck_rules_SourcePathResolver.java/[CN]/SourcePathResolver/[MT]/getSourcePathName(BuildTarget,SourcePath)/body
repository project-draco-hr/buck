{
  if (sourcePath instanceof BuildTargetSourcePath) {
    return getNameForRule(ruleResolver.getRule(((BuildTargetSourcePath)sourcePath).getTarget()));
  }
  Preconditions.checkArgument(sourcePath instanceof PathSourcePath);
  Path path=((PathSourcePath)sourcePath).getRelativePath();
  return MorePaths.relativize(target.getBasePath(),path).toString();
}
