{
  if (showBuildID) {
    m_out.println(IAppConstants.APP_USAGE_BUILD_ID);
  }
  if (msg != null) {
    m_out.print(toolNameToCommandName(m_usageToolName) + ": ");
    m_out.println(msg);
  }
  if (rc != RC_OK) {
    if (m_exit) {
      if (t != null)       t.printStackTrace(m_out);
      System.exit(rc);
    }
 else {
      if (t instanceof EMMARuntimeException)       throw (EMMARuntimeException)t;
 else       if (t != null)       throw msg != null ? new EMMARuntimeException(msg,t) : new EMMARuntimeException("unexpected failure: ",t);
    }
  }
 else {
    if (m_exit) {
      System.exit(0);
    }
  }
}
