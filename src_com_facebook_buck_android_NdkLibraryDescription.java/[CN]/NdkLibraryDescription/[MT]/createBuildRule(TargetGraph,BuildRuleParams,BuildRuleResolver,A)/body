{
  Pair<BuildRule,Iterable<BuildRule>> makefilePair=generateMakefile(targetGraph,params,resolver);
  resolver.addToIndex(makefilePair.getFirst());
  return new NdkLibrary(params.appendExtraDeps(ImmutableSortedSet.<BuildRule>naturalOrder().add(makefilePair.getFirst()).addAll(makefilePair.getSecond()).build()),new SourcePathResolver(resolver),getGeneratedMakefilePath(params.getBuildTarget()),findSources(params.getProjectFilesystem(),params.getBuildTarget().getBasePath()),args.flags.get(),args.isAsset.or(false),ndkVersion,MACRO_HANDLER.getExpander(params.getBuildTarget(),resolver,params.getProjectFilesystem()));
}
