{
  Optional<BuildRule> buildRule=resolver.getRule(path);
  if (buildRule.isPresent()) {
    return setVal(buildRule.get().getRuleKey());
  }
 else {
    Optional<Path> relativePath=resolver.getRelativePath(path);
    Preconditions.checkState(relativePath.isPresent());
    return setInputVal(relativePath.get());
  }
}
