{
  Object ref=path.asReference();
  if (ref instanceof BuildRule) {
    return setVal(((BuildRule)ref).getRuleKey());
  }
 else {
    Preconditions.checkArgument(ref instanceof Path);
    return setInputVal((Path)ref);
  }
}
