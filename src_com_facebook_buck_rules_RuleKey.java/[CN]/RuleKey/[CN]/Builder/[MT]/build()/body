{
  RuleKey ruleKeyWithoutDeps=new RuleKey(hasher.hash());
  if (logElms != null) {
    logger.verbose("RuleKey (without deps) %s=%s",ruleKeyWithoutDeps,Joiner.on("").join(logElms));
  }
  setReflectively("deps",deps);
  if (!exportedDeps.isEmpty()) {
    setReflectively("exported_deps",exportedDeps);
  }
  RuleKey totalRuleKey=new RuleKey(hasher.hash());
  if (logElms != null) {
    logger.verbose("RuleKey %s=%s",totalRuleKey,Joiner.on("").join(logElms));
  }
  return RuleKeyPair.of(totalRuleKey,ruleKeyWithoutDeps);
}
