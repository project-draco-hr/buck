{
  RuleKey ruleKeyWithoutDeps=new RuleKey(hasher.hash());
  setKey("deps");
  for (  BuildRule buildRule : rule.getDeps()) {
    setVal(buildRule.getRuleKey());
  }
  separate();
  Buildable buildable=rule.getBuildable();
  if (buildable instanceof ExportDependencies) {
    setKey("exported_deps");
    for (    BuildRule buildRule : ((ExportDependencies)buildable).getExportedDeps()) {
      setVal(buildRule.getRuleKey());
    }
    separate();
  }
  RuleKey totalRuleKey=new RuleKey(hasher.hash());
  if (logElms != null) {
    logger.info(String.format("RuleKey %s=%s",totalRuleKey,Joiner.on("").join(logElms)));
  }
  return new RuleKeyPair(totalRuleKey,ruleKeyWithoutDeps);
}
