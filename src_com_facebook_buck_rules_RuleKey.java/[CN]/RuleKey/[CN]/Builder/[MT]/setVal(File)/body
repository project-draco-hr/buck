{
  if (file != null) {
    Path path=file.toPath();
    HashCode fileSha1=null;
    if (hashCache.contains(path)) {
      fileSha1=hashCache.get(path);
    }
 else {
      InputSupplier<? extends InputStream> inputSupplier=Files.newInputStreamSupplier(file);
      fileSha1=ByteStreams.hash(inputSupplier,Hashing.sha1());
      hashCache.put(path,fileSha1);
    }
    if (logElms != null) {
      logElms.add(String.format("file(path=\"%s\", sha1=%s):",file.getPath(),fileSha1.toString()));
    }
    feed(fileSha1.asBytes());
  }
  return separate();
}
