{
  ImmutableSortedSet<BuildRule> exportedDeps;
  if (rule instanceof ExportDependencies) {
    exportedDeps=((ExportDependencies)rule).getExportedDeps();
  }
 else {
    exportedDeps=ImmutableSortedSet.of();
  }
  return builder(rule.getBuildTarget(),rule.getType(),resolver,rule.getDeps(),exportedDeps,hashCache);
}
