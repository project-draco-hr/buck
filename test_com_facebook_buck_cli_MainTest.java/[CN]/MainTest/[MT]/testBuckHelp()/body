{
  CapturingPrintStream stdErr=new CapturingPrintStream();
  Main main=new Main(stdOut,stdErr);
  int exitCode=main.runMainWithExitCode(new BuildId(),new File("."),Optional.<NGContext>absent(),"--help");
  assertEquals(1,exitCode);
  assertEquals("Users instinctively try running `buck --help`, so it should print usage info.",getUsageString(),stdErr.getContentsAsString(Charsets.US_ASCII));
}
