{
  ImmutableSet.Builder<BuildTarget> targets=ImmutableSet.builder();
  for (  TargetNode<?> node : nodes) {
    if (predicate.isMatch(node.getRuleFactoryParams().getInstance(),node.getDescription().getBuildRuleType(),node.getBuildTarget())) {
      targets.add(node.getBuildTarget());
    }
  }
  return targets.build();
}
