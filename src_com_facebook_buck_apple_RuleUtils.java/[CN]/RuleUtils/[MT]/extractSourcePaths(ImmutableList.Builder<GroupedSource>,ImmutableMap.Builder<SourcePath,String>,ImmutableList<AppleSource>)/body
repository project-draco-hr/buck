{
  for (  AppleSource item : items) {
switch (item.getType()) {
case SOURCE_PATH:
      outputSources.add(GroupedSource.ofSourcePath(item.getSourcePath()));
    break;
case SOURCE_PATH_WITH_FLAGS:
  Pair<SourcePath,String> pair=item.getSourcePathWithFlags();
outputSources.add(GroupedSource.ofSourcePath(pair.getFirst()));
outputPerFileFlags.put(pair.getFirst(),pair.getSecond());
break;
case SOURCE_GROUP:
Pair<String,ImmutableList<AppleSource>> sourceGroup=item.getSourceGroup();
String sourceGroupName=sourceGroup.getFirst();
ImmutableList<AppleSource> sourceGroupItems=sourceGroup.getSecond();
ImmutableList.Builder<GroupedSource> nestedSourceGroups=ImmutableList.builder();
extractSourcePaths(nestedSourceGroups,outputPerFileFlags,sourceGroupItems);
outputSources.add(GroupedSource.ofSourceGroup(sourceGroupName,nestedSourceGroups.build()));
break;
default :
throw new RuntimeException("Unhandled AppleSource item type: " + item.getType());
}
}
}
