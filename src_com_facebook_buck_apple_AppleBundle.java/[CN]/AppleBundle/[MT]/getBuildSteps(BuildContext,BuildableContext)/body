{
  Path output=BuildTargets.getGenPath(getBuildTarget(),"%s");
  Path bundleRoot=output.resolve(getBuildTarget().getShortName() + "." + extension);
  String binaryName=getBuildTarget().getShortName();
  ImmutableMap<String,String> plistVariables=ImmutableMap.of("EXECUTABLE_NAME",binaryName,"PRODUCT_NAME",binaryName);
  return ImmutableList.of(new MkdirStep(bundleRoot),CopyStep.forFile(binary.getPathToOutputFile(),bundleRoot.resolve(binaryName)),new WriteFileStep("APPLWRUN",bundleRoot.resolve("PkgInfo")),new FindAndReplaceStep(getResolver().getPath(infoPlist.get()),bundleRoot.resolve("Info.plist"),InfoPlistSubstitution.createVariableExpansionFunction(plistVariables)));
}
