{
  Preconditions.checkArgument(hasBinary && debugFormat == AppleDebugFormat.DWARF_AND_DSYM);
  Preconditions.checkNotNull(binary.get().getPathToOutput(),"Binary rule " + binary.get() + " has null output path.");
  Path dsymSourcePath=bundleRoot.getParent().resolve(AppleDescriptions.getDsymOutputPath(binaryTarget).getFileName());
  Path dsymDestinationPath=bundleRoot.getParent().resolve(bundleRoot.getFileName() + AppleDescriptions.DSYM_EXTENSION);
  stepsBuilder.add(new MoveStep(getProjectFilesystem(),dsymSourcePath,dsymDestinationPath));
  stepsBuilder.add(new MoveStep(getProjectFilesystem(),dsymDestinationPath.resolve("Contents/Resources/DWARF/" + binary.get().getPathToOutput().getFileName()),dsymDestinationPath.resolve("Contents/Resources/DWARF/" + MorePaths.getNameWithoutExtension(bundleRoot))));
}
