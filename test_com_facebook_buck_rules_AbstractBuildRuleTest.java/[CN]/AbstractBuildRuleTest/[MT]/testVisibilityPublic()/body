{
  BuildRule publicBuildRule=createRule(publicTarget,noDeps,ImmutableSet.of(BuildTargetPattern.MATCH_ALL));
  AbstractBuildRule orcaRule=createRule(orcaTarget,ImmutableSet.of(publicBuildRule),noVisibilityPatterns);
  assertTrue(publicBuildRule.isVisibleTo(orcaTarget));
  assertFalse(orcaRule.isVisibleTo(publicTarget));
}
