{
  ProjectFilesystem projectFilesystem=new ProjectFilesystem(tmp.getRoot());
  DefaultJavaLibrary javaLibrary=createJavaLibraryRule(projectFilesystem);
  buildContext=createBuildContext(javaLibrary,null,projectFilesystem);
  List<Step> steps=javaLibrary.getBuildSteps(buildContext,new FakeBuildableContext());
  JavacInMemoryStep javacCommand=lastJavacCommand(steps);
  executionContext=ExecutionContext.builder().setProjectFilesystem(projectFilesystem).setConsole(new Console(Verbosity.SILENT,System.out,System.err,Ansi.withoutTty())).setDebugEnabled(true).setEventBus(BuckEventBusFactory.newInstance()).setPlatform(Platform.detect()).build();
  ImmutableList<String> options=javacCommand.getOptions(executionContext,ImmutableSet.<String>of());
  return options;
}
