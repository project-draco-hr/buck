{
  ProjectFilesystem filesystem=new AllExistingProjectFilesystem(){
    @Override public boolean isDirectory(    Path path,    LinkOption... linkOptionsk){
      return false;
    }
  }
;
  BuildRuleResolver resolver1=new BuildRuleResolver();
  SourcePathResolver pathResolver1=new SourcePathResolver(resolver1);
  DefaultJavaLibrary rule1=(DefaultJavaLibrary)JavaLibraryBuilder.createBuilder(BuildTargetFactory.newInstance("//lib:lib")).addSrc(Paths.get("agifhbkjdec.java")).addSrc(Paths.get("bdeafhkgcji.java")).addSrc(Paths.get("bdehgaifjkc.java")).addSrc(Paths.get("cfiabkjehgd.java")).addResource(new TestSourcePath("becgkaifhjd.txt")).addResource(new TestSourcePath("bkhajdifcge.txt")).addResource(new TestSourcePath("cabfghjekid.txt")).addResource(new TestSourcePath("chkdbafijge.txt")).build(resolver1,filesystem);
  BuildRuleResolver resolver2=new BuildRuleResolver();
  SourcePathResolver pathResolver2=new SourcePathResolver(resolver2);
  DefaultJavaLibrary rule2=(DefaultJavaLibrary)JavaLibraryBuilder.createBuilder(BuildTargetFactory.newInstance("//lib:lib")).addSrc(Paths.get("cfiabkjehgd.java")).addSrc(Paths.get("bdehgaifjkc.java")).addSrc(Paths.get("bdeafhkgcji.java")).addSrc(Paths.get("agifhbkjdec.java")).addResource(new TestSourcePath("chkdbafijge.txt")).addResource(new TestSourcePath("cabfghjekid.txt")).addResource(new TestSourcePath("bkhajdifcge.txt")).addResource(new TestSourcePath("becgkaifhjd.txt")).build(resolver2,filesystem);
  ImmutableMap.Builder<String,String> fileHashes=ImmutableMap.builder();
  for (  String filename : ImmutableList.of("agifhbkjdec.java","bdeafhkgcji.java","bdehgaifjkc.java","cfiabkjehgd.java","becgkaifhjd.txt","bkhajdifcge.txt","cabfghjekid.txt","chkdbafijge.txt")) {
    fileHashes.put(filename,Hashing.sha1().hashString(filename,Charsets.UTF_8).toString());
  }
  RuleKeyBuilderFactory ruleKeyBuilderFactory1=new FakeRuleKeyBuilderFactory(FakeFileHashCache.createFromStrings(fileHashes.build()),pathResolver1);
  RuleKeyBuilderFactory ruleKeyBuilderFactory2=new FakeRuleKeyBuilderFactory(FakeFileHashCache.createFromStrings(fileHashes.build()),pathResolver2);
  RuleKey.Builder builder1=ruleKeyBuilderFactory1.newInstance(rule1);
  RuleKey.Builder builder2=ruleKeyBuilderFactory2.newInstance(rule2);
  RuleKeyPair pair1=builder1.build();
  RuleKeyPair pair2=builder2.build();
  assertEquals(pair1.getTotalRuleKey(),pair2.getTotalRuleKey());
  assertEquals(pair1.getRuleKeyWithoutDeps(),pair2.getRuleKeyWithoutDeps());
}
