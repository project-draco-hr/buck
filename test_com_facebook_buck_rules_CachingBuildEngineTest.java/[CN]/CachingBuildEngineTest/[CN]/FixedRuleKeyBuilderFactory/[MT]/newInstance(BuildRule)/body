{
  SourcePathResolver resolver=new SourcePathResolver(new BuildRuleResolver());
  FileHashCache hashCache=new NullFileHashCache();
  AppendableRuleKeyCache ruleKeyCache=new AppendableRuleKeyCache(resolver,hashCache);
  return new RuleKey.Builder(resolver,hashCache,ruleKeyCache){
    @Override public RuleKey.Builder setReflectively(    String key,    @Nullable Object val){
      return this;
    }
    @Override public RuleKey build(){
      return ruleKeys.get(buildRule.getBuildTarget());
    }
  }
;
}
