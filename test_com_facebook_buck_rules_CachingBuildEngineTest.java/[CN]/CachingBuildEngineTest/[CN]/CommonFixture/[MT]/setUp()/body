{
  filesystem=new FakeProjectFilesystem(tmp.getRoot());
  fileHashCache=new DefaultFileHashCache(filesystem);
  buildContext=FakeBuildContext.newBuilder().setArtifactCache(cache).setJavaPackageFinder(new FakeJavaPackageFinder()).setActionGraph(new ActionGraph(ImmutableList.<BuildRule>of())).build();
  resolver=new BuildRuleResolver(TargetGraph.EMPTY,new DefaultTargetNodeToBuildRuleTransformer());
  pathResolver=new SourcePathResolver(resolver);
  ruleKeyBuilderFactory=new DefaultRuleKeyBuilderFactory(fileHashCache,pathResolver);
}
