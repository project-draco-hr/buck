{
  BuildRule rule=new WriteFile(new FakeBuildRuleParamsBuilder(BuildTargetFactory.newInstance("//:rule")).setProjectFilesystem(filesystem).build(),pathResolver,"data",Paths.get("output/path"),false);
  CachingBuildEngine cachingBuildEngine=new CachingBuildEngine(toWeighted(MoreExecutors.newDirectExecutorService()),new NullFileHashCache(),CachingBuildEngine.BuildMode.SHALLOW,CachingBuildEngine.DependencySchedulingOrder.RANDOM,CachingBuildEngine.DepFiles.ENABLED,256L,Optional.of(2L),ObjectMappers.newDefaultInstance(),resolver);
  BuildResult result=cachingBuildEngine.build(buildContext,rule).get();
  assertThat(result.getSuccess(),equalTo(BuildRuleSuccessType.BUILT_LOCALLY));
  assertTrue(cache.isEmpty());
}
