{
  ImmutableSet<JavaLibraryRule> sourceUnderTest=generateSourceUnderTest(sourcesUnderTest,buildRuleBuilderParams);
  ImmutableList.Builder<String> allVmArgs=ImmutableList.builder();
  allVmArgs.addAll(vmArgs);
  AnnotationProcessingParams processingParams=getAnnotationProcessingBuilder().build(buildRuleBuilderParams);
  javacOptions.setAnnotationProcessingData(processingParams);
  return new RobolectricTestRule(createBuildRuleParams(buildRuleBuilderParams),srcs,resources,labels,proguardConfig,javacOptions.build(),allVmArgs.build(),sourceUnderTest);
}
