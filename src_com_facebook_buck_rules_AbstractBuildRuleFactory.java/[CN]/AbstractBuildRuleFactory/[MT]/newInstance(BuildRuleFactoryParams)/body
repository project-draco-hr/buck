{
  T builder=newBuilder(params.getAbstractBuildRuleFactoryParams());
  BuildTarget target=params.target;
  builder.setBuildTarget(target);
  for (  String dep : params.getOptionalListAttribute("deps")) {
    BuildTarget buildTarget=params.resolveBuildTarget(dep);
    builder.addDep(buildTarget);
  }
  for (  BuildTargetPattern visiBuildTargetPattern : getVisibilityPatterns(params)) {
    builder.addVisibilityPattern(visiBuildTargetPattern);
  }
  amendBuilder(builder,params);
  return builder;
}
