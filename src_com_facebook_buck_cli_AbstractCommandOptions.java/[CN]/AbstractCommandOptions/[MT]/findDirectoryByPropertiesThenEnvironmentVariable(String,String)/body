{
  String dirPath=null;
  File propertiesFile=new File("local.properties");
  if (propertiesFile.exists()) {
    Properties localProperties=new Properties();
    try {
      localProperties.load(new FileReader(propertiesFile));
    }
 catch (    IOException e) {
      throw new RuntimeException("Failed reading properties from " + propertiesFile.getAbsolutePath(),e);
    }
    dirPath=localProperties.getProperty(propertyName);
  }
  for (  String environmentVariable : environmentVariables) {
    if (dirPath == null) {
      dirPath=System.getenv(environmentVariable);
    }
 else {
      break;
    }
  }
  if (dirPath == null) {
    return Optional.absent();
  }
 else {
    File directory=new File(dirPath);
    if (!directory.isDirectory()) {
      throw new RuntimeException(directory.getAbsolutePath() + " was not a directory when trying to find " + propertyName);
    }
    return Optional.of(directory);
  }
}
