{
  ExportFileBuilder builder=ExportFileBuilder.newExportFileBuilder(target).setSrc(new TestSourcePath("chips")).setOut("cake");
  ExportFile exportFile=(ExportFile)builder.build(new BuildRuleResolver());
  assertIterablesEquals(singleton(Paths.get("chips")),exportFile.getInputsToCompareToOutput());
  BuildRuleResolver ruleResolver=new BuildRuleResolver();
  FakeBuildRule rule=new FakeBuildRule(ExportFileDescription.TYPE,BuildTargetFactory.newInstance("//example:one"),new SourcePathResolver(ruleResolver));
  builder.setSrc(new BuildTargetSourcePath(rule.getBuildTarget()));
  exportFile=(ExportFile)builder.build(ruleResolver);
  assertTrue(Iterables.isEmpty(exportFile.getInputsToCompareToOutput()));
  builder.setSrc(null);
  exportFile=(ExportFile)builder.build(new BuildRuleResolver());
  assertIterablesEquals(singleton(Paths.get("example.html")),exportFile.getInputsToCompareToOutput());
}
