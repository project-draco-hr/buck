{
  String filename=shortName.startsWith("lib") ? shortName : "lib" + shortName;
  File libraryFile=new File(nativeLibsDir + Build.CPU_ABI + "/"+ filename+ ".so");
  if (!libraryFile.exists()) {
    libraryFile=new File(nativeLibsDir + Build.CPU_ABI2 + "/"+ filename+ ".so");
    if (!libraryFile.exists()) {
      libraryFile=null;
    }
  }
  if (libraryFile == null) {
    throw new UnsatisfiedLinkError("Could not find library file for either ABIs.");
  }
  String path=libraryFile.getAbsolutePath();
  Log.d(TAG,"Attempting to load library: " + path);
  System.load(path);
  Log.d(TAG,"Successfully loaded library: " + path);
}
