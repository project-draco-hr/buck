{
  HashMap<String,String> builtProductReferenceGidsToPaths=new HashMap<>();
  for (  String gid : objects.allKeys()) {
    NSObject object=objects.objectForKey(gid);
    if (!(object instanceof NSDictionary)) {
      throw new HumanReadableException("Malformed Xcode project (non-dictionary object)");
    }
    NSDictionary objectDict=(NSDictionary)object;
    NSObject isa=objectDict.objectForKey("isa");
    if (!(isa instanceof NSString)) {
      throw new HumanReadableException("Malformed Xcode project (non-string isa)");
    }
switch (isa.toString()) {
case "PBXNativeTarget":
case "PBXAggregateTarget":
{
        NSObject name=objectDict.objectForKey("name");
        if (!(name instanceof NSString)) {
          throw new HumanReadableException("Malformed Xcode project (non-string name)");
        }
        targetNamesToGIDs.put(name.toString(),gid);
        NSObject productReference=objectDict.objectForKey("productReference");
        if (productReference != null) {
          if (!(productReference instanceof NSString)) {
            throw new HumanReadableException("Malformed Xcode project (non-string productReference)");
          }
          String targetFileName=builtProductReferenceGidsToPaths.get(productReference.toString());
          if (targetFileName == null) {
            LOG.error("Target %s has no built product reference (looked for gid %s)",name.toString(),gid);
            throw new HumanReadableException("Malformed Xcode project (PBXFileReference %s missing)",productReference.toString());
          }
          LOG.debug("Mapped target %s to built product filename %s (gid %s)",name.toString(),targetFileName,gid);
          if (targetNamesToFileNames.isPresent()) {
            targetNamesToFileNames.get().put(name.toString(),targetFileName);
          }
        }
        break;
      }
case "PBXFileReference":
    NSObject sourceTree=objectDict.objectForKey("sourceTree");
  if (!(sourceTree instanceof NSString)) {
    throw new HumanReadableException("Malformed Xcode project (non-string sourceTree)");
  }
if (sourceTree.toString().equals("BUILT_PRODUCTS_DIR")) {
  NSObject path=objectDict.objectForKey("path");
  if (!(path instanceof NSString)) {
    throw new HumanReadableException("Malformed Xcode project (non-string path)");
  }
  builtProductReferenceGidsToPaths.put(gid,path.toString());
}
break;
}
}
}
