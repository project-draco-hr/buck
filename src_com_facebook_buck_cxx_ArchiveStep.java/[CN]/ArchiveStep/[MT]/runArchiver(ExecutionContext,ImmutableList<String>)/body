{
  ProcessBuilder builder=new ProcessBuilder();
  builder.directory(filesystem.getRootPath().toFile());
  builder.environment().putAll(environment);
  builder.command(command);
  ProcessExecutor.Result result=context.getProcessExecutor().execute(builder.start());
  if (result.getExitCode() != 0 && result.getStderr().isPresent()) {
    context.getBuckEventBus().post(ConsoleEvent.create(Level.SEVERE,result.getStderr().get()));
  }
  return result.getExitCode();
}
