{
  final int zindex=index - 1;
  final CONSTANT_info result=(CONSTANT_info)m_constants.get(zindex);
  if (result == null)   throw new IllegalStateException("assertion failure: dereferencing an invalid constant pool slot " + index);
  if (result.width() != constant.width())   throw new IllegalArgumentException("assertion failure: can't set entry of type [" + result.getClass().getName() + "] to an entry of type ["+ result.getClass().getName()+ "] at pool slot "+ index);
  m_constants.set(zindex,constant);
  if (m_CONSTANT_Utf8_index != null) {
    if (result instanceof CONSTANT_Utf8_info) {
      final String mapKey=((CONSTANT_Utf8_info)result).m_value;
      final int[] out=new int[1];
      if (m_CONSTANT_Utf8_index.get(mapKey,out) && (out[0] == zindex))       m_CONSTANT_Utf8_index.remove(mapKey);
    }
    if (constant instanceof CONSTANT_Utf8_info)     m_CONSTANT_Utf8_index.put(((CONSTANT_Utf8_info)constant).m_value,zindex);
  }
  return result;
}
