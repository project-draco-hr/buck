{
  if (set.isEmpty()) {
    List<TestRule> empty=ImmutableList.of();
    return ImmutableList.of(empty);
  }
  ImmutableList.Builder<List<TestRule>> resultBuilder=new ImmutableList.Builder<>();
  for (  TestRule head : set) {
    Set<TestRule> remainder=Sets.newHashSet(set);
    remainder.remove(head);
    for (    List<TestRule> tail : allPermutations(remainder)) {
      ImmutableList.Builder<TestRule> permutationBuilder=new ImmutableList.Builder<>();
      ImmutableList<TestRule> permutation=permutationBuilder.add(head).addAll(tail).build();
      resultBuilder.add(permutation);
    }
  }
  return resultBuilder.build();
}
