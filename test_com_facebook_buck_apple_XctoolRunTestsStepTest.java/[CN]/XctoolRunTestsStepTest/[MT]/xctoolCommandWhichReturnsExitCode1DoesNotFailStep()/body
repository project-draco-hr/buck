{
  FakeProjectFilesystem projectFilesystem=new FakeProjectFilesystem();
  XctoolRunTestsStep step=new XctoolRunTestsStep(Paths.get("/path/to/xctool"),"x86_64","iphonesimulator","iPhone 5s",ImmutableSet.of(Paths.get("/path/to/Foo.xctest")),ImmutableMap.<Path,Path>of(),Paths.get("/path/to/output.json"));
  ProcessExecutorParams xctoolParams=ProcessExecutorParams.builder().setCommand(ImmutableList.of("/path/to/xctool","-reporter","json-stream:/path/to/output.json","-sdk","iphonesimulator","-destination","arch=x86_64,name=iPhone 5s","-logicTest","/path/to/Foo.xctest","run-tests")).setDirectory(projectFilesystem.getRootPath().toAbsolutePath().toFile()).setEnvironment(ImmutableMap.<String,String>of()).build();
  FakeProcess fakeXctoolSuccess=new FakeProcess(1,"","");
  FakeProcessExecutor processExecutor=new FakeProcessExecutor(ImmutableMap.of(xctoolParams,fakeXctoolSuccess));
  ExecutionContext executionContext=TestExecutionContext.newBuilder().setProcessExecutor(processExecutor).setProjectFilesystem(projectFilesystem).setEnvironment(ImmutableMap.<String,String>of()).build();
  assertThat(step.execute(executionContext),equalTo(0));
}
