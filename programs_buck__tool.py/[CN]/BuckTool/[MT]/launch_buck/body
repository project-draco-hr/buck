def launch_buck(self, build_id):
    with Tracing('BuckRepo.launch_buck'):
        self.kill_autobuild()
        if ('clean' in sys.argv):
            self.kill_buckd()
        buck_version_uid = self._get_buck_version_uid()
        use_buckd = self._use_buckd()
        has_watchman = bool(which('watchman'))
        if (use_buckd and has_watchman):
            buckd_run_count = self._buck_project.get_buckd_run_count()
            running_version = self._buck_project.get_running_buckd_version()
            new_buckd_run_count = (buckd_run_count + 1)
            if ((buckd_run_count == MAX_BUCKD_RUN_COUNT) or (running_version != buck_version_uid)):
                self.kill_buckd()
                new_buckd_run_count = 0
            if ((new_buckd_run_count == 0) or (not self._is_buckd_running())):
                self.launch_buckd(buck_version_uid=buck_version_uid)
            else:
                self._buck_project.update_buckd_run_count(new_buckd_run_count)
        elif (use_buckd and (not has_watchman)):
            print("Not using buckd because watchman isn't installed.", file=sys.stderr)
        elif (not use_buckd):
            print('Not using buckd because NO_BUCKD is set.', file=sys.stderr)
        env = self._environ_for_buck()
        env['BUCK_BUILD_ID'] = build_id
        buck_client_file = self._get_resource(CLIENT)
        buck_socket_path = self._buck_project.get_buckd_socket_path()
        if (use_buckd and self._is_buckd_running() and os.path.exists(buck_client_file) and os.path.exists(buck_socket_path)):
            command = [buck_client_file]
            command.append('--nailgun-server')
            command.append('local:.buckd/sock')
            command.append('com.facebook.buck.cli.Main')
            command.extend(sys.argv[1:])
            with Tracing('buck', args={'command': command, }):
                exit_code = subprocess.call(command, cwd=self._buck_project.root, env=env)
                if (exit_code == 2):
                    print('Daemon is busy, please wait', 'or run "buck kill" to terminate it.', file=sys.stderr)
                return exit_code
        command = ['buck']
        extra_default_options = ['-Djava.io.tmpdir={0}'.format(self._tmp_dir)]
        command.extend(self._get_java_args(buck_version_uid, extra_default_options))
        command.append('com.facebook.buck.cli.bootstrapper.ClassLoaderBootstrapper')
        command.append('com.facebook.buck.cli.Main')
        command.extend(sys.argv[1:])
        return subprocess.call(command, cwd=self._buck_project.root, env=env, executable=which('java'))
