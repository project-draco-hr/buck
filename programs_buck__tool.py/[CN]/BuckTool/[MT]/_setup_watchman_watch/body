def _setup_watchman_watch(self):
    with Tracing('BuckRepo._setup_watchman_watch'):
        if (not which('watchman')):
            message = textwrap.dedent('                    Watchman not found, please install when using buckd.\n                    See https://github.com/facebook/watchman for details.')
            if (sys.platform == 'darwin'):
                message += '\n(brew install watchman on OS X)'
            raise BuckToolException(message)
        print('Using watchman.', file=sys.stderr)
        try:
            if self._watchman_atleast(3, 4):
                response = check_output(['watchman', 'watch-project', self._buck_project.root], stderr=subprocess.STDOUT)
            else:
                response = check_output(['watchman', 'watch', self._buck_project.root], stderr=subprocess.STDOUT)
            jsonresp = json.loads(response)
            return (jsonresp.get('watch'), jsonresp.get('relative_path'))
        except CalledProcessError as e:
            print(e.output, end='', file=sys.stderr)
            raise
