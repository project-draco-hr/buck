{
  ExternallyBuiltApplePackage rule=new ExternallyBuiltApplePackage(params,new SourcePathResolver(resolver),config,new FakeSourcePath("Fake/Bundle/Location"));
  ShellStep step=Iterables.getOnlyElement(Iterables.filter(rule.getBuildSteps(FakeBuildContext.NOOP_CONTEXT,new FakeBuildableContext()),AbstractGenruleStep.class));
  assertThat(step.getShellCommand(TestExecutionContext.newInstance()),hasItem("echo $PLATFORM_DIR $OUT"));
}
