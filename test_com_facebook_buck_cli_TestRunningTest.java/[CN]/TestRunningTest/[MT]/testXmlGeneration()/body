{
  TestResultSummary result1=new TestResultSummary("TestCase","passTest",ResultType.SUCCESS,5000,null,null,null,null);
  TestResultSummary result2=new TestResultSummary("TestCase","failWithMsg",ResultType.FAILURE,7000,"Index out of bounds!","Stacktrace",null,null);
  TestResultSummary result3=new TestResultSummary("TestCase","failNoMsg",ResultType.SUCCESS,4000,null,null,null,null);
  List<TestResultSummary> resultList=ImmutableList.of(result1,result2,result3);
  TestCaseSummary testCase=new TestCaseSummary("TestCase",resultList);
  List<TestCaseSummary> testCases=ImmutableList.of(testCase);
  TestResults testResults=FakeTestResults.of(testCases);
  List<TestResults> testResultsList=ImmutableList.of(testResults);
  StringWriter writer=new StringWriter();
  TestRunning.writeXmlOutput(testResultsList,writer);
  ByteArrayInputStream resultStream=new ByteArrayInputStream(writer.toString().getBytes());
  DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
  DocumentBuilder docBuilder=dbf.newDocumentBuilder();
  Document doc=docBuilder.parse(resultStream);
  NodeList testsList=doc.getElementsByTagName("tests");
  assertEquals(testsList.getLength(),1);
  Element testsEl=(Element)testsList.item(0);
  NodeList testList=testsEl.getElementsByTagName("test");
  assertEquals(testList.getLength(),1);
  Element testEl=(Element)testList.item(0);
  NodeList resultsList=testEl.getElementsByTagName("testresult");
  assertEquals(resultsList.getLength(),3);
  Element passResultEl=(Element)resultsList.item(0);
  assertEquals(passResultEl.getAttribute("name"),"passTest");
  assertEquals(passResultEl.getAttribute("time"),"5000");
  checkXmlTextContents(passResultEl,"message","");
  checkXmlTextContents(passResultEl,"stacktrace","");
  assertEquals(testEl.getAttribute("name"),"TestCase");
  Element failResultEl1=(Element)resultsList.item(1);
  assertEquals(failResultEl1.getAttribute("name"),"failWithMsg");
  assertEquals(failResultEl1.getAttribute("time"),"7000");
  checkXmlTextContents(failResultEl1,"message","Index out of bounds!");
  checkXmlTextContents(failResultEl1,"stacktrace","Stacktrace");
  Element failResultEl2=(Element)resultsList.item(2);
  assertEquals(failResultEl2.getAttribute("name"),"failNoMsg");
  assertEquals(failResultEl2.getAttribute("time"),"4000");
  checkXmlTextContents(failResultEl2,"message","");
  checkXmlTextContents(failResultEl2,"stacktrace","");
}
