{
synchronized (lock) {
    while (len > 0) {
      write(cbuf[off]);
      off++;
      len--;
    }
  }
}
