{
  if (localToCanonicalRepoNamesMap != null) {
    return localToCanonicalRepoNamesMap;
  }
synchronized (this) {
    if (localToCanonicalRepoNamesMap != null) {
      return localToCanonicalRepoNamesMap;
    }
    ImmutableMap.Builder<Optional<String>,Optional<String>> builder=ImmutableMap.builder();
    builder.put(Optional.<String>absent(),name);
    ImmutableMap<String,Path> localNamePaths=buckConfig.getRepositoryPaths();
    ImmutableMap<Path,Optional<String>> canonicalPathNames=repositoryFactory.getCanonicalPathNames();
    for (    String localName : localNamePaths.keySet()) {
      Path canonicalPath=localNamePaths.get(localName);
      Optional<String> canonicalName=canonicalPathNames.get(canonicalPath);
      Preconditions.checkNotNull(canonicalName);
      builder.put(Optional.of(localName),canonicalName);
    }
    localToCanonicalRepoNamesMap=builder.build();
    return localToCanonicalRepoNamesMap;
  }
}
