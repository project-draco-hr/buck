{
  ImmutableMap.Builder<Optional<String>,Optional<String>> localToCanonicalMap=ImmutableMap.builder();
  localToCanonicalMap.put(Optional.<String>absent(),name);
  ImmutableMap<String,Path> localNamePaths=buckConfig.getRepositoryPaths();
  ImmutableMap<Path,Optional<String>> canonicalPathNames=repositoryFactory.getCanonicalPathNames();
  for (  String localName : localNamePaths.keySet()) {
    Path canonicalPath=localNamePaths.get(localName);
    Optional<String> canonicalName=canonicalPathNames.get(canonicalPath);
    Preconditions.checkNotNull(canonicalName);
    localToCanonicalMap.put(Optional.of(localName),canonicalName);
  }
  return localToCanonicalMap.build();
}
