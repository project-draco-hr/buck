def _get_resource(self, resource):
    buck_version_uid = self._get_buck_version_uid()
    resource_path = os.path.join(self._get_resource_dir(), buck_version_uid, resource.basename)
    if (not os.path.exists(resource_path)):
        if (not os.path.exists(os.path.dirname(resource_path))):
            os.makedirs(os.path.dirname(resource_path))
        with tempfile.NamedTemporaryFile(prefix=(resource_path + os.extsep)) as outf:
            outf.write(pkg_resources.resource_string(__name__, resource.name))
            if resource.executable:
                st = os.fstat(outf.fileno())
                os.fchmod(outf.fileno(), (st.st_mode | stat.S_IXUSR))
            os.rename(outf.name, resource_path)
            outf.delete = False
    return resource_path
