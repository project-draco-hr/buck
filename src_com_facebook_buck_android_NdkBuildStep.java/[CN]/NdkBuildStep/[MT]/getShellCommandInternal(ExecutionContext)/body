{
  Optional<File> ndkRoot=context.getNdkRoot();
  if (!ndkRoot.isPresent()) {
    throw new HumanReadableException("Must define a local.properties file" + " with a property named 'ndk.dir' that points to the absolute path of" + " your Android NDK directory, or set ANDROID_NDK.");
  }
  ImmutableList.Builder<String> builder=ImmutableList.builder();
  builder.add(ndkRoot.get().getAbsolutePath() + "/ndk-build","-j",Integer.toString(this.maxJobCount),"-C",this.makefileDirectory);
  builder.addAll(this.flags);
  ProjectFilesystem projectFilesystem=context.getProjectFilesystem();
  Function<String,String> pathRelativizer=projectFilesystem.getPathRelativizer();
  builder.add("APP_PROJECT_PATH=" + pathRelativizer.apply(this.buildArtifactsDirectory),"APP_BUILD_SCRIPT=" + pathRelativizer.apply(this.makefilePath),"NDK_OUT=" + pathRelativizer.apply(this.buildArtifactsDirectory),"NDK_LIBS_OUT=" + projectFilesystem.resolve(binDirectory));
  return builder.build();
}
