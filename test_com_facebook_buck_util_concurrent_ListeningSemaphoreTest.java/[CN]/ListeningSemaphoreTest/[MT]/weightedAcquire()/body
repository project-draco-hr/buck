{
  ListeningSemaphore semaphore=new ListeningSemaphore(2);
  assertThat(semaphore.availablePermits(),Matchers.equalTo(2));
  assertThat(semaphore.getQueueLength(),Matchers.equalTo(0));
  AtomicBoolean first=acquire(semaphore,2);
  assertThat(semaphore.availablePermits(),Matchers.equalTo(0));
  assertThat(semaphore.getQueueLength(),Matchers.equalTo(0));
  assertTrue(first.get());
  semaphore.release(2);
  assertThat(semaphore.availablePermits(),Matchers.equalTo(2));
  assertThat(semaphore.getQueueLength(),Matchers.equalTo(0));
}
