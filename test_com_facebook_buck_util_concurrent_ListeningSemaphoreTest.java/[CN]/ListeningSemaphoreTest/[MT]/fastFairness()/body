{
  ListeningSemaphore semaphore=new ListeningSemaphore(1,ListeningSemaphore.Cap.HARD,ListeningSemaphore.Fairness.FAST);
  assertThat(semaphore.availablePermits(),Matchers.equalTo(1));
  assertThat(semaphore.getQueueLength(),Matchers.equalTo(0));
  AtomicBoolean first=acquire(semaphore,2);
  assertThat(semaphore.availablePermits(),Matchers.equalTo(1));
  assertThat(semaphore.getQueueLength(),Matchers.equalTo(1));
  assertFalse(first.get());
  AtomicBoolean second=acquire(semaphore,1);
  assertThat(semaphore.availablePermits(),Matchers.equalTo(0));
  assertThat(semaphore.getQueueLength(),Matchers.equalTo(1));
  assertTrue(second.get());
}
