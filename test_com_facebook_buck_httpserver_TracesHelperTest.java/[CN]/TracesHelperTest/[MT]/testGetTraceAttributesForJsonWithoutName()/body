{
  ProjectFilesystem projectFilesystem=createMock(ProjectFilesystem.class);
  File traceFile=createMock(File.class);
  String name="build.b.trace";
  expect(traceFile.getName()).andStubReturn(name);
  Path pathToTraceFile=BuckConstant.BUCK_TRACE_DIR.resolve(name);
  expect(traceFile.toPath()).andReturn(pathToTraceFile);
  expect(projectFilesystem.listFiles(BuckConstant.BUCK_TRACE_DIR)).andStubReturn(new File[]{traceFile});
  expect(traceFile.lastModified()).andStubReturn(2000L);
  expect(projectFilesystem.getFileForRelativePath(pathToTraceFile)).andStubReturn(traceFile);
  String buckBuildJson="[" + "{" + "\"cat\":\"buck\","+ "\"ph\":\"B\","+ "\"pid\":0,"+ "\"tid\":1,"+ "\"ts\":5621911884918,"+ "\"args\":{\"command_args\":\"buck\"}"+ "}"+ "]";
  expect(projectFilesystem.getInputStreamForRelativePath(pathToTraceFile)).andReturn(FakeInputStreams.createInputStreamFromString(buckBuildJson));
  replayAll();
  TracesHelper helper=new TracesHelper(projectFilesystem);
  TraceAttributes traceAttributes=helper.getTraceAttributesFor("b");
  assertEquals("TracesHelper should not be able to extract the command because there is no name " + "attribute.",Optional.absent(),traceAttributes.getCommand());
  assertEquals(2000L,traceAttributes.getLastModifiedTime());
  verifyAll();
}
