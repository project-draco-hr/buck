{
  BuildRuleResolver buildRuleResolver=new BuildRuleResolver();
  FakeProjectFilesystem filesystem=new FakeProjectFilesystem();
  Path basePath=Paths.get("base");
  TypeCoercer<String> stringTypeCoercer=new IdentityTypeCoercer<>(String.class);
  TypeCoercer<AppleBundleDestination> destinationTypeCoercer=new AppleBundleDestinationTypeCoercer(stringTypeCoercer);
  AppleBundleDestination.SubfolderSpec subfolderSpec=AppleBundleDestination.SubfolderSpec.PRODUCTS;
  String subpath="Codecs";
  AppleBundleDestination destination=destinationTypeCoercer.coerce(buildRuleResolver,filesystem,basePath,ImmutableList.of(subfolderSpec.toString(),subpath));
  assertEquals(destination,new AppleBundleDestination(subfolderSpec,Optional.of(subpath)));
}
