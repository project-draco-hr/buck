{
  ImmutableMap.Builder<String,SourcePath> solibs=ImmutableMap.builder();
  if (!headerOnly && !provided) {
    SourcePath sharedLibrary=requireSharedLibrary(cxxPlatform);
    solibs.put(soname,sharedLibrary);
  }
  return solibs.build();
}
