{
  expect(watchService.poll()).andReturn(null);
  replay(filesystem,eventBus,watchService,path,key);
  watcher=new WatchServiceWatcher(filesystem,eventBus,watchService);
  visitor.getValue().preVisitDirectory(path,null);
  watcher.postEvents();
  verify(filesystem,eventBus,watchService,path,key);
}
