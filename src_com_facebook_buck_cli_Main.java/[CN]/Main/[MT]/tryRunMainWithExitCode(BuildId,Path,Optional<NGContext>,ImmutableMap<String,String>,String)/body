{
  try {
    return runMainWithExitCode(buildId,projectRoot,context,clientEnvironment,CommandMode.RELEASE,args);
  }
 catch (  HumanReadableException e) {
    Console console=new Console(Verbosity.STANDARD_INFORMATION,stdOut,stdErr,new Ansi(AnsiEnvironmentChecking.environmentSupportsAnsiEscapes(platform,clientEnvironment)));
    console.printBuildFailure(e.getHumanReadableErrorMessage());
    return FAIL_EXIT_CODE;
  }
catch (  InterruptionFailedException e) {
    if (context.isPresent()) {
      context.get().getNGServer().shutdown(true);
    }
    return FAIL_EXIT_CODE;
  }
 finally {
    final boolean isDaemon=context.isPresent();
    if (isDaemon) {
      System.gc();
    }
    LOG.debug("Done.");
  }
}
