{
  if (!commandSemaphore.tryAcquire()) {
    return BUSY_EXIT_CODE;
  }
  try {
    return runMainWithExitCode(projectRoot,args);
  }
 catch (  HumanReadableException e) {
    Console console=new Console(Verbosity.STANDARD_INFORMATION,stdOut,stdErr,new Ansi());
    console.printBuildFailure(e.getHumanReadableErrorMessage());
    return FAIL_EXIT_CODE;
  }
 finally {
    commandSemaphore.release();
  }
}
