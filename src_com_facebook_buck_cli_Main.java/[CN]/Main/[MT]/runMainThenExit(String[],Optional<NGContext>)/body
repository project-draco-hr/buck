{
  File projectRoot=new File(".");
  int exitCode=FAIL_EXIT_CODE;
  BuildId buildId=new BuildId();
  try (LogFormatter.CommandThreadAssociation commandThreadAssociation=new LogFormatter.CommandThreadAssociation(buildId.toString())){
    exitCode=tryRunMainWithExitCode(buildId,projectRoot,context,args);
  }
 catch (  Throwable t) {
    LOG.error(t,"Uncaught exception at top level");
  }
 finally {
    LogConfig.flushLogs();
    System.exit(exitCode);
  }
}
