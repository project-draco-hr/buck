{
  File projectRoot=new File(".");
  int exitCode=FAIL_EXIT_CODE;
  BuildId buildId=new BuildId();
  CommandThreadAssociation commandThreadAssociation=new CommandThreadAssociation(buildId.toString());
  try {
    exitCode=tryRunMainWithExitCode(buildId,projectRoot,context,args);
  }
 catch (  Throwable t) {
    LOG.error(t,"Uncaught exception at top level");
  }
 finally {
    LogConfig.flushLogs();
    commandThreadAssociation.stop();
    System.exit(exitCode);
  }
}
