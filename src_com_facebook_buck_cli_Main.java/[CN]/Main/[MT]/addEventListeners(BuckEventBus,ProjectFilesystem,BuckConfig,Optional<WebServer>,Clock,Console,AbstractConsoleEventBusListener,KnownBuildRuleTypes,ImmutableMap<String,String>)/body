{
  ImmutableList.Builder<BuckEventListener> eventListenersBuilder=ImmutableList.<BuckEventListener>builder().add(new JavaUtilsLoggingBuildListener()).add(new ChromeTraceBuildListener(projectFilesystem,clock,objectMapper,config.getMaxTraces())).add(consoleEventBusListener).add(new LoggingBuildListener());
  if (webServer.isPresent()) {
    eventListenersBuilder.add(webServer.get().createListener());
  }
  loadListenersFromBuckConfig(eventListenersBuilder,projectFilesystem,config);
  JavacOptions javacOptions=new JavaBuckConfig(config).getDefaultJavacOptions(new ProcessExecutor(console));
  eventListenersBuilder.add(MissingSymbolsHandler.createListener(projectFilesystem,knownBuildRuleTypes.getAllDescriptions(),config,buckEvents,console,javacOptions,environment));
  eventListenersBuilder.addAll(externalEventsListeners);
  ImmutableList<BuckEventListener> eventListeners=eventListenersBuilder.build();
  for (  BuckEventListener eventListener : eventListeners) {
    buckEvents.register(eventListener);
  }
  return eventListeners;
}
