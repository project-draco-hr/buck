{
  try {
    if (daemon != null) {
      LOG.debug("Rotating log.");
      LogConfig.flushLogs();
      LogConfig.setupLogging();
    }
    LOG.debug("Starting up with args: %s",Arrays.toString(args));
    return runMainWithExitCode(buildId,projectRoot,context,args);
  }
 catch (  HumanReadableException e) {
    Console console=new Console(Verbosity.STANDARD_INFORMATION,stdOut,stdErr,new Ansi(platform));
    console.printBuildFailure(e.getHumanReadableErrorMessage());
    return FAIL_EXIT_CODE;
  }
catch (  InterruptionFailedException e) {
    if (context.isPresent()) {
      context.get().getNGServer().shutdown(true);
    }
    return FAIL_EXIT_CODE;
  }
 finally {
    LOG.debug("Done.");
  }
}
