{
  LOG.debug("Using watchman to watch for file changes.");
  String projectRoot=MorePaths.absolutify(projectFilesystem.getRootPath()).toString();
  String watchRoot=System.getProperty("buck.watchman_root",projectRoot);
  Optional<String> watchPrefix=Optional.fromNullable(System.getProperty("buck.watchman_project_prefix"));
  return new WatchmanWatcher(watchRoot,watchPrefix,fileEventBus,clock,objectMapper,repository.getBuckConfig().getIgnorePaths(),DEFAULT_IGNORE_GLOBS);
}
