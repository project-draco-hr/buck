{
  if (sourcePath instanceof BuildRuleSourcePath) {
    return getNameForRule(((BuildRuleSourcePath)sourcePath).getRule());
  }
  Preconditions.checkArgument(sourcePath instanceof PathSourcePath);
  Path path=(Path)sourcePath.asReference();
  return MorePaths.relativize(target.getBasePath(),path).toString();
}
