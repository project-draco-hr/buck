{
  List<Object> queryParams=new ArrayList<>();
  queryParams.add("query");
  queryParams.add(rootPath);
  Map<String,Object> sinceParams=new LinkedHashMap<>();
  sinceParams.put("since",new StringBuilder("n:buckd").append(uuid).toString());
  List<Object> excludeAnyOf=Lists.<Object>newArrayList("anyof");
  excludeAnyOf.add(Lists.newArrayList("type","d"));
  for (  Path ignorePath : ignorePaths) {
    excludeAnyOf.add(Lists.newArrayList("match",ignorePath.toString() + "/*","wholename"));
  }
  for (  String ignoreGlob : ignoreGlobs) {
    excludeAnyOf.add(Lists.newArrayList("match",ignoreGlob,"wholename"));
  }
  sinceParams.put("expression",Lists.newArrayList("not",excludeAnyOf));
  sinceParams.put("empty_on_fresh_instance",true);
  sinceParams.put("fields",Lists.newArrayList("name","exists","new"));
  queryParams.add(sinceParams);
  try {
    return objectMapper.writeValueAsString(queryParams);
  }
 catch (  IOException e) {
    throw Throwables.propagate(e);
  }
}
