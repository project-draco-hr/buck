{
  File root=filesystem.getProjectRoot();
  final Set<String> targets=Sets.newHashSet();
  DirectoryTraversal traversal=new DirectoryTraversal(root,filesystem.getIgnorePaths()){
    @Override public void visit(    File file,    String relativePath){
      if (!BUILD_RULES_FILE_NAME.equals(file.getName())) {
        return;
      }
      int index=Math.max(0,relativePath.lastIndexOf("/"));
      String baseName=relativePath.substring(0,index);
      targets.add(baseName);
    }
  }
;
  traversal.traverse();
  return new BuildFileTree(targets);
}
