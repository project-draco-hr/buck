{
  Set<String> targetLiterals=new HashSet<>();
  expr.collectTargetPatterns(targetLiterals);
  try {
    targetPatternEvaluator.preloadTargetPatterns(targetLiterals);
  }
 catch (  BuildTargetException|BuildFileParseException|IOException e) {
    throw new QueryException("Error in preloading targets. %s",e.getMessage());
  }
  return expr.eval(this);
}
