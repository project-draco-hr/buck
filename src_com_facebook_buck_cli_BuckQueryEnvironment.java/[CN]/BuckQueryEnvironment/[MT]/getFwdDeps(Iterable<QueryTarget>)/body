{
  Set<QueryTarget> result=new LinkedHashSet<>();
  try {
    for (    QueryTarget target : targets) {
      Preconditions.checkState(target instanceof AbstractQueryBuildTarget);
      TargetNode<?> node=getNode(target);
      result.addAll(getTargetsFromBuildTargetsContainer(graph.getOutgoingNodesFor(node)));
    }
  }
 catch (  QueryException|InterruptedException e) {
    throw new RuntimeException(e);
  }
  return result;
}
