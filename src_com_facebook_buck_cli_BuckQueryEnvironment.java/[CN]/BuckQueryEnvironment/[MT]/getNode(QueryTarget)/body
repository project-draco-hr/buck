{
  Preconditions.checkState(target instanceof QueryBuildTarget);
  ExecutorService executor=null;
  try {
    executor=Executors.newSingleThreadExecutor();
    return params.getParser().getTargetNode(params.getBuckEventBus(),params.getCell(),enableProfiling,executor,((QueryBuildTarget)target).getBuildTarget());
  }
 catch (  BuildTargetException|BuildFileParseException|IOException e) {
    throw new QueryException("Error getting target node for %s\n%s",target,e.getMessage());
  }
 finally {
    if (executor != null) {
      executor.shutdown();
    }
  }
}
