{
  try {
    Set<BuildTarget> resolvedTargets=ImmutableSortedSet.copyOf(params.getParser().resolveTargetSpec(targetNodeSpecParser.parse(pattern),new ParserConfig(params.getBuckConfig()),params.getBuckEventBus(),params.getConsole(),params.getEnvironment(),enableProfiling));
    buildTransitiveClosure(owner,Sets.union(resolvedTargets,getTargetsFromNodes(graph.getNodes())),Integer.MAX_VALUE);
    return resolvedTargets;
  }
 catch (  BuildTargetException|BuildFileParseException|IOException e) {
    throw new QueryException("Error in resolving targets matching " + pattern);
  }
catch (  InterruptedException e) {
    throw (QueryException)new QueryException("Interrupted").initCause(e);
  }
}
