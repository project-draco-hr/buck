{
  ImmutableSet<QueryTarget> targets=resolvedTargets.get(pattern);
  if (targets != null) {
    return targets;
  }
  targets=resolveAlias(pattern);
  if (targets == null) {
    if (pattern.startsWith("//") || pattern.startsWith(":") || pattern.startsWith("@")) {
      targets=resolveBuildTargetPattern(pattern);
    }
 else {
      targets=resolveFilePattern(pattern);
    }
  }
  resolvedTargets.put(pattern,targets);
  return targets;
}
