{
  ImmutableSet<QueryTarget> targets=resolvedTargets.get(pattern);
  if (targets != null) {
    return targets;
  }
  Set<BuildTarget> buildTargets=params.getParser().resolveTargetSpec(targetNodeSpecParser.parse(pattern),parserConfig,params.getBuckEventBus(),params.getConsole(),params.getEnvironment(),enableProfiling);
  ImmutableSortedSet.Builder<QueryTarget> builder=ImmutableSortedSet.naturalOrder();
  for (  BuildTarget target : buildTargets) {
    builder.add(new QueryBuildTarget(target));
  }
  targets=builder.build();
  resolvedTargets.put(pattern,targets);
  return targets;
}
