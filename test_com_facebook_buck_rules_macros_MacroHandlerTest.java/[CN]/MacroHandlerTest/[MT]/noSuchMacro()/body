{
  MacroHandler handler=new MacroHandler(ImmutableMap.<String,MacroExpander>of());
  try {
    handler.expand(target,resolver,filesystem,"$(badmacro hello)");
  }
 catch (  MacroException e) {
    assertTrue(e.getMessage().contains("no such macro \"badmacro\""));
  }
  try {
    handler.extractParseTimeDeps(target,"$(badmacro hello)");
  }
 catch (  MacroException e) {
    assertTrue(e.getMessage().contains("no such macro \"badmacro\""));
  }
}
