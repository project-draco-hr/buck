{
  File dir=file;
  if (!dir.isDirectory()) {
    dir=dir.getParentFile();
  }
  File projectRoot=getProjectFilesystem().getProjectRoot();
  while (dir != null && !dir.equals(projectRoot)) {
    File buck=new File(dir,BuckConstant.BUILD_RULES_FILE_NAME);
    if (buck.exists()) {
      return buck;
    }
    dir=dir.getParentFile();
  }
  throw new RuntimeException("Failed to find BUCK file for " + file.getPath());
}
