{
  ProjectFilesystem filesystem=getProjectFilesystem();
  Path dir=filesystem.resolve(file);
  if (!filesystem.isDirectory(dir)) {
    dir=dir.getParent();
  }
  Path projectRoot=filesystem.getRootPath();
  while (dir != null && !dir.equals(projectRoot.getParent())) {
    Path buck=dir.resolve(BuckConstant.BUILD_RULES_FILE_NAME);
    if (getProjectFilesystem().exists(buck)) {
      return buck;
    }
    dir=dir.getParent();
  }
  return null;
}
