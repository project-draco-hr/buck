{
  Set<Path> inputs=Sets.newHashSet();
  Set<String> nonExistentInputs=Sets.newHashSet();
  Set<String> nonFileInputs=Sets.newHashSet();
  ProjectFilesystem projectFilesystem=getProjectFilesystem();
  for (  String filePath : options.getArguments()) {
    File file=projectFilesystem.getFileForRelativePath(filePath);
    if (!file.exists()) {
      nonExistentInputs.add(filePath);
    }
 else     if (!file.isFile()) {
      nonFileInputs.add(filePath);
    }
 else {
      inputs.add(Paths.get(filePath));
    }
  }
  Set<Path> inputsWithNoOwners=Sets.newHashSet(inputs);
  SetMultimap<BuildRule,Path> owners=TreeMultimap.create();
  for (  BuildRule rule : graph.getNodes()) {
    for (    Path ruleInput : rule.getInputs()) {
      if (inputs.contains(ruleInput)) {
        inputsWithNoOwners.remove(ruleInput);
        owners.put(rule,ruleInput);
      }
    }
  }
  if (options.isGuessForDeletedEnabled()) {
    guessOwnersForNonExistentFiles(graph,owners,nonExistentInputs);
  }
  return new OwnersReport(owners,inputsWithNoOwners,nonExistentInputs,nonFileInputs);
}
