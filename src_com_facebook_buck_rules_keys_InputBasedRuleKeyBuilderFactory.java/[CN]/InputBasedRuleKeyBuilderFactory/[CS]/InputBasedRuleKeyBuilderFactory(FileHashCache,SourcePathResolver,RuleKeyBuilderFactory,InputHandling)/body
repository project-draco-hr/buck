{
  this.fileHashCache=hashCache;
  this.pathResolver=pathResolver;
  this.defaultRuleKeyBuilderFactory=defaultRuleKeyBuilderFactory;
  this.inputHandling=inputHandling;
  cache=CacheBuilder.newBuilder().weakKeys().build(new CacheLoader<RuleKeyAppendable,Result>(){
    @Override public Result load(    @Nonnull RuleKeyAppendable appendable){
      Builder subKeyBuilder=new Builder();
      appendable.appendToRuleKey(subKeyBuilder);
      return subKeyBuilder.buildResult();
    }
  }
);
}
