{
  return new Builder(){
    @Override public Optional<RuleKey> build(){
      Result result=buildResult();
      for (      BuildRule usedDep : result.getDeps()) {
        Preconditions.checkState(rule.getDeps().contains(usedDep),"%s: %s not in deps (%s)",rule.getBuildTarget(),usedDep.getBuildTarget(),rule.getDeps());
      }
      return Optional.of(result.getRuleKey());
    }
  }
;
}
