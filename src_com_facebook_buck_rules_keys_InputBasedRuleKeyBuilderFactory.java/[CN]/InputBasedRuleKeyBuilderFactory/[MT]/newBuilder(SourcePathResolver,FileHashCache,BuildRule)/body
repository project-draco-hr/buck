{
  return new Builder(pathResolver,hashCache){
    @Override public RuleKey build(){
      Pair<RuleKey,ImmutableSet<BuildRule>> result=buildWithDeps();
      Preconditions.checkState(rule.getDeps().containsAll(result.getSecond()));
      return result.getFirst();
    }
  }
;
}
