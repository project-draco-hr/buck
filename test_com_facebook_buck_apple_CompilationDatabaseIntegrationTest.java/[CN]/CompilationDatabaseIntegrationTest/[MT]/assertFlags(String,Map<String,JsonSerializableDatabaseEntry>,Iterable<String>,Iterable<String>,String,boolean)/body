{
  String key=tmp.getRootPath().resolve(fileName).toRealPath().toString();
  JsonSerializableDatabaseEntry entry=fileToEntry.get(key);
  assertNotNull("There should be an entry for " + key + ".",entry);
  String sdkRoot=tmp.getRootPath().resolve(XCODE_DEVELOPER_DIR).resolve("Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk").toRealPath().toString();
  List<String> commandArgs=Lists.newArrayList("clang","-x","objective-c","-arch","i386","-mios-simulator-version-min=7.0","-fmessage-length=0","-fdiagnostics-show-note-include-stack","-fmacro-backtrace-limit=0","-std=gnu99","-fpascal-strings","-fexceptions","-fasm-blocks","-fstrict-aliasing","-fobjc-abi-version=2","-fobjc-legacy-dispatch","-O0","-g","-MMD","-fobjc-arc","-isysroot",sdkRoot,"-F" + sdkRoot + "/System/Library/Frameworks/Foundation.framework");
  for (  String framework : additionalFrameworks) {
    commandArgs.add("-F" + sdkRoot + framework);
  }
  for (  String include : includes) {
    commandArgs.add("-I" + tmp.getRootPath().resolve(include).toRealPath());
  }
  commandArgs.addAll(ImmutableList.of("-iquote",iquoteArg,"-c",entry.file));
  if (isPublicHeader) {
    commandArgs.add("public");
  }
  MoreAsserts.assertIterablesEquals(commandArgs,ImmutableList.copyOf(entry.command.split(" ")));
}
