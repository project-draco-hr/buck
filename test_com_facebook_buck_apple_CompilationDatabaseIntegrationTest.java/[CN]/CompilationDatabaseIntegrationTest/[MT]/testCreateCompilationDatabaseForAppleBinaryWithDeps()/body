{
  Path compilationDatabase=workspace.buildAndReturnOutput("//Apps/Weather:Weather#iphonesimulator-x86_64,compilation-database");
  assertEquals(Paths.get("buck-out/gen/Apps/Weather/" + "__Weather#compilation-database,iphonesimulator-x86_64.json"),tmp.getRootPath().relativize(compilationDatabase));
  Map<String,CxxCompilationDatabaseEntry> fileToEntry=CxxCompilationDatabaseEntry.parseCompilationDatabaseJsonFile(compilationDatabase);
  ImmutableSet<String> frameworks=ImmutableSet.of(Paths.get("/System/Library/Frameworks/Foundation.framework").getParent().toString(),Paths.get("/System/Library/Frameworks/UIKit.framework").getParent().toString());
  String pathToPrivateHeaders="buck-out/gen/Apps/Weather/" + "Weather#header-symlink-tree,iphonesimulator-x86_64";
  String pathToPublicHeaders="buck-out/gen/Libraries/" + "EXExample/EXExample#exported-header-symlink-tree,iphonesimulator-x86_64";
  Iterable<String> includes=ImmutableList.of(pathToPrivateHeaders,pathToPublicHeaders);
  assertFlags("Apps/Weather/Weather/EXViewController.m","buck-out/gen/Apps/Weather/Weather#compile-Weather_" + "EXViewController.m.o,iphonesimulator-x86_64/Weather/EXViewController.m.o",false,fileToEntry,frameworks,includes);
  assertFlags("Apps/Weather/Weather/main.m","buck-out/gen/Apps/Weather/Weather#compile-Weather_" + "main.m.o,iphonesimulator-x86_64/Weather/main.m.o",false,fileToEntry,frameworks,includes);
}
