{
  ImmutableSet<String> blacklistedWifi=ImmutableSet.copyOf(Splitter.on(",").trimResults().omitEmptyStrings().split(getValue("cache","blacklisted_wifi_ssids").or("")));
  if (currentWifiSsid.isPresent() && blacklistedWifi.contains(currentWifiSsid.get())) {
    return null;
  }
  String cacheCassandraMode=getValue("cache","cassandra_mode").or(DEFAULT_CASSANDRA_MODE);
  final boolean doStore;
  try {
    doStore=CassandraMode.valueOf(cacheCassandraMode).doStore;
  }
 catch (  IllegalArgumentException e) {
    throw new HumanReadableException("Unusable cache.cassandra_mode: '%s'",cacheCassandraMode);
  }
  String cacheHosts=getValue("cache","hosts").or("");
  int port=Integer.parseInt(getValue("cache","port").or(DEFAULT_CASSANDRA_PORT));
  int timeoutSeconds=Integer.parseInt(getValue("cache","connection_timeout_seconds").or(DEFAULT_CASSANDRA_TIMEOUT_SECONDS));
  try {
    return new CassandraArtifactCache(cacheHosts,port,timeoutSeconds,doStore,buckEventBus);
  }
 catch (  ConnectionException e) {
    buckEventBus.post(ThrowableLogEvent.create(e,"Cassandra cache connection failure."));
    return null;
  }
}
