{
  ImmutableList.Builder<File> configFileBuilder=ImmutableList.builder();
  Path homeDirectory=Paths.get(System.getProperty("user.home"));
  File userConfigDir=homeDirectory.resolve(DEFAULT_BUCK_CONFIG_DIRECTORY_NAME).toFile();
  if (userConfigDir.isDirectory()) {
    File userConfigFiles[]=userConfigDir.listFiles();
    Arrays.sort(userConfigFiles);
    for (    File userConfigFile : userConfigFiles) {
      configFileBuilder.add(userConfigFile);
    }
  }
  File userConfigFile=homeDirectory.resolve(DEFAULT_BUCK_CONFIG_FILE_NAME).toFile();
  if (userConfigFile.isFile()) {
    configFileBuilder.add(userConfigFile);
  }
  File configFile=projectFilesystem.getFileForRelativePath(DEFAULT_BUCK_CONFIG_FILE_NAME);
  if (configFile.isFile()) {
    configFileBuilder.add(configFile);
  }
  File overrideConfigFile=projectFilesystem.getFileForRelativePath(DEFAULT_BUCK_CONFIG_OVERRIDE_FILE_NAME);
  if (overrideConfigFile.isFile()) {
    configFileBuilder.add(overrideConfigFile);
  }
  ImmutableList<File> configFiles=configFileBuilder.build();
  return BuckConfig.createFromFiles(projectFilesystem,configFiles,platform,environment,configOverrides);
}
