{
  URL url;
  try {
    url=new URL(getValue("cache","http_url").or(DEFAULT_HTTP_URL));
  }
 catch (  MalformedURLException e) {
    throw new HumanReadableException(e,"Malformed [cache]http_url: %s",e.getMessage());
  }
  int timeoutSeconds=Integer.parseInt(getValue("cache","http_timeout_seconds").or(DEFAULT_HTTP_CACHE_TIMEOUT_SECONDS));
  boolean doStore=readCacheMode("http_mode",DEFAULT_HTTP_CACHE_MODE);
  String localhost;
  try {
    localhost=InetAddress.getLocalHost().getHostName();
  }
 catch (  UnknownHostException e) {
    localhost="<unknown>";
  }
  return new HttpArtifactCache(url,timeoutSeconds,doStore,projectFilesystem,buckEventBus,Hashing.crc32(),ImmutableMap.of("X-BuckCache-User",System.getProperty("user.name"),"X-BuckCache-Host",localhost));
}
