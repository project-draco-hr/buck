{
  RepositorySystem repoSys=locator.getService(RepositorySystem.class);
  RepositorySystemSession session=newSession(repoSys);
  ImmutableMap<String,Artifact> knownDeps=getRunTimeTransitiveDeps(repoSys,session,mavenCoords);
  MutableDirectedGraph<Artifact> graph=buildDependencyGraph(repoSys,session,knownDeps);
  Map<Path,SortedSet<Prebuilt>> buckFiles=new HashMap<>();
  for (  Artifact artifact : graph.getNodes()) {
    downloadArtifact(artifact,repoSys,session,buckFiles,graph);
  }
  createBuckFiles(buckFiles);
}
