{
  final Path localRepoRoot=Paths.get("/opt/local/repo");
  Function<Optional<String>,Path> cellRoots=new Function<Optional<String>,Path>(){
    @Override public Path apply(    Optional<String> cellName){
      if (!"localreponame".equals(cellName.orNull())) {
        throw new RuntimeException("Path should have been present");
      }
      return localRepoRoot;
    }
  }
;
  String targetStr="@localreponame//foo/bar:baz";
  BuildTarget buildTarget=parser.parse(targetStr,fullyQualifiedParser,cellRoots);
  assertEquals("//foo/bar:baz",buildTarget.getFullyQualifiedName());
  assertFalse(buildTarget.getCell().isPresent());
  assertEquals(localRepoRoot,buildTarget.getCellPath());
}
