{
  ProcessBuilder processBuilder=new ProcessBuilder(buildArgs());
  processBuilder.environment().clear();
  processBuilder.environment().putAll(environment);
  buckPyProcess=processBuilder.start();
  OutputStream stdin=buckPyProcess.getOutputStream();
  InputStream stderr=buckPyProcess.getErrorStream();
  Thread stderrConsumer=Threads.namedThread(ProjectBuildFileParser.class.getSimpleName(),new InputStreamConsumer(stderr,console.getStdErr(),console.getAnsi()));
  stderrConsumer.start();
  buckPyStdinWriter=new BufferedWriter(new OutputStreamWriter(stdin));
  Reader reader=new InputStreamReader(buckPyProcess.getInputStream(),Charsets.UTF_8);
  buckPyStdoutParser=new BuildFileToJsonParser(reader,isServerMode);
}
