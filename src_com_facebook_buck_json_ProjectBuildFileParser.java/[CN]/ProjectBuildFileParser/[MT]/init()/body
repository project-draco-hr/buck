{
  ProcessBuilder processBuilder=new ProcessBuilder(buildArgs());
  processBuilder.environment().clear();
  processBuilder.environment().putAll(environment);
  LOG.debug("Starting buck.py command: %s environment: %s",processBuilder.command(),processBuilder.environment());
  buckPyProcess=processBuilder.start();
  LOG.debug("Started process %s successfully",buckPyProcess);
  OutputStream stdin=buckPyProcess.getOutputStream();
  InputStream stderr=buckPyProcess.getErrorStream();
  Thread stderrConsumer=Threads.namedThread(ProjectBuildFileParser.class.getSimpleName(),new InputStreamConsumer(stderr,console.getStdErr(),console.getAnsi(),true));
  stderrConsumer.start();
  buckPyStdinWriter=new BufferedWriter(new OutputStreamWriter(stdin));
  Reader reader=new InputStreamReader(buckPyProcess.getInputStream(),Charsets.UTF_8);
  buckPyStdoutParser=new BuildFileToJsonParser(reader,isServerMode);
}
