{
  Path emptyPath=Paths.get("");
  Preconditions.checkArgument(path1.isAbsolute() == path2.isAbsolute(),"Both paths must be absolute or both paths must be relative. (%s is %s, %s is %s)",path1,path1.isAbsolute() ? "absolute" : "relative",path2,path2.isAbsolute() ? "absolute" : "relative");
  if (!path1.equals(emptyPath)) {
    path1=path1.normalize();
  }
  if (!path2.equals(emptyPath)) {
    path2=path2.normalize();
  }
  return path1.relativize(path2);
}
