{
  ImmutableSortedSet.Builder<Path> classpath=ImmutableSortedSet.naturalOrder();
  ImmutableCollection<Path> depPaths=Classpaths.getClasspathEntries(getDeclaredDeps()).values();
  classpath.addAll(depPaths);
  readBuckClasspath(classpath);
  ImmutableSortedSet<Path> declaredClasspath=classpath.build();
  ImmutableList.Builder<Step> steps=ImmutableList.builder();
  steps.add(new MakeCleanDirectoryStep(working));
  steps.add(new MkdirStep(output.getParent()));
  steps.add(new JavacStep(working,Optional.<Path>absent(),ImmutableSet.copyOf(getResolver().getAllPaths(srcs)),Optional.<Path>absent(),ImmutableSortedSet.<Path>of(),declaredClasspath,javacOptions,getBuildTarget(),BuildDependencies.FIRST_ORDER_ONLY,Optional.<JavacStep.SuggestBuildRules>absent(),getResolver()));
  steps.add(new CopyResourcesStep(getResolver(),getBuildTarget(),resources,output,context.getJavaPackageFinder()));
  steps.add(new JarDirectoryStep(output,ImmutableSortedSet.<Path>naturalOrder().add(working).addAll(depPaths).build(),null,null));
  return steps.build();
}
