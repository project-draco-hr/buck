{
  BuildTarget headerMapFileTarget=createHeaderMapFileTarget(params.getBuildTarget(),cxxPlatform.getFlavor(),headerVisibility);
  Path headerMapFilePath=getHeaderMapFilePath(params.getBuildTarget(),cxxPlatform.getFlavor(),headerVisibility);
  CxxHeaderSourceSpec lexYaccSources;
  if (includeLexYaccHeaders) {
    lexYaccSources=requireLexYaccSources(params,ruleResolver,pathResolver,cxxPlatform,lexSources,yaccSources);
  }
 else {
    lexYaccSources=ImmutableCxxHeaderSourceSpec.builder().build();
  }
  return CxxPreprocessables.createHeaderMapFileBuildRule(pathResolver,headerMapFileTarget,params,headerMapFilePath,ImmutableMap.<Path,SourcePath>builder().putAll(headers).putAll(lexYaccSources.getCxxHeaders()).build());
}
