{
  if (params.getBuildTarget().getFlavors().contains(APP_FLAVOR)) {
    if (!args.infoPlist.isPresent()) {
      throw new HumanReadableException("Cannot create application for apple_binary '%s':\n","No value specified for 'info_plist' attribute.",params.getBuildTarget().getUnflavoredBuildTarget());
    }
    Optional<AppleBundle.DebugInfoFormat> flavoredDebugInfoFormat;
    try {
      flavoredDebugInfoFormat=AppleBundle.DEBUG_INFO_FORMAT_FLAVOR_DOMAIN.getValue(ImmutableSet.copyOf(params.getBuildTarget().getFlavors()));
    }
 catch (    FlavorDomainException e) {
      throw new HumanReadableException("%s: %s",params.getBuildTarget(),e.getMessage());
    }
    BuildTarget binaryTarget=params.withoutFlavor(APP_FLAVOR).getBuildTarget();
    return AppleDescriptions.createAppleBundle(cxxPlatformFlavorDomain,defaultCxxPlatform,platformFlavorsToAppleCxxPlatforms,targetGraph,params,resolver,codeSignIdentityStore,provisioningProfileStore,binaryTarget,Either.<AppleBundleExtension,String>ofLeft(AppleBundleExtension.APP),Optional.<String>absent(),args.infoPlist.get(),args.infoPlistSubstitutions,args.getTests(),flavoredDebugInfoFormat.or(defaultDebugInfoFormat));
  }
  return createBinary(targetGraph,params,resolver,args);
}
