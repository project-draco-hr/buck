{
  Optional<AppleDebugFormat> flavoredDebugInfoFormat=AppleDebugFormat.FLAVOR_DOMAIN.getValue(params.getBuildTarget());
  BuildTarget binaryBuildTarget=params.getBuildTarget().withoutFlavors(AppleDebugFormat.FLAVOR_DOMAIN.getFlavors());
  BuildRule binaryBuildRule=createBinary(targetGraph,params.copyWithBuildTarget(binaryBuildTarget),resolver,args);
  if (flavoredDebugInfoFormat.isPresent() && (binaryBuildRule instanceof CxxBinary || binaryBuildRule instanceof FatBinary)) {
    return AppleDescriptions.createAppleDebuggableBinary(delegate.getCxxPlatforms(),delegate.getDefaultCxxPlatform(),platformFlavorsToAppleCxxPlatforms,params.copyWithBuildTarget(binaryBuildTarget),targetGraph,resolver,binaryBuildRule,args.linkStyle.or(Linker.LinkableDepType.STATIC),flavoredDebugInfoFormat.get());
  }
  return binaryBuildRule;
}
