{
  ImmutableSortedMap<String,ImmutableMap<String,String>> configs=ImmutableSortedMap.of("Debug",ImmutableMap.of("HEADER_SEARCH_PATHS","headers","USER_HEADER_SEARCH_PATHS","user_headers","LIBRARY_SEARCH_PATHS","libraries","FRAMEWORK_SEARCH_PATHS","frameworks"));
  BuildTarget libraryTarget=BuildTarget.builder("//foo","lib").build();
  TargetNode<?> libraryNode=AppleLibraryBuilder.createBuilder(libraryTarget).setConfigs(Optional.of(configs)).setUseBuckHeaderMaps(Optional.of(false)).setSrcs(Optional.of(ImmutableSortedSet.of(SourceWithFlags.of(new TestSourcePath("foo.m"))))).setFrameworks(Optional.of(ImmutableSortedSet.of(FrameworkPath.ofSourceTreePath(new SourceTreePath(PBXReference.SourceTree.SDKROOT,Paths.get("Library.framework"),Optional.<String>absent()))))).build();
  BuildTarget testTarget=BuildTarget.builder("//foo","xctest").build();
  TargetNode<?> testNode=AppleTestBuilder.createBuilder(testTarget).setExtension(Either.<AppleBundleExtension,String>ofLeft(AppleBundleExtension.XCTEST)).setConfigs(Optional.of(configs)).setInfoPlist(new TestSourcePath("Info.plist")).setUseBuckHeaderMaps(Optional.of(false)).setSrcs(Optional.of(ImmutableSortedSet.of(SourceWithFlags.of(new TestSourcePath("fooTest.m"))))).setFrameworks(Optional.of(ImmutableSortedSet.of(FrameworkPath.ofSourceTreePath(new SourceTreePath(PBXReference.SourceTree.SDKROOT,Paths.get("Test.framework"),Optional.<String>absent()))))).setDeps(Optional.of(ImmutableSortedSet.of(libraryTarget))).build();
  ProjectGenerator projectGenerator=createProjectGeneratorForCombinedProject(ImmutableSet.of(libraryNode,testNode),ImmutableSet.<ProjectGenerator.Option>of());
  projectGenerator.createXcodeProjects();
  PBXTarget target=assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//foo:xctest");
  ImmutableMap<String,String> settings=getBuildSettings(testTarget,target,"Debug");
  assertEquals("headers $BUILT_PRODUCTS_DIR/F4XWM33PHJWGSYQ/Headers",settings.get("HEADER_SEARCH_PATHS"));
  assertEquals("user_headers",settings.get("USER_HEADER_SEARCH_PATHS"));
  assertEquals("libraries $BUILT_PRODUCTS_DIR",settings.get("LIBRARY_SEARCH_PATHS"));
  assertEquals("frameworks $BUILT_PRODUCTS_DIR $SDKROOT",settings.get("FRAMEWORK_SEARCH_PATHS"));
}
