{
synchronized (this) {
    if (!closed) {
      flush();
      closed=true;
    }
  }
}
