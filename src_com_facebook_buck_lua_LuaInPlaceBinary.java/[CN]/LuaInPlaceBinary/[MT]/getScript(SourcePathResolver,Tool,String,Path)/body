{
  final String relativeLinkTreeRootStr=Escaper.escapeAsPythonString(relativeLinkTreeRoot.toString());
  return new Supplier<String>(){
    @Override public String get(){
      ImmutableList<String> luaCommand=lua.getCommandPrefix(pathResolver);
      Preconditions.checkArgument(luaCommand.size() == 1);
      return new ST(getRunInplaceResource()).add("SHEBANG",luaCommand.get(0)).add("LUA",Escaper.escapeAsPythonString(luaCommand.get(0))).add("MAIN_MODULE",Escaper.escapeAsPythonString(mainModule)).add("MODULES_DIR",relativeLinkTreeRootStr).render();
    }
  }
;
}
