{
  ImmutableList.Builder<Step> steps=ImmutableList.builder();
  final Path jsOutput=jsOutputDir.resolve(bundleName);
  steps.add(new MakeCleanDirectoryStep(jsOutput.getParent()));
  steps.add(new MakeCleanDirectoryStep(resource));
  final Path sourceMapOutput=getPathToSourceMap(getBuildTarget());
  steps.add(new MakeCleanDirectoryStep(sourceMapOutput.getParent()));
  steps.add(new ShellStep(getProjectFilesystem().getRootPath()){
    @Override public String getShortName(){
      return "bundle_react_native";
    }
    @Override protected ImmutableList<String> getShellCommandInternal(    ExecutionContext context){
      return getBundleScript(getResolver().getPath(jsPackager),getProjectFilesystem().resolve(getResolver().getPath(entryPath)),platform,isDevMode,getProjectFilesystem().resolve(jsOutput).toString(),getProjectFilesystem().resolve(resource).toString(),getProjectFilesystem().resolve(sourceMapOutput).toString());
    }
  }
);
  buildableContext.recordArtifact(jsOutputDir);
  buildableContext.recordArtifact(resource);
  buildableContext.recordArtifact(sourceMapOutput);
  return steps.build();
}
