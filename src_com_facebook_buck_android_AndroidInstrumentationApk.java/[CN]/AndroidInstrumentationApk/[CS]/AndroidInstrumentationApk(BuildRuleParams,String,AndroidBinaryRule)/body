{
  super(buildRuleParams,manifest,apkUnderTest.getTarget(),apkUnderTest.getKeystorePropertiesPath(),PackageType.INSTRUMENTED,ImmutableSet.<BuildRule>builder().addAll(apkUnderTest.getBuildRulesToExcludeFromDex()).addAll(Classpaths.getClasspathEntries(apkUnderTest.getDeps()).keySet()).build(),new DexSplitMode(false,ZipSplitter.DexSplitStrategy.MAXIMIZE_PRIMARY_DEX_SIZE,DexStore.JAR),apkUnderTest.isUseAndroidProguardConfigWithOptimizations(),apkUnderTest.getProguardConfig().transform(new Function<String,SourcePath>(){
    @Override public SourcePath apply(    String pathRelativeToProjectRoot){
      return new FileSourcePath(pathRelativeToProjectRoot);
    }
  }
),apkUnderTest.isCompressResources(),apkUnderTest.getPrimaryDexSubstrings(),apkUnderTest.getResourceFilter(),apkUnderTest.getCpuFilter());
  this.apkUnderTest=apkUnderTest;
}
