{
  SourcePathResolver resolver=new SourcePathResolver(new BuildRuleResolver());
  BuildTarget javaLibraryTarget=BuildTarget.builder("//java/com/example","lib").build();
  JavaLibrary javaLibrary=new FakeJavaLibrary(javaLibraryTarget,resolver);
  BuildTarget buildTarget=BuildTarget.builder("//java/com/example","lib").addFlavors(ImmutableFlavor.of("dex")).build();
  BuildRuleParams params=new FakeBuildRuleParamsBuilder(buildTarget).build();
  DexProducedFromJavaLibrary dexFromJavaLibrary=new DexProducedFromJavaLibrary(params,resolver,javaLibrary);
  dexFromJavaLibrary.getBuildOutputInitializer().setBuildOutput(new DexProducedFromJavaLibrary.BuildOutput(1600,ImmutableSortedMap.<String,HashCode>of()));
  DexWithClasses dexWithClasses=DexWithClasses.TO_DEX_WITH_CLASSES.apply(dexFromJavaLibrary);
  assertNull("If the JavaLibraryRule does not produce any .class files, " + "then DexWithClasses.TO_DEX_WITH_CLASSES should return null.",dexWithClasses);
}
