def add_source(self, filename, env_filename):
    self._chroot.link(filename, env_filename, 'source')
    if filename.endswith('.py'):
        env_filename_pyc = (os.path.splitext(env_filename)[0] + '.pyc')
        with open(filename) as fp:
            pyc_object = CodeMarshaller.from_py(fp.read(), env_filename)
        self._chroot.write(pyc_object.to_pyc(), env_filename_pyc, 'source')
