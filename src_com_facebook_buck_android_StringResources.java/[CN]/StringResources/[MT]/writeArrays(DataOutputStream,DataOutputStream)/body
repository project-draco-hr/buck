{
  if (arrays.keySet().isEmpty()) {
    return;
  }
  boolean first=true;
  int smallestResourceId=0;
  for (  int resourceId : arrays.keySet()) {
    if (first) {
      first=false;
      smallestResourceId=resourceId;
      mapStream.writeInt(smallestResourceId);
    }
    Collection<String> arrayValues=arrays.get(resourceId);
    dataStream.writeByte(arrayValues.size());
    int resourceDataLength=1;
    for (    String arrayValue : arrayValues) {
      byte[] byteValue=arrayValue.getBytes(charset);
      dataStream.writeShort(byteValue.length);
      dataStream.write(byteValue);
      resourceDataLength+=2 + byteValue.length;
    }
    writeMapEntry(mapStream,resourceId - smallestResourceId,resourceDataLength);
  }
}
