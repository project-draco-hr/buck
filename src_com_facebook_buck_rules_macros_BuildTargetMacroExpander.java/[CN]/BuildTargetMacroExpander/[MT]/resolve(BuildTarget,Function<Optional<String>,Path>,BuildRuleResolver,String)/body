{
  BuildTarget other;
  try {
    other=BuildTargetParser.INSTANCE.parse(input,BuildTargetPatternParser.forBaseName(target.getBaseName()),cellNames);
  }
 catch (  BuildTargetParseException e) {
    throw new MacroException(e.getMessage(),e);
  }
  Optional<BuildRule> rule=resolver.getRuleOptional(other);
  if (!rule.isPresent()) {
    throw new MacroException(String.format("no rule %s",other));
  }
  return rule.get();
}
