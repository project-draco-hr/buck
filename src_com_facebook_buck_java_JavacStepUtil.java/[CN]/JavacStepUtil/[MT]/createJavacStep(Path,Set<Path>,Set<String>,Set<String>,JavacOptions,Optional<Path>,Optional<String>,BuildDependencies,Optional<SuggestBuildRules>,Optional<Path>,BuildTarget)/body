{
  if (javacOptions.getJavaCompilerEnvironment().getJavacPath().isPresent()) {
    return new ExternalJavacStep(outputDirectory,javaSourceFilePaths,transitiveClasspathEntries,declaredClasspathEntries,javacOptions,pathToOutputAbiFile,invokingRule,buildDependencies,suggestBuildRules,pathToSrcsList,buildTarget);
  }
 else {
    return new JavacInMemoryStep(outputDirectory,javaSourceFilePaths,transitiveClasspathEntries,declaredClasspathEntries,javacOptions,pathToOutputAbiFile,invokingRule,buildDependencies,suggestBuildRules,pathToSrcsList);
  }
}
