{
  if (javacOptions.getJavaCompilerEnvironment().getJavacPath().isPresent()) {
    return new ExternalJavacStep(outputDirectory,javaSourceFilePaths,transitiveClasspathEntries,declaredClasspathEntries,javacOptions,invokingRule,buildDependencies,suggestBuildRules,pathToSrcsList,buildTarget,workingDirectory);
  }
 else {
    return new JavacInMemoryStep(outputDirectory,javaSourceFilePaths,transitiveClasspathEntries,declaredClasspathEntries,javacOptions,invokingRule,buildDependencies,suggestBuildRules,pathToSrcsList);
  }
}
