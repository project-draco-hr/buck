{
  ImmutableSet.Builder<String> builder=ImmutableSet.builder();
  String projectRootCanonicalFullPathWithEndSlash=projectRoot.getCanonicalPath() + File.separator;
  for (  String filePath : nonCanonicalFilePaths) {
    String canonicalFullPath=new File(filePath).getCanonicalPath();
    if (canonicalFullPath.startsWith(projectRootCanonicalFullPathWithEndSlash)) {
      String relativePath=canonicalFullPath.substring(projectRootCanonicalFullPathWithEndSlash.length());
      builder.add(MorePaths.pathWithUnixSeparators(relativePath));
    }
  }
  return builder.build();
}
