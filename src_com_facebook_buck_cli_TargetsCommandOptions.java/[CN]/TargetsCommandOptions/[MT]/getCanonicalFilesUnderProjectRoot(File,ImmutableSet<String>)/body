{
  ImmutableSet.Builder<String> builder=ImmutableSet.builder();
  String projectRootCanonicalFullPathWithEndSlash=projectRoot.getCanonicalPath() + File.separator;
  for (  String filePath : nonCanonicalFilePaths) {
    String canonicalFullPath=new File(filePath).getCanonicalPath();
    if (canonicalFullPath.startsWith(projectRootCanonicalFullPathWithEndSlash)) {
      builder.add(Paths.normalizePathSeparator(canonicalFullPath.substring(projectRootCanonicalFullPathWithEndSlash.length())));
    }
  }
  return builder.build();
}
