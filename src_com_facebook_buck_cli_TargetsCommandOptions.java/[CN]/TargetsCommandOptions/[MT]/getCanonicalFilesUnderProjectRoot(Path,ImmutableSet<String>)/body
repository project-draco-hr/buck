{
  ImmutableSet.Builder<String> builder=ImmutableSet.builder();
  Path normalizedRoot=projectRoot.normalize();
  for (  String filePath : nonCanonicalFilePaths) {
    Path canonicalFullPath=Paths.get(filePath).toAbsolutePath().normalize();
    if (canonicalFullPath.startsWith(normalizedRoot)) {
      Path relativePath=canonicalFullPath.subpath(normalizedRoot.getNameCount(),canonicalFullPath.getNameCount());
      builder.add(MorePaths.pathWithUnixSeparators(relativePath));
    }
  }
  return builder.build();
}
