{
  BuildRuleResolver resolver=new BuildRuleResolver();
  Path thriftPath=Paths.get("thrift_path");
  FakeProjectFilesystem filesystem=new FakeProjectFilesystem();
  filesystem.touch(thriftPath);
  FakeBuckConfig buckConfig=new FakeBuckConfig(ImmutableMap.<String,Map<String,String>>of("thrift",ImmutableMap.of("compiler_path",thriftPath.toString())),filesystem);
  ThriftBuckConfig thriftBuckConfig=new ThriftBuckConfig(buckConfig);
  SourcePath compiler=thriftBuckConfig.getCompiler(resolver);
  assertTrue(compiler instanceof PathSourcePath);
  assertTrue(new SourcePathResolver(resolver).getPath(compiler).equals(filesystem.resolve(thriftPath)));
}
