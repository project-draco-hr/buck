{
  futures.add(future);
  Futures.addCallback(future,new FutureCallback<OperationResult<Void>>(){
    @Override public void onSuccess(    OperationResult<Void> result){
      removeFuture();
    }
    @Override public void onFailure(    Throwable t){
      removeFuture();
    }
    private void removeFuture(){
      if (!isWaitingToClose.get()) {
        futures.remove(future);
      }
    }
  }
);
}
