{
  if (!isStoreSupported()) {
    return;
  }
  Optional<KeyspaceAndTtl> keyspaceAndTtl=getKeyspaceAndTtl();
  if (!keyspaceAndTtl.isPresent()) {
    return;
  }
  try {
    Keyspace keyspace=keyspaceAndTtl.get().getKeyspace();
    int ttl=keyspaceAndTtl.get().getTtl();
    MutationBatch mutationBatch=keyspace.prepareMutationBatch();
    mutationBatch.withRow(CF_ARTIFACT,ruleKey.toString()).setDefaultTtl(ttl).putColumn(artifactColumnName,Files.toByteArray(output));
    mutationBatch.executeAsync();
  }
 catch (  ConnectionException e) {
    reportConnectionFailure("Attempting to store " + ruleKey + ".",e);
  }
catch (  IOException|OutOfMemoryError e) {
    buckEventBus.post(ThrowableLogEvent.create(e,"Artifact store(%s, %s) error: %s",ruleKey,output.getPath()));
  }
}
