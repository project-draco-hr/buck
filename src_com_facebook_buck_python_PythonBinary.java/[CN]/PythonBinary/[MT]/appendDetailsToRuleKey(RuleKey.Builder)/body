{
  builder.set("packageType","pex").set("pythonVersion",pythonEnvironment.getPythonVersion().toString()).set("mainModule",main.toString());
  for (  ImmutableMap.Entry<String,ImmutableMap<Path,SourcePath>> part : ImmutableMap.of("module",components.getModules(),"resource",components.getResources(),"nativeLibraries",components.getNativeLibraries()).entrySet()) {
    for (    Path name : ImmutableSortedSet.copyOf(part.getValue().keySet())) {
      Path src=part.getValue().get(name).resolve();
      builder.setInput(part.getKey() + ":" + name,src);
    }
  }
  return builder;
}
