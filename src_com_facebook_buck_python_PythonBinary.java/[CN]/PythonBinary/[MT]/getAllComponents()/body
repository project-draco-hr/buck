{
  final PythonPackageComponents.Builder components=new PythonPackageComponents.Builder(getBuildTarget().toString());
  components.addModule(main,main,getBuildTarget().toString());
  new AbstractDependencyVisitor(deps){
    @Override public ImmutableSet<BuildRule> visit(    BuildRule rule){
      Buildable buildable=rule.getBuildable();
      if (buildable instanceof PythonPackagable) {
        PythonPackagable lib=(PythonPackagable)buildable;
        components.addComponent(lib.getPythonPackageComponents(),rule.getBuildTarget().toString());
        return rule.getDeps();
      }
      return ImmutableSet.of();
    }
  }
.start();
  return components.build();
}
