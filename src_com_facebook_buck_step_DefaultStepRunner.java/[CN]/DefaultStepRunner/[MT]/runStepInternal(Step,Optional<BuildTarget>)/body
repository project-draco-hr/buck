{
  Preconditions.checkNotNull(step);
  if (context.getVerbosity().shouldPrintCommand()) {
    context.getStdErr().println(step.getDescription(context));
  }
  context.postEvent(StepEvent.started(step,step.getDescription(context)));
  int exitCode=1;
  try {
    exitCode=step.execute(context);
  }
 catch (  Throwable t) {
    throw StepFailedException.createForFailingStepWithException(step,context,t,buildTarget);
  }
 finally {
    context.postEvent(StepEvent.finished(step,step.getDescription(context),exitCode));
  }
  if (exitCode != 0) {
    throw StepFailedException.createForFailingStepWithExitCode(step,context,exitCode,buildTarget);
  }
}
