{
  MakeCleanDirectoryStep mkDir=new MakeCleanDirectoryStep(filesystem,ocamlContext.getGeneratedSourceDir());
  int mkDirExitCode=mkDir.execute(context);
  if (mkDirExitCode != 0) {
    return mkDirExitCode;
  }
  for (  SourcePath yaccSource : ocamlContext.getYaccInput()) {
    SourcePath output=ocamlContext.getYaccOutput(ImmutableSet.of(yaccSource)).get(0);
    OCamlYaccStep yaccStep=new OCamlYaccStep(workingDirectory,resolver,new OCamlYaccStep.Args(ocamlContext.getYaccCompiler().get(),resolver.getAbsolutePath(output),resolver.getAbsolutePath(yaccSource)));
    int yaccExitCode=yaccStep.execute(context);
    if (yaccExitCode != 0) {
      return yaccExitCode;
    }
  }
  for (  SourcePath lexSource : ocamlContext.getLexInput()) {
    SourcePath output=ocamlContext.getLexOutput(ImmutableSet.of(lexSource)).get(0);
    OCamlLexStep lexStep=new OCamlLexStep(workingDirectory,resolver,new OCamlLexStep.Args(ocamlContext.getLexCompiler().get(),resolver.getAbsolutePath(output),resolver.getAbsolutePath(lexSource)));
    int lexExitCode=lexStep.execute(context);
    if (lexExitCode != 0) {
      return lexExitCode;
    }
  }
  return 0;
}
