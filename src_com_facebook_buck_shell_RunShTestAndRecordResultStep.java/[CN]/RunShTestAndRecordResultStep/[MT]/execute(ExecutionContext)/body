{
  TestResultSummary summary;
  if (context.getPlatform() == Platform.WINDOWS) {
    summary=new TestResultSummary(getShortName(),"sh_test",ResultType.SUCCESS,0,"sh_test ignored on Windows",null,null,null);
  }
 else {
    ShellStep test=new ShellStep(){
      @Override public String getShortName(){
        return pathToShellScript.toString();
      }
      @Override protected ImmutableList<String> getShellCommandInternal(      ExecutionContext context){
        return ImmutableList.of(pathToShellScript.toString());
      }
      @Override protected boolean shouldPrintStderr(      Verbosity verbosity){
        return false;
      }
      @Override protected boolean shouldPrintStdout(      Verbosity verbosity){
        return false;
      }
    }
;
    int exitCode=test.execute(context);
    boolean isSuccess=exitCode == 0;
    summary=new TestResultSummary(getShortName(),"sh_test",isSuccess ? ResultType.SUCCESS : ResultType.FAILURE,test.getDuration(),null,null,test.getStdout(),test.getStderr());
  }
  ObjectMapper mapper=new ObjectMapper();
  try {
    mapper.writeValue(Files.newWriter(new File(pathToTestResultFile),Charsets.UTF_8),summary);
  }
 catch (  IOException e) {
    throw Throwables.propagate(e);
  }
  return 0;
}
