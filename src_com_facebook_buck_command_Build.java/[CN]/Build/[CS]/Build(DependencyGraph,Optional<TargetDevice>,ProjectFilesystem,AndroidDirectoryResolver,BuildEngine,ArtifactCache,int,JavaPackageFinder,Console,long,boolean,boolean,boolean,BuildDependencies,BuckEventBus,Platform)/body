{
  this.dependencyGraph=Preconditions.checkNotNull(dependencyGraph);
  Optional<AndroidPlatformTarget> androidPlatformTarget=findAndroidPlatformTarget(dependencyGraph,androidDirectoryResolver,eventBus);
  this.executionContext=ExecutionContext.builder().setProjectFilesystem(projectFilesystem).setConsole(console).setAndroidPlatformTarget(androidPlatformTarget).setTargetDevice(targetDevice).setDefaultTestTimeoutMillis(defaultTestTimeoutMillis).setCodeCoverageEnabled(isCodeCoverageEnabled).setJacocoEnabled(isJacocoEnabled).setDebugEnabled(isDebugEnabled).setEventBus(eventBus).setPlatform(platform).build();
  this.artifactCache=Preconditions.checkNotNull(artifactCache);
  this.buildEngine=Preconditions.checkNotNull(buildEngine);
  this.stepRunner=new DefaultStepRunner(executionContext,numThreads);
  this.javaPackageFinder=Preconditions.checkNotNull(javaPackageFinder);
  this.buildDependencies=Preconditions.checkNotNull(buildDependencies);
}
