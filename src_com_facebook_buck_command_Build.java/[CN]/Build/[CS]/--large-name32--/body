{
  this.actionGraph=Preconditions.checkNotNull(actionGraph);
  Optional<AndroidPlatformTarget> androidPlatformTarget=findAndroidPlatformTarget(actionGraph,androidDirectoryResolver,eventBus,buckConfig);
  this.executionContext=ExecutionContext.builder().setProjectFilesystem(projectFilesystem).setConsole(console).setAndroidPlatformTarget(androidPlatformTarget).setTargetDevice(targetDevice).setDefaultTestTimeoutMillis(defaultTestTimeoutMillis).setCodeCoverageEnabled(isCodeCoverageEnabled).setJacocoEnabled(isJacocoEnabled).setDebugEnabled(isDebugEnabled).setEventBus(eventBus).setPlatform(platform).setEnvironment(environment).build();
  this.artifactCache=Preconditions.checkNotNull(artifactCache);
  this.buildEngine=Preconditions.checkNotNull(buildEngine);
  this.stepRunner=new DefaultStepRunner(executionContext,numThreads);
  this.javaPackageFinder=Preconditions.checkNotNull(javaPackageFinder);
  this.buildDependencies=Preconditions.checkNotNull(buildDependencies);
}
