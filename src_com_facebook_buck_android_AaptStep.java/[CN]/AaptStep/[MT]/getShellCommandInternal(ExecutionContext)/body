{
  ImmutableList.Builder<String> builder=ImmutableList.builder();
  AndroidPlatformTarget androidPlatformTarget=context.getAndroidPlatformTarget();
  if (aaptOverride.isPresent()) {
    builder.add(aaptOverride.get().toString());
  }
 else {
    builder.add(androidPlatformTarget.getAaptExecutable().toString());
  }
  builder.add("package");
  if (context.getVerbosity().shouldUseVerbosityFlagIfAvailable()) {
    builder.add("-v");
  }
  builder.add("-f");
  builder.add("--auto-add-overlay");
  for (  Path res : resDirectories) {
    builder.add("-S",res.toString());
  }
  if (assetsDirectory.isPresent()) {
    builder.add("-A",assetsDirectory.get().toString());
  }
  builder.add("-M").add(androidManifest.toString());
  builder.add("-I",androidPlatformTarget.getAndroidJar().toString());
  builder.add("-F",pathToOutputApkFile.toString());
  return builder.build();
}
