{
  getSection(contentsOut).off=out.getPosition();
  List<UnsortedValue> all=new ArrayList<UnsortedValue>();
  all.addAll(readUnsortedValues(dexA,aIndexMap));
  all.addAll(readUnsortedValues(dexB,bIndexMap));
  Collections.sort(all);
  int outCount=0;
  for (int i=0; i < all.size(); ) {
    UnsortedValue e1=all.get(i++);
    updateIndex(e1.offset,getIndexMap(e1.source),e1.index,outCount - 1);
    while (i < all.size() && e1.compareTo(all.get(i)) == 0) {
      UnsortedValue e2=all.get(i++);
      updateIndex(e2.offset,getIndexMap(e2.source),e2.index,outCount - 1);
    }
    write(e1.value);
    outCount++;
  }
  getSection(contentsOut).size=outCount;
}
