{
  ST template;
  try {
    template=new ST(Resources.toString(Resources.getResource(ProjectGenerator.class,BUILD_WITH_BUCK_TEMPLATE),Charsets.UTF_8));
  }
 catch (  IOException e) {
    throw new RuntimeException("There was an error loading '" + BUILD_WITH_BUCK_TEMPLATE + "' template",e);
  }
  Path pathToBuck=executableFinder.getExecutable(Paths.get("buck"),environment);
  String buildFlags=getBuildFlags();
  String escapedBuildTarget=Escaper.escapeAsBashString(targetNode.getBuildTarget().getFullyQualifiedName());
  template.add("repo_root",projectFilesystem.getRootPath());
  template.add("path_to_buck",pathToBuck);
  template.add("build_flags",buildFlags);
  template.add("escaped_build_target",escapedBuildTarget);
  return template.render();
}
