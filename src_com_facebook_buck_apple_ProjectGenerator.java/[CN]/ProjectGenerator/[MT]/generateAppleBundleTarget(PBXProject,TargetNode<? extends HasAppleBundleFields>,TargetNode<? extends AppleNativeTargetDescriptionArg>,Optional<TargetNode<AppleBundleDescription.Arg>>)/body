{
  Optional<Path> infoPlistPath;
  if (targetNode.getConstructorArg().getInfoPlist().isPresent()) {
    infoPlistPath=Optional.of(Preconditions.checkNotNull(sourcePathResolver.apply(targetNode.getConstructorArg().getInfoPlist().get())));
  }
 else {
    infoPlistPath=Optional.absent();
  }
  Iterable<TargetNode<?>> copiedRules=AppleBuildRules.getRecursiveTargetNodeDependenciesOfTypes(targetGraph,AppleBuildRules.RecursiveDependenciesMode.COPYING,targetNode,Optional.of(AppleBuildRules.XCODE_TARGET_BUILD_RULE_TYPES));
  ImmutableList<PBXBuildPhase> copyFilesBuildPhases=getCopyFilesBuildPhases(copiedRules);
  PBXNativeTarget target=generateBinaryTarget(project,Optional.of(targetNode),binaryNode,bundleToTargetProductType(targetNode,binaryNode),"%s." + getExtensionString(targetNode.getConstructorArg().getExtension()),infoPlistPath,true,AppleResources.collectRecursiveResources(targetGraph,ImmutableList.of(targetNode)),AppleBuildRules.collectRecursiveAssetCatalogs(targetGraph,ImmutableList.of(targetNode)),Optional.<Iterable<PBXBuildPhase>>of(copyFilesBuildPhases),bundleLoaderNode);
  LOG.debug("Generated iOS bundle target %s",target);
  return target;
}
