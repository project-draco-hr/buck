{
  if (stdinToWrite == null) {
    buffer.flip();
    return false;
  }
  int bytesAvailable=buffer.remaining();
  boolean wantMore;
  if (stdinToWrite.remaining() <= bytesAvailable) {
    buffer.put(stdinToWrite);
    wantMore=false;
    process.closeStdin(false);
  }
 else {
    int oldLimit=stdinToWrite.limit();
    stdinToWrite.limit(stdinToWrite.position() + bytesAvailable);
    buffer.put(stdinToWrite);
    stdinToWrite.limit(oldLimit);
    wantMore=true;
  }
  buffer.flip();
  return wantMore;
}
