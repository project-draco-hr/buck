{
  BuildRuleResolver ruleResolver=new BuildRuleResolver();
  Keystore keystore=addKeystoreRule(ruleResolver);
  AndroidBinary ruleInRootDirectory=(AndroidBinary)AndroidBinaryBuilder.newBuilder().setBuildTarget(BuildTargetFactory.newInstance("//:fb4a")).setManifest(new TestSourcePath("AndroidManifest.xml")).setKeystore(keystore).setTarget("Google Inc.:Google APIs:16").build(ruleResolver).getBuildable();
  assertEquals(Paths.get(GEN_DIR + "/fb4a.apk"),ruleInRootDirectory.getApkPath());
  AndroidBinary ruleInNonRootDirectory=(AndroidBinary)AndroidBinaryBuilder.newBuilder().setBuildTarget(BuildTargetFactory.newInstance("//java/com/example:fb4a")).setManifest(new TestSourcePath("AndroidManifest.xml")).setKeystore(keystore).setTarget("Google Inc.:Google APIs:16").build(ruleResolver).getBuildable();
  assertEquals(Paths.get(GEN_DIR + "/java/com/example/fb4a.apk"),ruleInNonRootDirectory.getApkPath());
}
