{
  CxxPlatform.Builder builder=CxxPlatform.builder();
  builder.setFlavor(flavor).setAs(getTool(flavor,"as",config).transform(GET_DEFAULT_COMPILER).or(as)).setAspp(getTool(flavor,"aspp",config).transform(GET_DEFAULT_PREPROCESSOR).or(aspp)).setCcSupplier(getToolPath(flavor,"cc",config).transform(GET_COMPILER_SUPPLIER).or(ccSupplier)).setCxxSupplier(getToolPath(flavor,"cxx",config).transform(GET_COMPILER_SUPPLIER).or(cxxSupplier)).setCppSupplier(getToolPath(flavor,"cpp",config).transform(GET_PREPROCESSOR_SUPPLIER).or(cppSupplier)).setCxxppSupplier(getToolPath(flavor,"cxxpp",config).transform(GET_PREPROCESSOR_SUPPLIER).or(cxxppSupplier)).setCuda(getTool(flavor,"cuda",config).transform(GET_DEFAULT_COMPILER)).setCudapp(getTool(flavor,"cudapp",config).transform(GET_DEFAULT_PREPROCESSOR)).setLd(getTool(flavor,"ld",config).transform(getLinker(ld.getClass(),config)).or(ld)).addAllLdflags(ldFlags).setAr(getTool(flavor,"ar",config).transform(getArchiver(ar.getClass(),config)).or(ar)).setRanlib(getTool(flavor,"ranlib",config).or(ranlib)).setStrip(getTool(flavor,"strip",config).or(strip)).setSymbolNameTool(new PosixNmSymbolNameTool(getTool(flavor,"nm",config).or(nm))).setSharedLibraryExtension(sharedLibraryExtension).setSharedLibraryVersionedExtensionFormat(sharedLibraryVersionedExtensionFormat).setDebugPathSanitizer(debugPathSanitizer.or(CxxPlatforms.DEFAULT_DEBUG_PATH_SANITIZER)).setFlagMacros(flagMacros);
  builder.addAllCflags(cflags);
  builder.addAllCxxflags(cflags);
  builder.addAllCppflags(cppflags);
  builder.addAllCxxppflags(cppflags);
  builder.addAllAsflags(asflags);
  builder.addAllAsppflags(asppflags);
  CxxPlatforms.addToolFlagsFromConfig(config,builder);
  return builder.build();
}
