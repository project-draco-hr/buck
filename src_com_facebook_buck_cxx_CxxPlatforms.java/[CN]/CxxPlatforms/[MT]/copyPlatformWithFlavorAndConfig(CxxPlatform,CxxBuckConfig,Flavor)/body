{
  CxxPlatform.Builder builder=CxxPlatform.builder();
  builder.setFlavor(flavor).setAs(config.getCompilerProvider(flavor,"as",CxxToolProvider.Type.GCC).or(defaultPlatform.getAs())).setAspp(config.getPreprocessorProvider(flavor,"aspp",CxxToolProvider.Type.GCC).or(defaultPlatform.getAspp())).setCc(config.getCompilerProvider(flavor,"cc").or(defaultPlatform.getCc())).setCxx(config.getCompilerProvider(flavor,"cxx").or(defaultPlatform.getCxx())).setCpp(config.getPreprocessorProvider(flavor,"cpp").or(defaultPlatform.getCpp())).setCxxpp(config.getPreprocessorProvider(flavor,"cxxpp").or(defaultPlatform.getCxxpp())).setCuda(config.getCompilerProvider(flavor,"cuda").or(defaultPlatform.getCuda())).setCudapp(config.getPreprocessorProvider(flavor,"cudapp").or(defaultPlatform.getCudapp())).setAsm(config.getCompilerProvider(flavor,"asm").or(defaultPlatform.getAsm())).setAsmpp(config.getPreprocessorProvider(flavor,"asmpp").or(defaultPlatform.getAsmpp())).setLd(config.getLinkerProvider(flavor,"ld",defaultPlatform.getLd().getType()).or(defaultPlatform.getLd())).setAr(getTool(flavor,"ar",config).transform(getArchiver(defaultPlatform.getAr().getClass(),config)).or(defaultPlatform.getAr())).setRanlib(getTool(flavor,"ranlib",config).or(defaultPlatform.getRanlib())).setStrip(getTool(flavor,"strip",config).or(defaultPlatform.getStrip())).setSymbolNameTool(defaultPlatform.getSymbolNameTool()).setSharedLibraryExtension(defaultPlatform.getSharedLibraryExtension()).setSharedLibraryVersionedExtensionFormat(defaultPlatform.getSharedLibraryVersionedExtensionFormat()).setDebugPathSanitizer(defaultPlatform.getDebugPathSanitizer());
  if (config.getDefaultPlatform().isPresent()) {
    CxxPlatforms.addToolFlagsFromCxxPlatform(builder,defaultPlatform);
  }
  CxxPlatforms.addToolFlagsFromConfig(config,builder);
  return builder.build();
}
