{
  CxxPlatform.Builder builder=CxxPlatform.builder();
  builder.setFlavor(flavor).setAs(getTool(flavor,"as",config).transform(GET_DEFAULT_COMPILER).or(defaultPlatform.getAs())).setAspp(getTool(flavor,"aspp",config).transform(GET_DEFAULT_PREPROCESSOR).or(defaultPlatform.getAspp())).setCcSupplier(getToolPath(flavor,"cc",config).transform(GET_COMPILER_SUPPLIER).or(defaultPlatform.getCcSupplier())).setCxxSupplier(getToolPath(flavor,"cxx",config).transform(GET_COMPILER_SUPPLIER).or(defaultPlatform.getCxxSupplier())).setCppSupplier(getToolPath(flavor,"cpp",config).transform(GET_PREPROCESSOR_SUPPLIER).or(defaultPlatform.getCppSupplier())).setCxxppSupplier(getToolPath(flavor,"cxxpp",config).transform(GET_PREPROCESSOR_SUPPLIER).or(defaultPlatform.getCxxppSupplier())).setCuda(getTool(flavor,"cuda",config).transform(GET_DEFAULT_COMPILER).or(defaultPlatform.getCuda())).setCudapp(getTool(flavor,"cudapp",config).transform(GET_DEFAULT_PREPROCESSOR).or(defaultPlatform.getCudapp())).setLd(getTool(flavor,"ld",config).transform(getLinker(defaultPlatform.getLd().getClass(),config)).or(defaultPlatform.getLd())).setAr(getTool(flavor,"ar",config).transform(getArchiver(defaultPlatform.getAr().getClass(),config)).or(defaultPlatform.getAr())).setRanlib(getTool(flavor,"ranlib",config).or(defaultPlatform.getRanlib())).setStrip(getTool(flavor,"strip",config).or(defaultPlatform.getStrip())).setSymbolNameTool(defaultPlatform.getSymbolNameTool()).setSharedLibraryExtension(defaultPlatform.getSharedLibraryExtension()).setSharedLibraryVersionedExtensionFormat(defaultPlatform.getSharedLibraryVersionedExtensionFormat()).setDebugPathSanitizer(defaultPlatform.getDebugPathSanitizer());
  if (config.getDefaultPlatform().isPresent()) {
    CxxPlatforms.addToolFlagsFromCxxPlatform(builder,defaultPlatform);
  }
  CxxPlatforms.addToolFlagsFromConfig(config,builder);
  return builder.build();
}
