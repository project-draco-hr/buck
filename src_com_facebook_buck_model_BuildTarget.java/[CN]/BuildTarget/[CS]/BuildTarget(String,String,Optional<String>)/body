{
  Preconditions.checkNotNull(baseName);
  Preconditions.checkNotNull(shortName);
  Preconditions.checkNotNull(flavor);
  Preconditions.checkArgument(baseName.startsWith(BUILD_TARGET_PREFIX),"baseName must start with // but was %s",baseName);
  Preconditions.checkArgument(!shortName.contains("#"),"Build target name cannot contain '#' but was: %s.",shortName);
  if (flavor.isPresent()) {
    String flavorName=flavor.get();
    if (!VALID_FLAVOR_PATTERN.matcher(flavorName).matches()) {
      throw new IllegalArgumentException("Invalid flavor: " + flavorName);
    }
    shortName+="#" + flavorName;
  }
  this.baseName=baseName.replace("\\","/");
  this.shortName=shortName;
  this.flavor=flavor;
  this.fullyQualifiedName=baseName + ":" + shortName;
}
