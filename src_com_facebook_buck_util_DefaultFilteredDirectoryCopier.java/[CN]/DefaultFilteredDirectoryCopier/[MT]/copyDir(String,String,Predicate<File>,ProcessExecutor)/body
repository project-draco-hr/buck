{
  final File dest=new File(destDir);
  if (dest.exists()) {
    try {
      MoreFiles.rmdir(dest.getAbsolutePath(),processExecutor);
    }
 catch (    IOException e) {
      throw Throwables.propagate(e);
    }
  }
  dest.mkdirs();
  new DirectoryTraversal(new File(srcDir)){
    @Override public void visit(    File srcFile,    String relativePath){
      if (pred.apply(srcFile)) {
        try {
          File destFile=new File(dest,relativePath);
          Files.createParentDirs(destFile);
          Files.copy(srcFile,destFile);
        }
 catch (        IOException e) {
          throw Throwables.propagate(e);
        }
      }
    }
  }
.traverse();
}
