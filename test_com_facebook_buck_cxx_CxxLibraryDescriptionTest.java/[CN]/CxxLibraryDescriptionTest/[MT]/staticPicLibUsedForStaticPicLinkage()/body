{
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleResolver resolver=new BuildRuleResolver(TargetGraph.EMPTY,new BuildTargetNodeToBuildRuleTransformer());
  ProjectFilesystem filesystem=new FakeProjectFilesystem();
  CxxLibraryBuilder libBuilder=new CxxLibraryBuilder(target);
  libBuilder.setSrcs(ImmutableSortedSet.of(SourceWithFlags.of(new PathSourcePath(filesystem,Paths.get("test.cpp")))));
  TargetGraph targetGraph=TargetGraphFactory.newInstance(libBuilder.build());
  CxxLibrary lib=(CxxLibrary)libBuilder.build(resolver,filesystem,targetGraph);
  NativeLinkableInput nativeLinkableInput=lib.getNativeLinkableInput(targetGraph,CxxLibraryBuilder.createDefaultPlatform(),Linker.LinkableDepType.STATIC_PIC);
  assertThat(FluentIterable.from(nativeLinkableInput.getArgs()).transform(Arg.stringifyFunction()).toList().get(0),Matchers.containsString("static-pic"));
}
