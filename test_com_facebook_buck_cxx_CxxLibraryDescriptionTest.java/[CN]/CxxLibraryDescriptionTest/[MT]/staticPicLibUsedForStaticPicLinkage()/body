{
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  ProjectFilesystem filesystem=new FakeProjectFilesystem();
  CxxLibraryBuilder libBuilder=new CxxLibraryBuilder(target);
  libBuilder.setSrcs(ImmutableSortedSet.of(SourceWithFlags.of(new PathSourcePath(filesystem,Paths.get("test.cpp")))));
  TargetGraph targetGraph=TargetGraphFactory.newInstance(libBuilder.build());
  BuildRuleResolver resolver=new BuildRuleResolver(targetGraph,new BuildTargetNodeToBuildRuleTransformer());
  CxxLibrary lib=(CxxLibrary)libBuilder.build(resolver,filesystem,targetGraph);
  NativeLinkableInput nativeLinkableInput=lib.getNativeLinkableInput(CxxLibraryBuilder.createDefaultPlatform(),Linker.LinkableDepType.STATIC_PIC);
  assertThat(Arg.stringify(nativeLinkableInput.getArgs()).get(0),Matchers.containsString("static-pic"));
}
