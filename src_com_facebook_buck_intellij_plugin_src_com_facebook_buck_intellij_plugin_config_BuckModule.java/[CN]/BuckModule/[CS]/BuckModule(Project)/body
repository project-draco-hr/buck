{
  mProject=project;
  mEventHandler=new BuckEventsHandler(new BuckEventsConsumerFactory(mProject),new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          BuckToolWindowFactory.outputConsoleMessage(project,"Connected to buck!\n",ConsoleViewContentType.SYSTEM_OUTPUT);
        }
      }
);
    }
  }
,new Runnable(){
    @Override public void run(){
      ApplicationManager.getApplication().invokeLater(new Runnable(){
        @Override public void run(){
          BuckToolWindowFactory.outputConsoleMessage(project,"Disconnected from buck!\n",ConsoleViewContentType.SYSTEM_OUTPUT);
        }
      }
);
      BuckModule mod=project.getComponent(BuckModule.class);
      mod.disconnect();
    }
  }
);
  if (!UISettings.getInstance().SHOW_MAIN_TOOLBAR) {
    BuckPluginNotifications.notifyActionToolbar(mProject);
  }
  mBuckEventsConsumer=new BuckEventsConsumer(project);
}
