{
  String expectedOutputPath=testDataPath("AndroidManifest.expected.xml").toString();
  SourcePath libraryManifestA=testDataPath("AndroidManifestA.xml");
  SourcePath libraryManifestB=testDataPath("AndroidManifestB.xml");
  SourcePath libraryManifestC=testDataPath("AndroidManifestC.xml");
  ImmutableSet.Builder<SourcePath> libraryManifestFiles=ImmutableSet.builder();
  libraryManifestFiles.add(libraryManifestA);
  libraryManifestFiles.add(libraryManifestB);
  libraryManifestFiles.add(libraryManifestC);
  ExecutionContext context=TestExecutionContext.newInstance();
  GenerateManifestStep manifestCommand=new GenerateManifestStep(skeletonPath,libraryManifestFiles.build(),manifestPath);
  int result=manifestCommand.execute(context);
  assertEquals(0,result);
  String expected=Files.toString(new File(expectedOutputPath),Charsets.UTF_8);
  String output=Files.toString(manifestPath.toFile(),Charsets.UTF_8);
  assertEquals(expected,output);
}
