{
  String expectedOutputPath=testDataPath("AndroidManifest.expected.xml");
  String libraryManifestA=testDataPath("AndroidManifestA.xml");
  String libraryManifestB=testDataPath("AndroidManifestB.xml");
  String libraryManifestC=testDataPath("AndroidManifestC.xml");
  ImmutableSet.Builder<String> libraryManifestFiles=ImmutableSet.builder();
  libraryManifestFiles.add(libraryManifestA);
  libraryManifestFiles.add(libraryManifestB);
  libraryManifestFiles.add(libraryManifestC);
  ExecutionContext context=ExecutionContext.builder().setConsole(new TestConsole()).setProjectFilesystem(new ProjectFilesystem(new File("."))).setEventBus(BuckEventBusFactory.newInstance()).setPlatform(Platform.detect()).build();
  GenerateManifestStep manifestCommand=new GenerateManifestStep(skeletonPath,libraryManifestFiles.build(),manifestPath);
  manifestCommand.execute(context);
  String expected=Files.toString(new File(expectedOutputPath),Charsets.UTF_8);
  String output=Files.toString(new File(manifestPath),Charsets.UTF_8);
  assertEquals(expected,output);
}
