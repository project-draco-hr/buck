{
  AndroidPlatformTarget androidPlatformTarget=createMock(AndroidPlatformTarget.class);
  expect(androidPlatformTarget.getDxExecutable()).andStubReturn(Paths.get("/usr/bin/dx"));
  ProjectFilesystem projectFilesystem=createMock(ProjectFilesystem.class);
  expect(projectFilesystem.resolve(anyObject(Path.class))).andAnswer(new IAnswer<Path>(){
    @Override public Path answer() throws Throwable {
      return (Path)getCurrentArguments()[0];
    }
  }
).anyTimes();
  replayAll();
  return TestExecutionContext.newBuilder().setAndroidPlatformTargetSupplier(Suppliers.ofInstance(Optional.of(androidPlatformTarget))).setProjectFilesystem(projectFilesystem).build();
}
