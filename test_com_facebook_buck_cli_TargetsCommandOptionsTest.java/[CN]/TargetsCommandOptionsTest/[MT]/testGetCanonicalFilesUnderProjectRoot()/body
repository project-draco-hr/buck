{
  Path projectRoot=Paths.get("").toAbsolutePath().resolve("ProjectRoot");
  ImmutableSet<String> nonCanonicalFilePaths=ImmutableSet.of("ProjectRoot/src/com/facebook/CanonicalRelativePath.java","./ProjectRoot/src/com/otherpackage/.././/facebook/NonCanonicalPath.java",projectRoot.normalize() + "/src/com/facebook/AbsolutePath.java",projectRoot.normalize() + "/../PathNotUnderProjectRoot.java");
  assertEquals(ImmutableSet.of("src/com/facebook/CanonicalRelativePath.java","src/com/facebook/NonCanonicalPath.java","src/com/facebook/AbsolutePath.java"),TargetsCommandOptions.getCanonicalFilesUnderProjectRoot(projectRoot,nonCanonicalFilePaths));
}
