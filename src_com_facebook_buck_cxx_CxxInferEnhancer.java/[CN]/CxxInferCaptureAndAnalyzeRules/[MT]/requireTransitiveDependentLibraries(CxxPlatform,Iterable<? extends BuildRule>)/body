{
  final ImmutableSet.Builder<CxxInferAnalyze> depsBuilder=ImmutableSet.builder();
  new AbstractBreadthFirstThrowingTraversal<BuildRule,NoSuchBuildTargetException>(deps){
    @Override public ImmutableSet<BuildRule> visit(    BuildRule buildRule) throws NoSuchBuildTargetException {
      if (buildRule instanceof CxxLibrary) {
        CxxLibrary library=(CxxLibrary)buildRule;
        depsBuilder.add((CxxInferAnalyze)library.requireBuildRule(InferFlavors.INFER_ANALYZE.get(),cxxPlatform.getFlavor()));
        return buildRule.getDeps();
      }
      return ImmutableSet.of();
    }
  }
.start();
  return depsBuilder.build();
}
