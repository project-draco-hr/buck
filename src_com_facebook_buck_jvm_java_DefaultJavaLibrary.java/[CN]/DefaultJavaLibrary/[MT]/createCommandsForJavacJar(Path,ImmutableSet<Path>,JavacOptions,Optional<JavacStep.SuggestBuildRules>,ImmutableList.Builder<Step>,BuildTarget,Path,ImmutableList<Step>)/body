{
  Path pathToSrcsList=BuildTargets.getGenPath(getBuildTarget(),"__%s__srcs");
  commands.add(new MkdirStep(getProjectFilesystem(),pathToSrcsList.getParent()));
  Optional<Path> workingDirectory;
  Path scratchDir=BuildTargets.getGenPath(target,"lib__%s____working_directory");
  commands.add(new MakeCleanDirectoryStep(getProjectFilesystem(),scratchDir));
  workingDirectory=Optional.of(scratchDir);
  JavacToJarStepFactory javacToJarStepFactory=new JavacToJarStepFactory(outputDirectory,workingDirectory,getJavaSrcs(),Optional.of(pathToSrcsList),declaredClasspathEntries,javacOptions,target,suggestBuildRules,getResolver(),getProjectFilesystem(),pathToOutputFile,Collections.singleton(outputDirectory),null,null,intermediateCommands);
  javacToJarStepFactory.getJavacToJarStep(commands);
}
