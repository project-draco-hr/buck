{
  while (shouldWaitForWork()) {
    try (BuildTargetProcessingScope processingScope=startProcessingBuildTarget()){
      if (parsedBuildTargets.contains(processingScope.getBuildTarget())) {
        continue;
      }
      TargetNode<?> node;
      try (SimplePerfEvent.Scope scope=Parser.getTargetNodeEventScope(eventBus,processingScope.getBuildTarget())){
        try {
          node=getTargetNode(processingScope.getBuildTarget());
        }
 catch (        BuildFileParseException|BuildTargetException|IOException e) {
          abortDoingMoreWork();
          return;
        }
      }
       processingScope.addDepsToProcess(FluentIterable.from(node.getDeps()).filter(new Predicate<BuildTarget>(){
        @Override public boolean apply(        BuildTarget buildTarget){
          return !parsedBuildTargets.contains(buildTarget) && !pendingBuildTargets.contains(buildTarget);
        }
      }
).toSet());
    }
 catch (    TimeoutException e) {
      continue;
    }
catch (    InterruptedException e) {
      abortDoingMoreWork();
      return;
    }
  }
}
