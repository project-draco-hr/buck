{
  final ImmutableSet<String> fullyQualifiedBuildTargets=ImmutableSet.copyOf(getArgumentsFormattedAsBuildTargets(params.getBuckConfig()));
  if (fullyQualifiedBuildTargets.isEmpty()) {
    params.getConsole().printBuildFailure("Must specify at least one build target.");
    return 1;
  }
  try {
    Multimap<BuildTarget,BuildTarget> targetsAndDependencies=getTargetsAndDependencies(params,getArgumentsFormattedAsBuildTargets(params.getBuckConfig()),shouldShowTransitiveDependencies(),shouldIncludeTests(),getEnableProfiling());
    if (shouldGenerateJsonOutput()) {
      CommandHelper.printJSON(params,targetsAndDependencies);
    }
 else {
      CommandHelper.printToConsole(params,targetsAndDependencies);
    }
  }
 catch (  BuildTargetException|BuildFileParseException e) {
    params.getConsole().printBuildFailureWithoutStacktrace(e);
    return 1;
  }
  return 0;
}
