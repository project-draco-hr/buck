{
  ImmutableSet.Builder<BuildTarget> matchingTargets=ImmutableSet.builder();
  for (  Map<String,Object> map : parsedBuildFiles.values()) {
    BuildRuleType buildRuleType=parseBuildRuleTypeFromRawRule(map);
    BuildTarget target=parseBuildTargetFromRawRule(map);
    if (filter.isMatch(map,buildRuleType,target)) {
      matchingTargets.add(target);
    }
  }
  return matchingTargets.build();
}
