{
  if (cacheEnvironment == null) {
    return true;
  }
  MapDifference<String,String> difference=Maps.difference(Maps.filterKeys(cacheEnvironment,EnvironmentFilter.NOT_IGNORED_ENV_PREDICATE),Maps.filterKeys(environment,EnvironmentFilter.NOT_IGNORED_ENV_PREDICATE));
  if (!difference.areEqual()) {
    LOG.warn("Environment variables changed (%s). Discarding cache to avoid effects on build. " + "This will make builds very slow.",difference);
    return true;
  }
  return false;
}
