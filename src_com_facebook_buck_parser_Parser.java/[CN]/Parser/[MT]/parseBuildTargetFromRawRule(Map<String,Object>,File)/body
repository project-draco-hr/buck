{
  String basePath=(String)map.get("buck_base_path");
  File sourceOfBuildTarget;
  if (source == null) {
    String relativePathToBuildFile=!basePath.isEmpty() ? basePath + "/" + BuckConstant.BUILD_RULES_FILE_NAME : BuckConstant.BUILD_RULES_FILE_NAME;
    sourceOfBuildTarget=new File(projectFilesystem.getProjectRoot(),relativePathToBuildFile);
  }
 else {
    sourceOfBuildTarget=source;
  }
  String name=(String)map.get("name");
  return new BuildTarget(sourceOfBuildTarget,"//" + basePath,name);
}
