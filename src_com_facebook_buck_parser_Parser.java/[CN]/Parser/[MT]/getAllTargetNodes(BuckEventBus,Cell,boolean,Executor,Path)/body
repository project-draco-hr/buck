{
  Preconditions.checkState(buildFile.isAbsolute(),"Build file should be referred to using an absolute path: %s",buildFile);
  Preconditions.checkState(buildFile.startsWith(cell.getRoot()),"Roots do not match %s -> %s",cell.getRoot(),buildFile);
  try (PerBuildState state=new PerBuildState(permState,marshaller,eventBus,cell,enableProfiling)){
    state.startParsing(cell,ImmutableSet.of(buildFile),new ParserConfig(cell.getBuckConfig()),executor);
    return state.getAllTargetNodes(cell,buildFile);
  }
 }
