{
  final Repository rootRepository=repositoryFactory.getRootRepository();
  return new Parser(repositoryFactory,parserConfig,new Supplier<BuildFileTree>(){
    @Override public BuildFileTree get(){
      return new FilesystemBackedBuildFileTree(rootRepository.getFilesystem(),parserConfig.getBuildFileName());
    }
  }
,rootRepository.getBuildTargetParser(),new DefaultProjectBuildFileParserFactory(rootRepository.getFilesystem(),parserConfig,rootRepository.getAllDescriptions()),ruleKeyBuilderFactory);
}
