{
  if (!parserWasPopulatedViaParseRawRules) {
    Set<File> buildTargetFiles=Sets.newHashSet();
    for (    BuildTarget buildTarget : buildTargets) {
      File buildFile=buildTarget.getBuildFile();
      boolean isNewElement=buildTargetFiles.add(buildFile);
      if (isNewElement) {
        parseBuildFile(buildFile,defaultIncludes);
      }
    }
  }
  DependencyGraph graph=findAllTransitiveDependencies(buildTargets,defaultIncludes);
  Tracer.addComment("All build files parsed and dependency graph constructed.");
  return graph;
}
