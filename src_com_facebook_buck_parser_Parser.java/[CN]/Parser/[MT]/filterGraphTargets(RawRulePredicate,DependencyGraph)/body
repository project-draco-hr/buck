{
  if (filter == null) {
    return null;
  }
  ImmutableSet.Builder<BuildTarget> matchingTargets=ImmutableSet.builder();
  for (  BuildRule buildRule : dependencyGraph.getNodes()) {
    for (    Map<String,Object> map : parsedBuildFiles.get(targetsToFile.get(buildRule.getBuildTarget()))) {
      BuildRuleType buildRuleType=parseBuildRuleTypeFromRawRule(map);
      BuildTarget target=parseBuildTargetFromRawRule(map);
      if (filter.isMatch(map,buildRuleType,target)) {
        matchingTargets.add(target);
      }
    }
  }
  return matchingTargets.build();
}
