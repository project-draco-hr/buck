{
  if (path.getSourceTree().equals(PBXReference.SourceTree.SDKROOT)) {
    return getSdkPath().resolve(path.getPath());
  }
 else   if (path.getSourceTree().equals(PBXReference.SourceTree.PLATFORM_DIR)) {
    return getPlatformPath().resolve(path.getPath());
  }
 else   if (path.getSourceTree().equals(PBXReference.SourceTree.DEVELOPER_DIR)) {
    Optional<Path> developerPath=getDeveloperPath();
    if (!developerPath.isPresent()) {
      throw new HumanReadableException("DEVELOPER_DIR source tree unavailable without developer dir");
    }
    return developerPath.get().resolve(path.getPath());
  }
  throw new HumanReadableException("Unsupported source tree: '%s'",path.getSourceTree());
}
