{
  ArtifactCacheBuckConfig config=createFromText("[cache]","http_max_concurrent_writes = 5","http_writer_shutdown_timeout_seconds = 6","http_timeout_seconds = 42","http_url = http://test.host:1234","http_mode = readwrite");
  ImmutableSet<HttpCacheEntry> httpCaches=config.getHttpCaches();
  assertThat(httpCaches,Matchers.hasSize(1));
  HttpCacheEntry cacheEntry=FluentIterable.from(httpCaches).get(0);
  assertThat(config.getHttpMaxConcurrentWrites(),Matchers.is(5));
  assertThat(config.getHttpWriterShutdownTimeout(),Matchers.is(6));
  assertThat(cacheEntry.getTimeoutSeconds(),Matchers.is(42));
  assertThat(cacheEntry.getUrl(),Matchers.equalTo(new URI("http://test.host:1234")));
  assertThat(cacheEntry.getCacheReadMode(),Matchers.is(ArtifactCacheBuckConfig.CacheReadMode.readwrite));
}
