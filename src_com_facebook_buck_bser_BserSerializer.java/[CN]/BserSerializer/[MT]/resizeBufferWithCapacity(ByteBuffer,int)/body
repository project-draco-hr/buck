{
  buffer.flip();
  return ByteBuffer.allocate(capacity).order(buffer.order()).put(buffer);
}
