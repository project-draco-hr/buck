{
  if (buildRule == null || sourceRoots == null) {
    return false;
  }
  if (buildRule instanceof AndroidBinaryRule && sourceRoots.isEmpty()) {
    return false;
  }
  if (sourceRoots.isEmpty()) {
    String url="file://$MODULE_DIR$";
    String packagePrefix=javaPackageFinder.findJavaPackageForPath(module.pathToImlFile);
    SourceFolder sourceFolder=new SourceFolder(url,isTestSource,packagePrefix);
    module.sourceFolders.add(sourceFolder);
  }
 else {
    for (    SourceRoot sourceRoot : sourceRoots) {
      SourceFolder sourceFolder=new SourceFolder(String.format("file://$MODULE_DIR$/%s",sourceRoot.getName()),isTestSource);
      module.sourceFolders.add(sourceFolder);
    }
  }
  for (  String relativePath : this.buildFileTree.getChildPaths(buildRule.getBuildTarget())) {
    String excludeFolderUrl="file://$MODULE_DIR$/" + relativePath;
    SourceFolder excludeFolder=new SourceFolder(excludeFolderUrl,false);
    module.excludeFolders.add(excludeFolder);
  }
  if ("".equals(buildRule.getBuildTarget().getBasePathWithSlash())) {
    module.excludeFolders.add(new SourceFolder("file://$MODULE_DIR$/" + BuckConstant.BUCK_OUTPUT_DIRECTORY,false));
  }
  return true;
}
