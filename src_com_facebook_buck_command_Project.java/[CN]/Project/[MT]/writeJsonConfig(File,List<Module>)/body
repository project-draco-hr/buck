{
  List<SerializablePrebuiltJarRule> libraries=Lists.newArrayListWithCapacity(libraryJars.size());
  for (  BuildRule libraryJar : libraryJars) {
    libraries.add(new SerializablePrebuiltJarRule(libraryJar));
  }
  Map<String,Object> config=ImmutableMap.<String,Object>of("modules",modules,"libraries",libraries);
  try (Writer writer=new FileWriter(jsonTempFile)){
    JsonFactory jsonFactory=new JsonFactory();
    ObjectMapper objectMapper=new ObjectMapper(jsonFactory);
    if (executionContext.getVerbosity().shouldPrintOutput()) {
      ObjectWriter objectWriter=objectMapper.writerWithDefaultPrettyPrinter();
      objectWriter.writeValue(writer,config);
    }
 else {
      objectMapper.writeValue(writer,config);
    }
  }
 }
