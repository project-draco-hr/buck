{
  List<SerializablePrebuiltJarRule> libraries=Lists.newArrayListWithCapacity(libraryJars.size());
  for (  BuildRule libraryJar : libraryJars) {
    Preconditions.checkState(libraryJar instanceof PrebuiltJar);
    String name=getIntellijNameForRule(libraryJar,null);
    PrebuiltJar prebuiltJar=(PrebuiltJar)libraryJar;
    String binaryJar=resolver.getPath(prebuiltJar.getBinaryJar()).toString();
    String sourceJar=null;
    if (prebuiltJar.getSourceJar().isPresent()) {
      sourceJar=prebuiltJar.getSourceJar().get().toString();
    }
    String javadocUrl=prebuiltJar.getJavadocUrl().orNull();
    libraries.add(new SerializablePrebuiltJarRule(name,binaryJar,sourceJar,javadocUrl));
  }
  Map<String,Object> config=ImmutableMap.<String,Object>of("modules",modules,"libraries",libraries);
  try (Writer writer=new FileWriter(jsonTempFile)){
    if (executionContext.getVerbosity().shouldPrintOutput()) {
      ObjectWriter objectWriter=objectMapper.writerWithDefaultPrettyPrinter();
      objectWriter.writeValue(writer,config);
    }
 else {
      objectMapper.writeValue(writer,config);
    }
  }
 }
