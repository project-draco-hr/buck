{
  BuildTarget target=BuildTarget.builder(baseParams.getBuildTarget()).addFlavors(ImmutableFlavor.of("pure-starter")).build();
  final Path output=getOutputPath(baseParams.getBuildTarget(),baseParams.getProjectFilesystem());
  final Tool lua=luaConfig.getLua(ruleResolver);
  ruleResolver.addToIndex(WriteStringTemplateRule.from(baseParams,pathResolver,target,output,new PathSourcePath(baseParams.getProjectFilesystem(),LuaBinaryDescription.class + "/" + STARTER,new PackagedResource(baseParams.getProjectFilesystem(),LuaBinaryDescription.class,STARTER)),ImmutableMap.of("SHEBANG",lua.getCommandPrefix(pathResolver).get(0),"MAIN_MODULE",Escaper.escapeAsPythonString(mainModule),"MODULES_DIR",Escaper.escapeAsPythonString(relativeModulesDir.toString()),"EXT_SUFFIX",Escaper.escapeAsPythonString(cxxPlatform.getSharedLibraryExtension()))));
  return new CommandTool.Builder(lua).addArg(new SourcePathArg(pathResolver,new BuildTargetSourcePath(target))).build();
}
