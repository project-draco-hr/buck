{
  BuildTarget linkTreeTarget=BuildTarget.builder(params.getBuildTarget()).addFlavors(ImmutableFlavor.of("link-tree")).build();
  Path linkTreeRoot=params.getProjectFilesystem().resolve(BuildTargets.getGenPath(linkTreeTarget,"%s"));
  try {
    return resolver.addToIndex(SymlinkTree.from(params.copyWithChanges(linkTreeTarget,Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of()),Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of())),pathResolver,linkTreeRoot,ImmutableMap.<String,SourcePath>builder().putAll(components.getModules()).putAll(components.getNativeLibraries()).build()));
  }
 catch (  SymlinkTree.InvalidSymlinkTreeException e) {
    throw e.getHumanReadableExceptionForBuildTarget(params.getBuildTarget().getUnflavoredBuildTarget());
  }
}
