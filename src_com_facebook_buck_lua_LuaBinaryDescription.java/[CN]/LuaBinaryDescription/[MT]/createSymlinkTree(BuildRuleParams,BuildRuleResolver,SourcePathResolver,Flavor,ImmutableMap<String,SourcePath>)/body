{
  BuildTarget linkTreeTarget=BuildTarget.builder(params.getBuildTarget()).addFlavors(flavor).build();
  Path linkTreeRoot=params.getProjectFilesystem().resolve(BuildTargets.getGenPath(linkTreeTarget,"%s"));
  try {
    return resolver.addToIndex(SymlinkTree.from(params.copyWithChanges(linkTreeTarget,Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of()),Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of())),pathResolver,linkTreeRoot,components));
  }
 catch (  SymlinkTree.InvalidSymlinkTreeException e) {
    throw e.getHumanReadableExceptionForBuildTarget(params.getBuildTarget().getUnflavoredBuildTarget());
  }
}
