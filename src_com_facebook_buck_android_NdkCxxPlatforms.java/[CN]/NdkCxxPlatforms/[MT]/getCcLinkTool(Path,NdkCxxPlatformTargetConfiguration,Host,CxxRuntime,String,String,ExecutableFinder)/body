{
  ImmutableList.Builder<String> flags=ImmutableList.builder();
  if (targetConfiguration.getCompiler().getType() == NdkCxxPlatformCompiler.Type.CLANG) {
    flags.add("-gcc-toolchain",getNdkGccToolRoot(ndkRoot,targetConfiguration,host.toString()).toString());
  }
  flags.add("--sysroot=" + getSysroot(ndkRoot,targetConfiguration));
  if (targetConfiguration.getCompiler().getType() == NdkCxxPlatformCompiler.Type.GCC) {
    flags.add("-B" + getLibexecGccToolPath(ndkRoot,targetConfiguration,host),"-B" + getNdkToolRoot(ndkRoot,targetConfiguration,host.toString()).resolve("lib").resolve(targetConfiguration.getCompiler().getType().getName()).resolve(targetConfiguration.getCompiler().getType() == NdkCxxPlatformCompiler.Type.GCC ? targetConfiguration.getToolchainTarget().toString() : "").resolve(targetConfiguration.getCompiler().getVersion()));
  }
  flags.add("-L" + getCxxRuntimeLibsDirectory(ndkRoot,targetConfiguration,cxxRuntime).toString());
  return new GnuLinker(VersionedTool.builder().setPath(getToolPath(ndkRoot,targetConfiguration,host,tool,executableFinder)).setName(tool).setVersion(version).setExtraArgs(flags.build()).build());
}
