{
  List<Predicate<File>> filePredicates=Lists.newArrayList();
  if (filterDrawables) {
    Set<String> drawables=drawableFinder.findDrawables(inResDirToOutResDirMap.keySet());
    filePredicates.add(Filters.createImageDensityFilter(drawables,resourceFilter));
  }
  if (filterStrings) {
    final ProjectFilesystem filesystem=context.getProjectFilesystem();
    filePredicates.add(new Predicate<File>(){
      @Override public boolean apply(      File input){
        String inputPath=input.getAbsolutePath();
        if (NON_ENGLISH_STRING_PATH.matcher(inputPath).matches()) {
          Path pathRelativeToProjectRoot=filesystem.getRootPath().toAbsolutePath().normalize().relativize(Paths.get(inputPath));
          nonEnglishStringFilesBuilder.add(pathRelativeToProjectRoot);
          return false;
        }
        return true;
      }
    }
);
  }
  filteredDirectoryCopier.copyDirs(inResDirToOutResDirMap,Predicates.and(filePredicates));
  if ((imageScaler != null) && imageScaler.isAvailable(context)) {
    scaleUnmatchedDrawables(context);
  }
  return 0;
}
