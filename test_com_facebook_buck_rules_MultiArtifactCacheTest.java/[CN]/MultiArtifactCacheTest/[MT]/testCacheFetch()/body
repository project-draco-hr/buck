{
  DummyArtifactCache dummyArtifactCache1=new DummyArtifactCache();
  DummyArtifactCache dummyArtifactCache2=new DummyArtifactCache();
  MultiArtifactCache multiArtifactCache=new MultiArtifactCache(ImmutableList.of((ArtifactCache)dummyArtifactCache1,dummyArtifactCache2));
  assertEquals("Fetch should fail",CacheResult.Type.MISS,multiArtifactCache.fetch(dummyRuleKey,dummyFile).getType());
  dummyArtifactCache1.store(ImmutableSet.of(dummyRuleKey),ImmutableMap.<String,String>of(),dummyFile);
  assertEquals("Fetch should succeed after store",CacheResult.Type.HIT,multiArtifactCache.fetch(dummyRuleKey,dummyFile).getType());
  dummyArtifactCache1.reset();
  dummyArtifactCache2.reset();
  dummyArtifactCache2.store(ImmutableSet.of(dummyRuleKey),ImmutableMap.<String,String>of(),dummyFile);
  assertEquals("Fetch should succeed after store",CacheResult.Type.HIT,multiArtifactCache.fetch(dummyRuleKey,dummyFile).getType());
  multiArtifactCache.close();
}
