{
  if (group == null)   throw new IllegalArgumentException("null input: group");
  final List threads=new ArrayList();
  while (true) {
    threads.clear();
    Thread[] aliveThreads;
    final int aliveCount;
synchronized (group) {
      aliveThreads=new Thread[group.activeCount() << 1];
      aliveCount=group.enumerate(aliveThreads,true);
    }
    for (int t=0; t < aliveCount; t++) {
      if (!aliveThreads[t].isDaemon())       threads.add(aliveThreads[t]);
    }
    aliveThreads=null;
    if (threads.isEmpty())     break;
 else {
      for (Iterator i=threads.iterator(); i.hasNext(); ) {
        try {
          ((Thread)i.next()).join();
        }
 catch (        InterruptedException ignore) {
        }
      }
    }
  }
}
