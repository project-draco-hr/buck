{
  Preconditions.checkNotNull(hasBuildTarget);
  Preconditions.checkNotNull(flavor);
  BuildTarget buildTarget=hasBuildTarget.getBuildTarget();
  Preconditions.checkArgument(!buildTarget.isFlavored(),"Cannot add flavor %s to %s.",flavor,buildTarget);
  return BuildTarget.builder(buildTarget).setFlavor(flavor).build();
}
