{
  ImmutableSortedSet.Builder<Path> inputsToConsiderForCachingPurposes=ImmutableSortedSet.naturalOrder();
  for (  Path dir : dirs) {
    BuildRules.addInputsToSortedSet(dir,inputsToConsiderForCachingPurposes,directoryTraverser);
  }
  for (  String virtualPathName : variants.keySet()) {
    Map<String,SourcePath> variant=variants.get(virtualPathName);
    inputsToConsiderForCachingPurposes.addAll(SourcePaths.filterInputsToCompareToOutput(variant.values()));
  }
  inputsToConsiderForCachingPurposes.addAll(SourcePaths.filterInputsToCompareToOutput(files));
  return inputsToConsiderForCachingPurposes.build();
}
