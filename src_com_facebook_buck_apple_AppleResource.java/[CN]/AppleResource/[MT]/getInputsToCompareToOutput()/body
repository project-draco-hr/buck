{
  ImmutableSortedSet.Builder<Path> inputsToConsiderForCachingPurposes=ImmutableSortedSet.naturalOrder();
  for (  Path dir : dirs) {
    BuildRules.addInputsToSortedSet(dir,inputsToConsiderForCachingPurposes,directoryTraverser);
  }
  for (  String virtualPathName : variants.keySet()) {
    Map<String,SourcePath> variant=Preconditions.checkNotNull(variants.get(virtualPathName));
    inputsToConsiderForCachingPurposes.addAll(getResolver().filterInputsToCompareToOutput(variant.values()));
  }
  inputsToConsiderForCachingPurposes.addAll(getResolver().filterInputsToCompareToOutput(files));
  return inputsToConsiderForCachingPurposes.build();
}
