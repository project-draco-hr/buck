{
  super(target);
  this.directoryTraverser=Preconditions.checkNotNull(directoryTraverser);
  this.dirs=ImmutableSortedSet.copyOf(args.dirs);
  this.files=ImmutableSortedSet.copyOf(args.files);
  if (args.variants.isPresent()) {
    Map<String,Map<String,SourcePath>> variants=args.variants.get();
    ImmutableMap.Builder<String,ImmutableMap<String,SourcePath>> variantsBuilder=ImmutableMap.builder();
    for (    String path : variants.keySet()) {
      variantsBuilder.put(path,ImmutableMap.copyOf(variants.get(path)));
    }
    this.variants=variantsBuilder.build();
  }
 else {
    this.variants=ImmutableMap.of();
  }
  Preconditions.checkNotNull(outputPathSubdirectory);
  Path baseOutputDirectory=Paths.get(BuckConstant.BIN_DIR,target.getBasePath(),target.getShortName() + ".app");
  if (outputPathSubdirectory.isPresent()) {
    this.outputDirectory=baseOutputDirectory.resolve(outputPathSubdirectory.get());
  }
 else {
    this.outputDirectory=baseOutputDirectory;
  }
}
