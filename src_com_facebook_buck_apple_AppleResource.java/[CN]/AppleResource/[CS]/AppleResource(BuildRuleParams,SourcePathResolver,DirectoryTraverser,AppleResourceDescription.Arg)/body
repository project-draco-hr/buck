{
  super(params,resolver);
  this.directoryTraverser=directoryTraverser;
  this.dirs=ImmutableSortedSet.copyOf(args.dirs);
  this.files=ImmutableSortedSet.copyOf(args.files);
  if (args.variants.isPresent()) {
    Map<String,Map<String,SourcePath>> variants=args.variants.get();
    ImmutableMap.Builder<String,ImmutableMap<String,SourcePath>> variantsBuilder=ImmutableMap.builder();
    for (    String path : variants.keySet()) {
      variantsBuilder.put(path,ImmutableMap.copyOf(variants.get(path)));
    }
    this.variants=variantsBuilder.build();
  }
 else {
    this.variants=ImmutableMap.of();
  }
  BuildTarget target=params.getBuildTarget();
  this.outputDirectory=BuildTargets.getBinPath(target,"%s.app");
}
