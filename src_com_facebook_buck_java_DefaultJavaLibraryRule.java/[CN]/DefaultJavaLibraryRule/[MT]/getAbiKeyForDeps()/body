{
  SortedSet<JavaLibraryRule> rulesWithAbiToConsider=Sets.newTreeSet();
  for (  BuildRule dep : getDeps()) {
    if (dep instanceof JavaLibraryRule) {
      JavaLibraryRule javaRule=(JavaLibraryRule)dep;
      rulesWithAbiToConsider.addAll(javaRule.getOutputClasspathEntries().keys());
    }
  }
  Hasher hasher=Hashing.sha1().newHasher();
  for (  JavaLibraryRule ruleWithAbiToConsider : rulesWithAbiToConsider) {
    if (ruleWithAbiToConsider == this) {
      continue;
    }
    Optional<Sha1HashCode> abiKey=ruleWithAbiToConsider.getAbiKey();
    if (!abiKey.isPresent()) {
      return Optional.absent();
    }
    hasher.putString(abiKey.get().getHash());
  }
  return Optional.of(new Sha1HashCode(hasher.hash().toString()));
}
