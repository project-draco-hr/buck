{
  Step mkdir=new MakeCleanDirectoryStep(getPathToAbiOutputDir());
  commands.add(mkdir);
  if (!getJavaSrcs().isEmpty()) {
    final JavacInMemoryStep javac=new DependencyCheckingJavacStep(outputDirectory,getJavaSrcs(),transitiveClasspathEntries,declaredClasspathEntries,javacOptions,Optional.of(getPathToAbiOutputFile()),Optional.of(getFullyQualifiedName()),buildDependencies,suggestBuildRules);
    commands.add(javac);
    setAbiKey(Suppliers.memoize(new Supplier<Sha1HashCode>(){
      @Override public Sha1HashCode get(){
        return javac.getAbiKey();
      }
    }
));
  }
 else {
    setAbiKey(Suppliers.ofInstance(new Sha1HashCode(AbiWriterProtocol.EMPTY_ABI_KEY)));
  }
}
