{
  WatchmanWatcher watcher=new WatchmanWatcher(tmp.getRootPath().toString(),eventBus,ImmutableSet.copyOf(ignorePaths),watchman,UUID.randomUUID());
  watcher.postEvents(new BuckEventBus(new FakeClock(0),new BuildId()),ImmutableSet.<String>builder(),WatchmanWatcher.FreshInstanceAction.NONE);
  watchmanEventCollector.clear();
  return watcher;
}
