{
  WatchmanWatcher watcher=new WatchmanWatcher(ImmutableMap.of(tmp.getRoot(),ProjectWatch.of(tmp.getRoot().toString(),Optional.<String>absent())),eventBus,ImmutableSet.copyOf(ignorePaths),watchman,UUID.randomUUID());
  watcher.postEvents(new BuckEventBus(new FakeClock(0),new BuildId()),new WatchmanDiagnosticCache(),WatchmanWatcher.FreshInstanceAction.NONE);
  watchmanEventCollector.clear();
  return watcher;
}
