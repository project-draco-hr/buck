{
  SourcePathResolver pathResolver=new SourcePathResolver(buildRuleResolver);
  AndroidPrebuiltAarGraphEnhancer.UnzipAar unzipAar=AndroidPrebuiltAarGraphEnhancer.enhance(params,args.aar,buildRuleResolver);
  Iterable<PrebuiltJar> javaDeps=Iterables.filter(buildRuleResolver.getAllRules(args.deps.or(ImmutableSortedSet.<BuildTarget>of())),PrebuiltJar.class);
  PrebuiltJar prebuiltJar=buildRuleResolver.addToIndex(createPrebuiltJar(unzipAar,params,pathResolver,ImmutableSortedSet.<BuildRule>copyOf(javaDeps)));
  AndroidResource androidResource=buildRuleResolver.addToIndex(createAndroidResource(unzipAar,params,pathResolver));
  return buildRuleResolver.addToIndex(new AndroidPrebuiltAar(params.copyWithDeps(Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of(androidResource,prebuiltJar)),Suppliers.ofInstance(ImmutableSortedSet.<BuildRule>of(unzipAar))),pathResolver,new BuildTargetSourcePath(unzipAar.getProjectFilesystem(),unzipAar.getBuildTarget(),unzipAar.getProguardConfig()),new BuildTargetSourcePath(unzipAar.getProjectFilesystem(),unzipAar.getBuildTarget(),unzipAar.getNativeLibsDirectory()),prebuiltJar,androidResource,javacOptions,javaDeps));
}
