{
  buildableContext.recordArtifact(specsDir);
  buildableContext.recordArtifact(this.getPathToOutput());
  return ImmutableList.<Step>builder().add(new MkdirStep(getProjectFilesystem(),specsDir)).add(new SymCopyStep(getProjectFilesystem(),FluentIterable.from(captureAndAnalyzeRules.captureRules).transform(new Function<CxxInferCapture,Path>(){
    @Override public Path apply(    CxxInferCapture input){
      return input.getPathToOutput();
    }
  }
).toList(),resultsDir)).add(new DefaultShellStep(getProjectFilesystem().getRootPath(),getAnalyzeCommand(getSpecsOfAllDeps()))).build();
}
