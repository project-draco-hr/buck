{
  if (platform == Platform.MACOS) {
    return CxxPlatforms.build(FLAVOR,platform,config,new HashedFileTool(DEFAULT_AS),new HashedFileTool(DEFAULT_OSX_C_FRONTEND),new ClangCompiler(new HashedFileTool(DEFAULT_OSX_C_FRONTEND)),new ClangCompiler(new HashedFileTool(DEFAULT_OSX_CXX_FRONTEND)),new HashedFileTool(DEFAULT_OSX_C_FRONTEND),new HashedFileTool(DEFAULT_OSX_CXX_FRONTEND),new HashedFileTool(DEFAULT_OSX_CXX_FRONTEND),Optional.<CxxPlatform.LinkerType>absent(),new HashedFileTool(DEFAULT_LD),ImmutableList.<String>of(),new HashedFileTool(DEFAULT_STRIP),new BsdArchiver(new HashedFileTool(DEFAULT_AR)),ImmutableList.<String>of(),ImmutableList.<String>of(),Optional.<Tool>of(new HashedFileTool(DEFAULT_LEX)),Optional.<Tool>of(new HashedFileTool(DEFAULT_YACC)),"dylib",Optional.<DebugPathSanitizer>absent());
  }
  String sharedLibraryExtension;
switch (platform) {
case LINUX:
    sharedLibraryExtension="so";
  break;
case WINDOWS:
sharedLibraryExtension="dll";
break;
default :
throw new RuntimeException(String.format("Unsupported platform: %s",platform));
}
return CxxPlatforms.build(FLAVOR,platform,config,new HashedFileTool(DEFAULT_AS),new HashedFileTool(DEFAULT_C_FRONTEND),new DefaultCompiler(new HashedFileTool(DEFAULT_C_FRONTEND)),new DefaultCompiler(new HashedFileTool(DEFAULT_CXX_FRONTEND)),new HashedFileTool(DEFAULT_C_FRONTEND),new HashedFileTool(DEFAULT_CXX_FRONTEND),new HashedFileTool(DEFAULT_CXX_FRONTEND),Optional.<CxxPlatform.LinkerType>absent(),new HashedFileTool(DEFAULT_LD),ImmutableList.<String>of(),new HashedFileTool(DEFAULT_STRIP),new GnuArchiver(new HashedFileTool(DEFAULT_AR)),ImmutableList.<String>of(),ImmutableList.<String>of(),Optional.<Tool>of(new HashedFileTool(DEFAULT_LEX)),Optional.<Tool>of(new HashedFileTool(DEFAULT_YACC)),sharedLibraryExtension,Optional.<DebugPathSanitizer>absent());
}
