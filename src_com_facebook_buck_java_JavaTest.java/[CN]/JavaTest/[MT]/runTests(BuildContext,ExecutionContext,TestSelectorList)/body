{
  Set<String> testClassNames=getClassNamesForSources(executionContext);
  if (testClassNames.isEmpty()) {
    return ImmutableList.of();
  }
  ImmutableList.Builder<Step> steps=ImmutableList.builder();
  Path pathToTestOutput=getPathToTestOutputDirectory();
  MakeCleanDirectoryStep mkdirClean=new MakeCleanDirectoryStep(pathToTestOutput);
  steps.add(mkdirClean);
  ImmutableSet<Path> classpathEntries=ImmutableSet.<Path>builder().addAll(getTransitiveClasspathEntries().values()).addAll(additionalClasspathEntries).addAll(getBootClasspathEntries(executionContext)).build();
  Step junit=new JUnitStep(classpathEntries,testClassNames,amendVmArgs(vmArgs,executionContext.getTargetDeviceOptional()),pathToTestOutput.toString(),executionContext.isCodeCoverageEnabled(),executionContext.isJacocoEnabled(),executionContext.isDebugEnabled(),executionContext.getBuckEventBus().getBuildId(),testSelectorList);
  steps.add(junit);
  return steps.build();
}
