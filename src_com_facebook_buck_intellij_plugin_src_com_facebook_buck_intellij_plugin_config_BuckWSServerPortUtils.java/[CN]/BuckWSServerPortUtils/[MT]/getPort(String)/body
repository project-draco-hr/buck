{
  String exec=BuckSettingsProvider.getInstance().getState().buckExecutable;
  GeneralCommandLine commandLine=new GeneralCommandLine();
  commandLine.setExePath(exec);
  commandLine.withWorkDirectory(runInPath);
  commandLine.addParameter("server");
  commandLine.addParameter("status");
  commandLine.addParameter("--http-port");
  commandLine.setRedirectErrorStream(true);
  Process p=commandLine.createProcess();
  BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream()));
  String text="";
  String line;
  while ((line=reader.readLine()) != null) {
    text+=line;
    if (line.startsWith(BuckWSServerPortUtils.SEARCH_FOR)) {
      mPort=Integer.parseInt(line.replace(BuckWSServerPortUtils.SEARCH_FOR,""));
      return mPort;
    }
  }
  if (mPort == CONNECTION_FAILED) {
    LOG.error(CONNECTION_FAILED_MESSAGE + text);
  }
  return mPort;
}
