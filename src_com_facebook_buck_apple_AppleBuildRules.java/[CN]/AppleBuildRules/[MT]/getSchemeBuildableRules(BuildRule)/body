{
  final Iterable<BuildRule> buildRulesIterable=Iterables.concat(getRecursiveRuleDependenciesOfTypes(RecursiveRuleDependenciesMode.BUILDING,primaryRule,Optional.<ImmutableSet<BuildRuleType>>absent()),ImmutableSet.of(primaryRule));
  return ImmutableSet.copyOf(Iterables.filter(buildRulesIterable,new Predicate<BuildRule>(){
    @Override public boolean apply(    BuildRule input){
      return isXcodeTargetBuildRuleType(input.getType());
    }
  }
));
}
