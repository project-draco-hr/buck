{
  ImmutableMultimap.Builder<BuildTarget,TargetNode<AppleTestDescription.Arg>> sourceNodeToTestNodesBuilder=ImmutableMultimap.builder();
  for (  TargetNode<?> targetNode : testTargets) {
    Optional<TargetNode<AppleTestDescription.Arg>> castedNode=targetNode.castArg(AppleTestDescription.Arg.class);
    if (castedNode.isPresent()) {
      AppleTestDescription.Arg testDescriptionArg=castedNode.get().getConstructorArg();
      if (testDescriptionArg.sourceUnderTest.isPresent()) {
        for (        BuildTarget sourceTarget : testDescriptionArg.sourceUnderTest.get()) {
          sourceNodeToTestNodesBuilder.put(sourceTarget,castedNode.get());
        }
      }
    }
 else {
      LOG.verbose("Skipping target node %s (not xcode target test)",targetNode);
    }
  }
  return sourceNodeToTestNodesBuilder.build();
}
