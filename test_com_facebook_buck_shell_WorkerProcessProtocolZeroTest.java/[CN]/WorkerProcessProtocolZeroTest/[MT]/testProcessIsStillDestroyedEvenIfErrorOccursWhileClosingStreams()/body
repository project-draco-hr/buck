{
  JsonWriter writer=new JsonWriter(new StringWriter());
  writer.beginArray();
  JsonReader reader=new JsonReader(new StringReader("invalid JSON"));
  WorkerProcessProtocol protocol=new WorkerProcessProtocolZero(fakeProcessExecutor,fakeLaunchedProcess,writer,reader);
  try {
    protocol.close();
  }
 catch (  HumanReadableException e) {
    assertThat(e.getMessage(),Matchers.containsString("Error while trying to close"));
    assertTrue(fakeProcess.isDestroyed());
  }
}
