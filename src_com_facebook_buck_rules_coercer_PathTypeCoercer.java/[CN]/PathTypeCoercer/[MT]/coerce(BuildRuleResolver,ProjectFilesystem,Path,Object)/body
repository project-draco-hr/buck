{
  if (object instanceof String) {
    String path=(String)object;
    if (path.startsWith(BuildRuleFactoryParams.GENFILE_PREFIX)) {
      path=path.substring(BuildRuleFactoryParams.GENFILE_PREFIX.length());
      return Paths.get(BuckConstant.GEN_DIR).resolve(pathRelativeToProjectRoot).resolve(path).normalize();
    }
 else {
      try {
        Path normalizedPath=pathRelativeToProjectRoot.resolve(path).normalize();
        filesystem.getPathForRelativeExistingPath(normalizedPath);
        return normalizedPath;
      }
 catch (      RuntimeException e) {
        throw new CoerceFailedException(e.getMessage());
      }
    }
  }
 else {
    throw CoerceFailedException.simple(pathRelativeToProjectRoot,object,getOutputClass());
  }
}
