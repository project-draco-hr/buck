{
  final ImmutableSortedSet.Builder<BuildRule> transitiveClosure=ImmutableSortedSet.naturalOrder();
  new AbstractBreadthFirstTraversal<BuildRule>(params.getDeps()){
    @Override public ImmutableSet<BuildRule> visit(    BuildRule rule){
      if (!(rule instanceof GoLinkable)) {
        throw new HumanReadableException("%s (transitive dep of %s) is not an instance of go_library!",rule.getBuildTarget().getFullyQualifiedName(),params.getBuildTarget().getFullyQualifiedName());
      }
      ImmutableSet<BuildRule> deps=((GoLinkable)rule).getDeclaredDeps();
      transitiveClosure.addAll(deps);
      return deps;
    }
  }
.start();
  return transitiveClosure.build();
}
