{
  BuildTarget target=BuildTargetFactory.newInstance("//:target");
  FakeProjectFilesystem filesystem=new FakeProjectFilesystem();
  BuildTargetParser parser=new BuildTargetParser();
  BuildTarget gtest=BuildTargetFactory.newInstance("//:gtest");
  FakeBuckConfig buckConfig=new FakeBuckConfig(ImmutableMap.<String,Map<String,String>>of("cxx",ImmutableMap.of("gtest_dep",gtest.toString())));
  CxxBuckConfig cxxBuckConfig=new CxxBuckConfig(buckConfig);
  CxxTestDescription desc=new CxxTestDescription(cxxBuckConfig);
  BuildRuleFactoryParams params=new BuildRuleFactoryParams(ImmutableMap.<String,Object>of(),filesystem,parser,target,new FakeRuleKeyBuilderFactory());
  Iterable<String> implicit=desc.findDepsFromParams(params);
  assertTrue(Iterables.contains(implicit,gtest.toString()));
  params=new BuildRuleFactoryParams(ImmutableMap.<String,Object>of("framework",CxxTestType.GTEST.toString()),filesystem,parser,target,new FakeRuleKeyBuilderFactory());
  implicit=desc.findDepsFromParams(params);
  assertTrue(Iterables.contains(implicit,gtest.toString()));
}
