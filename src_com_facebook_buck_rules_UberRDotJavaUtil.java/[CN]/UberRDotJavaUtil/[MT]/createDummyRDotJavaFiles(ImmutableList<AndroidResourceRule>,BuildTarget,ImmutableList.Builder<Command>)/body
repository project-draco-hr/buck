{
  String rDotJavaSrcFolder=getRDotJavaSrcFolder(buildTarget);
  commands.add(new MakeCleanDirectoryCommand(rDotJavaSrcFolder));
  Set<String> javaSourceFilePaths=Sets.newHashSet();
  if (androidResourceDeps.isEmpty()) {
    String rDotJavaPackage="com.facebook";
    String javaCode=MergeAndroidResourcesCommand.generateJavaCodeForPackageWithoutResources(rDotJavaPackage);
    commands.add(new MakeCleanDirectoryCommand(rDotJavaSrcFolder + "/com/facebook"));
    String rDotJavaFile=rDotJavaSrcFolder + "/com/facebook/R.java";
    commands.add(new WriteFileCommand(javaCode,rDotJavaFile));
    javaSourceFilePaths.add(rDotJavaFile);
  }
 else {
    Map<String,String> symbolsFileToRDotJavaPackage=Maps.newHashMap();
    for (    AndroidResourceRule res : androidResourceDeps) {
      String rDotJavaPackage=res.getRDotJavaPackage();
      symbolsFileToRDotJavaPackage.put(res.getPathToTextSymbolsFile(),rDotJavaPackage);
      String rDotJavaFilePath=MergeAndroidResourcesCommand.getOutputFilePath(rDotJavaSrcFolder,rDotJavaPackage);
      javaSourceFilePaths.add(rDotJavaFilePath);
    }
    commands.add(new MergeAndroidResourcesCommand(symbolsFileToRDotJavaPackage,rDotJavaSrcFolder));
  }
  String rDotJavaClassesDirectory=getRDotJavaBinFolder(buildTarget);
  commands.add(new MakeCleanDirectoryCommand(rDotJavaClassesDirectory));
  JavacInMemoryCommand javac=createJavacInMemoryCommandForRDotJavaFiles(javaSourceFilePaths,rDotJavaClassesDirectory);
  commands.add(javac);
}
