{
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  BuildRuleResolver resolver=new BuildRuleResolver();
  CxxPreprocessorInput cxxPreprocessorInput=new CxxPreprocessorInput(ImmutableSet.<BuildTarget>of(),ImmutableList.<String>of(),ImmutableList.<String>of(),ImmutableMap.<Path,SourcePath>of(),ImmutableList.<Path>of(),ImmutableList.<Path>of());
  CxxSource cxxSource=new CxxSource("source.cpp",new TestSourcePath("source.cpp"));
  ImmutableList<String> platformFlags=ImmutableList.of("-some","-flags");
  CxxPlatform platform=new DefaultCxxPlatform(new FakeBuckConfig(ImmutableMap.<String,Map<String,String>>of("cxx",ImmutableMap.of("cxxflags",Joiner.on(" ").join(platformFlags)))));
  CxxCompile cxxCompile=CxxCompilableEnhancer.createCompileBuildRule(params,resolver,platform,cxxPreprocessorInput,ImmutableList.<String>of(),false,cxxSource);
  assertNotEquals(-1,Collections.indexOfSubList(cxxCompile.getFlags(),platformFlags));
}
