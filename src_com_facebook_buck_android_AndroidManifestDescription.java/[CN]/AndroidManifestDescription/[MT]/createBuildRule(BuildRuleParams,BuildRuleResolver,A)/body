{
  AndroidTransitiveDependencyGraph transitiveDependencyGraph=new AndroidTransitiveDependencyGraph(resolver.getAllRules(args.deps.get()));
  ImmutableSet<SourcePath> manifestFiles=transitiveDependencyGraph.findManifestFiles();
  ImmutableSortedSet<BuildRule> newDeps=ImmutableSortedSet.<BuildRule>naturalOrder().addAll(SourcePaths.filterBuildRuleInputs(Sets.union(manifestFiles,Collections.singleton(args.skeleton)))).build();
  return new AndroidManifest(params.copyWithDeps(newDeps,params.getExtraDeps()),new SourcePathResolver(resolver),args.skeleton,manifestFiles);
}
