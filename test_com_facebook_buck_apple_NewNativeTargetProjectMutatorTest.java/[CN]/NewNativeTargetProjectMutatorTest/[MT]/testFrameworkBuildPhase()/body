{
  BuildTarget testBuildTarget=BuildTarget.builder("//foo","binary").build();
  NewNativeTargetProjectMutator mutator=mutatorWithCommonDefaults();
  mutator.setFrameworks(ImmutableSet.of(FrameworkPath.fromString(testBuildTarget,"$SDKROOT/Foo.framework")));
  mutator.setArchives(ImmutableSet.of(new PBXFileReference("libdep.a","libdep.a",PBXReference.SourceTree.BUILT_PRODUCTS_DIR)));
  NewNativeTargetProjectMutator.Result result=mutator.buildTargetAndAddToProject(generatedProject);
  assertHasSingletonFrameworksPhaseWithFrameworkEntries(result.target,ImmutableList.of("$SDKROOT/Foo.framework","$BUILT_PRODUCTS_DIR/libdep.a"));
}
