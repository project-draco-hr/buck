{
synchronized (this) {
    try {
      if (filesystem.isDirectory(logDir)) {
        deleteOldLogsIfNeeded(maxScribeOfflineLogsBytes - bytesStoredSoFar);
      }
    }
 catch (    Exception e) {
      LOG.error("Failed to cleanup logs.\nError: %s\n%s",e.getClass(),e.getMessage());
    }
    if (logFileStream != null) {
      logFileStream.close();
    }
    storingAvailable=false;
  }
  scribeLogger.close();
}
