{
  CompilationDatabase compilationDatabase=createTestCompilationDatabase();
  BuildContext buildContext=FakeBuildContext.NOOP_CONTEXT;
  BuildableContext buildableContext=new FakeBuildableContext();
  List<Step> buildSteps=compilationDatabase.getBuildSteps(buildContext,buildableContext);
  assertEquals(4,buildSteps.size());
  int stepIndex=0;
  assertTrue(buildSteps.get(stepIndex++) instanceof MkdirStep);
  assertTrue(buildSteps.get(stepIndex++) instanceof AbstractExecutionStep);
  assertTrue(buildSteps.get(stepIndex++) instanceof MkdirStep);
  assertTrue(buildSteps.get(stepIndex++) instanceof GenerateCompilationCommandsJson);
}
