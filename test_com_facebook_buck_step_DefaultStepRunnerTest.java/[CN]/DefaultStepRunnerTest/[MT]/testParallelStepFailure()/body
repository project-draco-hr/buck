{
  ImmutableList.Builder<Step> steps=ImmutableList.builder();
  steps.add(new SleepingStep(0,0));
  steps.add(new SleepingStep(10,1));
  steps.add(new SleepingStep(5000,1));
  ExecutionContext context=ExecutionContext.builder().setProjectFilesystem(EasyMock.createMock(ProjectFilesystem.class)).setConsole(new TestConsole()).setEventBus(new EventBus()).build();
  ThreadFactory threadFactory=new ThreadFactoryBuilder().setDaemon(true).setNameFormat(getClass().getSimpleName() + "-%d").build();
  ListeningExecutorService executorService=MoreExecutors.listeningDecorator(Executors.newFixedThreadPool(3,threadFactory));
  DefaultStepRunner runner=new DefaultStepRunner(context,executorService);
  runner.runStepsInParallelAndWait(steps.build());
}
