{
  BuildRuleResolver resolver=new BuildRuleResolver();
  SourcePathResolver pathResolver=new SourcePathResolver(resolver);
  BuildRule extraDep=new FakeBuildRule("//:extra_dep",pathResolver);
  BuildRule dep=new FakeBuildRule("//:dep",pathResolver);
  BuildTarget target=BuildTargetFactory.newInstance("//:rule");
  ShTest shTest=new ShTest(new FakeBuildRuleParamsBuilder(target).setDeclaredDeps(ImmutableSortedSet.of(dep)).setExtraDeps(ImmutableSortedSet.of(extraDep)).build(),new SourcePathResolver(new BuildRuleResolver()),new TestSourcePath("run_test.sh"),ImmutableList.<Arg>of(),ImmutableSet.<Label>of());
  assertThat(shTest.getRuntimeDeps(),Matchers.containsInAnyOrder(dep,extraDep));
}
