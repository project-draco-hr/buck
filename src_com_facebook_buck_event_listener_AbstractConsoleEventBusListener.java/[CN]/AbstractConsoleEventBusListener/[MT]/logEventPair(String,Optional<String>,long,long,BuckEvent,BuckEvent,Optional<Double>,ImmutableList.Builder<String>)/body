{
  long result=UNFINISHED_EVENT_PAIR;
  if (startEvent == null) {
    return result;
  }
  String parseLine=(finishedEvent != null ? "[-] " : "[+] ") + prefix + "...";
  long elapsedTimeMs;
  if (finishedEvent != null) {
    elapsedTimeMs=finishedEvent.getTimestamp() - startEvent.getTimestamp();
    parseLine+="FINISHED ";
    result=elapsedTimeMs;
    if (progress.isPresent()) {
      progress=Optional.<Double>of(Double.valueOf(1));
    }
  }
 else {
    elapsedTimeMs=currentMillis - startEvent.getTimestamp();
  }
  parseLine+=formatElapsedTime(elapsedTimeMs - offsetMs);
  if (progress.isPresent()) {
    parseLine+=" [" + Math.round(progress.get().doubleValue() * 100) + "%]";
  }
  if (suffix.isPresent()) {
    parseLine+=" " + suffix.get();
  }
  lines.add(parseLine);
  return result;
}
