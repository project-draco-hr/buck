{
  ApplicationManager.getApplication().invokeLater(new Runnable(){
    @Override public void run(){
      IDevice[] devices=AndroidDebugBridge.getBridge().getDevices();
      if (devices.length == 0) {
        return;
      }
      IDevice device=devices[0];
      Client client;
      do {
        client=device.getClient(packageName);
        try {
          Thread.sleep(10);
        }
 catch (        InterruptedException e) {
        }
      }
 while (client == null);
      String debugPort=String.valueOf(client.getDebuggerListenPort());
      final RunnerAndConfigurationSettings settings=createRunConfiguration(project,debugPort);
      ProgramRunnerUtil.executeConfiguration(project,settings,DefaultDebugExecutor.getDebugExecutorInstance());
    }
  }
);
}
