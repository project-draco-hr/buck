{
  Path dir1=tmp.newFolder("foo").toPath();
  Path dir2=tmp.newFolder("bar").toPath();
  Path dir3=tmp.newFolder("baz").toPath();
  tmp.newFolder("unsearched");
  Path binary=createExecutable("unsearched/binary");
  Path file1=dir2.resolve("blech");
  java.nio.file.Files.createSymbolicLink(file1,binary);
  assertEquals(Optional.of(file1),MoreFiles.searchPathsForExecutable(Paths.get("blech"),ImmutableList.of(dir1,dir2,dir3)));
}
