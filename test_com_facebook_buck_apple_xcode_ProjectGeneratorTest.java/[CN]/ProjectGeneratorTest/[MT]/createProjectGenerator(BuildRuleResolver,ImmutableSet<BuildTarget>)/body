{
  DependencyGraph graph=RuleMap.createGraphFromBuildRules(buildRuleResolver);
  ImmutableList.Builder<BuildTarget> targets=ImmutableList.builder();
  for (  BuildRule rule : graph.getNodes()) {
    targets.add(rule.getBuildTarget());
  }
  PartialGraph partialGraph=PartialGraphFactory.newInstance(graph,targets.build());
  return new ProjectGenerator(partialGraph,initialBuildTargets,projectFilesystem,executionContext,OUTPUT_DIRECTORY,PROJECT_NAME);
}
