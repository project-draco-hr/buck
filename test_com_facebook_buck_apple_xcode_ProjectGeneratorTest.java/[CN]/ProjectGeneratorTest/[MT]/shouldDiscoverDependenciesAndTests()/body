{
  BuildTarget barLibTarget=BuildTarget.builder("//bar","lib").build();
  TargetNode<?> barLibNode=AppleLibraryBuilder.createBuilder(barLibTarget).build();
  BuildTarget fooLibTarget=BuildTarget.builder("//foo","lib").build();
  TargetNode<?> fooLibNode=AppleLibraryBuilder.createBuilder(fooLibTarget).setDeps(Optional.of(ImmutableSortedSet.of(barLibTarget))).build();
  BuildTarget fooBinBinaryTarget=BuildTarget.builder("//foo","binbinary").build();
  TargetNode<?> fooBinBinaryNode=AppleBinaryBuilder.createBuilder(fooBinBinaryTarget).build();
  BuildTarget fooBinTarget=BuildTarget.builder("//foo","bin").build();
  TargetNode<?> fooBinNode=AppleBundleBuilder.createBuilder(fooBinTarget).setExtension(Either.<AppleBundleExtension,String>ofLeft(AppleBundleExtension.APP)).setBinary(fooBinBinaryTarget).build();
  BuildTarget bazLibTarget=BuildTarget.builder("//baz","lib").build();
  TargetNode<?> bazLibNode=AppleLibraryBuilder.createBuilder(bazLibTarget).setDeps(Optional.of(ImmutableSortedSet.of(fooLibTarget))).build();
  BuildTarget bazTestLibTarget=BuildTarget.builder("//baz","testlib").setFlavor(AppleLibraryDescription.DYNAMIC_LIBRARY).build();
  TargetNode<?> bazTestLibNode=AppleLibraryBuilder.createBuilder(bazTestLibTarget).build();
  BuildTarget bazTestBundleTarget=BuildTarget.builder("//foo","xctest").build();
  TargetNode<?> bazTestBundleNode=AppleBundleBuilder.createBuilder(bazTestBundleTarget).setExtension(Either.<AppleBundleExtension,String>ofLeft(AppleBundleExtension.XCTEST)).setBinary(bazTestLibTarget).build();
  BuildTarget bazTestTarget=BuildTarget.builder("//baz","test").build();
  TargetNode<?> bazTestNode=AppleTestBuilder.createBuilder(bazTestTarget).setTestBundle(bazTestBundleTarget).setSourceUnderTest(Optional.of(ImmutableSortedSet.of(bazLibTarget))).build();
  BuildTarget fooTestLibTarget=BuildTarget.builder("//foo","lib-testlib").setFlavor(AppleLibraryDescription.DYNAMIC_LIBRARY).build();
  TargetNode<?> fooTestLibNode=AppleLibraryBuilder.createBuilder(fooTestLibTarget).setDeps(Optional.of(ImmutableSortedSet.of(bazLibTarget))).build();
  BuildTarget fooTestBundleTarget=BuildTarget.builder("//foo","lib-xctest").build();
  TargetNode<?> fooTestBundleNode=AppleBundleBuilder.createBuilder(fooTestBundleTarget).setExtension(Either.<AppleBundleExtension,String>ofLeft(AppleBundleExtension.XCTEST)).setBinary(fooTestLibTarget).build();
  BuildTarget fooTestTarget=BuildTarget.builder("//foo","lib-test").build();
  TargetNode<?> fooTestNode=AppleTestBuilder.createBuilder(fooTestTarget).setTestBundle(fooTestBundleTarget).setSourceUnderTest(Optional.of(ImmutableSortedSet.of(bazLibTarget))).build();
  BuildTarget fooBinTestLibTarget=BuildTarget.builder("//foo","bin-testlib").setFlavor(AppleLibraryDescription.DYNAMIC_LIBRARY).build();
  TargetNode<?> fooBinTestLibNode=AppleLibraryBuilder.createBuilder(fooBinTestLibTarget).setDeps(Optional.of(ImmutableSortedSet.of(bazLibTarget))).build();
  BuildTarget fooBinTestBundleTarget=BuildTarget.builder("//foo","bin-xctest").build();
  TargetNode<?> fooBinTestBundleNode=AppleBundleBuilder.createBuilder(fooBinTestBundleTarget).setExtension(Either.<AppleBundleExtension,String>ofLeft(AppleBundleExtension.XCTEST)).setBinary(fooBinTestLibTarget).build();
  BuildTarget fooBinTestTarget=BuildTarget.builder("//foo","bin-test").build();
  TargetNode<?> fooBinTestNode=AppleTestBuilder.createBuilder(fooBinTestTarget).setTestBundle(fooBinTestBundleTarget).setSourceUnderTest(Optional.of(ImmutableSortedSet.of(bazLibTarget))).build();
  ProjectGenerator projectGenerator=createProjectGeneratorForCombinedProject(ImmutableSet.<TargetNode<?>>of(barLibNode,fooLibNode,fooBinBinaryNode,fooBinNode,bazLibNode,bazTestLibNode,bazTestBundleNode,bazTestNode,fooTestLibNode,fooTestBundleNode,fooTestNode,fooBinTestLibNode,fooBinTestBundleNode,fooBinTestNode),ImmutableSet.of(fooBinTarget));
  projectGenerator.createXcodeProjects();
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//foo:bin");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//foo:lib");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//bar:lib");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//foo:bin-xctest");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//foo:lib-xctest");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//baz:lib");
}
