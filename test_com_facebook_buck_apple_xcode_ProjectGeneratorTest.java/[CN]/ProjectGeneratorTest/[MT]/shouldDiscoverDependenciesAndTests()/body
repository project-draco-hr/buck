{
  BuildRule barLib=createBuildRuleWithDefaults(BuildTarget.builder("//bar","lib").build(),ImmutableSortedSet.<BuildRule>of(),iosLibraryDescription);
  BuildRule fooLib=createBuildRuleWithDefaults(BuildTarget.builder("//foo","lib").build(),ImmutableSortedSet.of(barLib),iosLibraryDescription);
  BuildRule fooBin=createBuildRuleWithDefaults(BuildTarget.builder("//foo","bin").build(),ImmutableSortedSet.of(fooLib),iosBinaryDescription);
  BuildRule bazLib=createBuildRuleWithDefaults(BuildTarget.builder("//baz","lib").build(),ImmutableSortedSet.of(fooLib),iosLibraryDescription);
  BuildRule bazLibTest=createIosTestRule(BuildTarget.builder("//baz","test").build(),ImmutableSortedSet.of(bazLib),ImmutableSortedSet.of(bazLib));
  BuildRule fooLibTest=createIosTestRule(BuildTarget.builder("//foo","lib-test").build(),ImmutableSortedSet.of(fooLib),ImmutableSortedSet.of(fooLib,bazLib));
  BuildRule fooBinTest=createIosTestRule(BuildTarget.builder("//foo","bin-test").build(),ImmutableSortedSet.of(fooBin),ImmutableSortedSet.of(fooBin));
  ProjectGenerator projectGenerator=createProjectGeneratorForCombinedProject(ImmutableSet.of(barLib,fooLib,fooBin,bazLib,bazLibTest,fooLibTest,fooBinTest),ImmutableSet.of(fooBin.getBuildTarget()));
  projectGenerator.createXcodeProjects();
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//foo:bin");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//foo:lib");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//bar:lib");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//foo:bin-test");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//foo:lib-test");
  assertTargetExistsAndReturnTarget(projectGenerator.getGeneratedProject(),"//baz:lib");
}
