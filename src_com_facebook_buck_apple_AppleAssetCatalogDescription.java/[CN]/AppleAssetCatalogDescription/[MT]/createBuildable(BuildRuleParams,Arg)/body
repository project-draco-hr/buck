{
  final ProjectFilesystem projectFilesystem=params.getProjectFilesystem();
  final Set<Path> dirs=args.dirs;
  Supplier<ImmutableCollection<Path>> inputPathsSupplier=Suppliers.memoize(new Supplier<ImmutableCollection<Path>>(){
    @Override public ImmutableCollection<Path> get(){
      ImmutableSortedSet.Builder<Path> paths=ImmutableSortedSet.naturalOrder();
      for (      Path dir : dirs) {
        try {
          paths.addAll(projectFilesystem.getFilesUnderPath(dir));
        }
 catch (        IOException e) {
          throw new HumanReadableException(e,"Error traversing directory: %s.",dir);
        }
      }
      return paths.build();
    }
  }
);
  return new AppleAssetCatalog(params.getBuildTarget(),inputPathsSupplier,args);
}
