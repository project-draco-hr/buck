{
  BuildRuleResolver ruleResolver=new BuildRuleResolver();
  SourcePathResolver pathResolver=new SourcePathResolver(ruleResolver);
  BuildTarget target=BuildTargetFactory.newInstance("//android_res/com/example:res2");
  String additionalAbiKey=Strings.repeat("d",40);
  BuildRule resourceRule2=ruleResolver.addToIndex(AndroidResourceRuleBuilder.newBuilder().setResolver(pathResolver).setBuildTarget(BuildTargetFactory.newInstance("//android_res/com/example:res2")).setAdditionalAbiKey(Optional.of(Suppliers.ofInstance(Sha1HashCode.of(additionalAbiKey)))).setBuildRuleParams(new FakeBuildRuleParamsBuilder(target).build()).build());
  FakeBuildableContext buildableContext=new FakeBuildableContext();
  assertTrue(resourceRule2.getBuildSteps(EasyMock.createMock(BuildContext.class),buildableContext).isEmpty());
  buildableContext.assertContainsMetadataMapping(AndroidResource.METADATA_KEY_FOR_ABI,additionalAbiKey);
}
