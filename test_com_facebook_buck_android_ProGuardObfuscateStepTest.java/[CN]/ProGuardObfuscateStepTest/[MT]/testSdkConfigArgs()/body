{
  ExecutionContext context=createMock(ExecutionContext.class);
  AndroidPlatformTarget target=createMock(AndroidPlatformTarget.class);
  expect(context.getAndroidPlatformTarget()).andStubReturn(target);
  expect(target.getProguardConfig()).andStubReturn(Paths.get("sdk-default.pro"));
  expect(target.getOptimizedProguardConfig()).andStubReturn(Paths.get("sdk-optimized.pro"));
  expect(target.getBootclasspathEntries()).andStubReturn(ImmutableList.<Path>of());
  Path cwd=Paths.get("root");
  replayAll();
  checkSdkConfig(context,cwd,ProGuardObfuscateStep.SdkProguardType.DEFAULT,Optional.<String>absent(),"sdk-default.pro");
  checkSdkConfig(context,cwd,ProGuardObfuscateStep.SdkProguardType.OPTIMIZED,Optional.<String>absent(),"sdk-optimized.pro");
  checkSdkConfig(context,cwd,ProGuardObfuscateStep.SdkProguardType.NONE,Optional.<String>absent(),null);
  checkSdkConfig(context,cwd,ProGuardObfuscateStep.SdkProguardType.NONE,Optional.of("/some/path"),null);
  verifyAll();
}
