{
  BuildRuleResolver ruleResolver=new BuildRuleResolver();
  AndroidBinaryRule.Builder androidBinaryRuleBuilder=AndroidBinaryRule.newAndroidBinaryRuleBuilder(new FakeAbstractBuildRuleBuilderParams()).setBuildTarget(BuildTargetFactory.newInstance("//java/src/com/facebook:app")).setManifest("java/src/com/facebook/AndroidManifest.xml").setTarget("Google Inc.:Google APIs:16").setKeystore(addKeystoreRule(ruleResolver));
  BuildContext context=createMock(BuildContext.class);
  replay(context);
  MoreAsserts.assertListEquals("getInputsToCompareToOutput() should include manifest.",ImmutableList.of("java/src/com/facebook/AndroidManifest.xml"),ruleResolver.buildAndAddToIndex(androidBinaryRuleBuilder).getInputsToCompareToOutput());
  SourcePath proguardConfig=new FileSourcePath("java/src/com/facebook/proguard.cfg");
  androidBinaryRuleBuilder.setBuildTarget(new BuildTarget("//java/src/com/facebook","app2"));
  androidBinaryRuleBuilder.setProguardConfig(Optional.of(proguardConfig));
  MoreAsserts.assertListEquals("getInputsToCompareToOutput() should include Proguard config, if present.",ImmutableList.of("java/src/com/facebook/AndroidManifest.xml","java/src/com/facebook/proguard.cfg"),ruleResolver.buildAndAddToIndex(androidBinaryRuleBuilder).getInputsToCompareToOutput());
  verify(context);
}
