{
  BuildRuleResolver resolver=new BuildRuleResolver();
  AndroidBinaryRule.Builder builder=AndroidBinaryRule.newAndroidBinaryRuleBuilder(new FakeAbstractBuildRuleBuilderParams()).setBuildTarget(BuildTargetFactory.newInstance("//:target")).setManifest(new FileSourcePath("AndroidManifest.xml")).setKeystore(addKeystoreRule(resolver)).setTarget("Google Inc:Google APIs:16").setResourceFilter(new ResourceFilter(ImmutableList.<String>of("mdpi"))).setResourceCompressionMode("enabled_with_strings_as_assets");
  AndroidBinaryRule buildRule=resolver.buildAndAddToIndex(builder);
  Set<String> resourceDirectories=ImmutableSet.of("one","two");
  FilterResourcesStep filterResourcesStep=buildRule.getUberRDotJavaBuildable().createFilterResourcesStep(resourceDirectories,ImmutableSet.<String>of());
  assertEquals(ImmutableSet.of("buck-out/bin/__filtered__target#uber_r_dot_java__/0","buck-out/bin/__filtered__target#uber_r_dot_java__/1"),filterResourcesStep.getOutputResourceDirs());
}
