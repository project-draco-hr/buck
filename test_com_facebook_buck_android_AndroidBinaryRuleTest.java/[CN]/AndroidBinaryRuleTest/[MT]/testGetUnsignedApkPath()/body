{
  BuildRuleBuilderParams buildRuleBuilderParams=new BuildRuleBuilderParams();
  AndroidBinaryRule ruleInRootDirectory=buildRuleBuilderParams.buildAndAddToIndex(AndroidBinaryRule.newAndroidBinaryRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//:fb4a")).setManifest("AndroidManifest.xml").setKeystorePropertiesPath("keystore.properties").setTarget("Google Inc.:Google APIs:16"));
  assertEquals(GEN_DIR + "/fb4a.apk",ruleInRootDirectory.getApkPath());
  AndroidBinaryRule ruleInNonRootDirectory=buildRuleBuilderParams.buildAndAddToIndex(AndroidBinaryRule.newAndroidBinaryRuleBuilder().setBuildTarget(BuildTargetFactory.newInstance("//java/com/example:fb4a")).setManifest("AndroidManifest.xml").setKeystorePropertiesPath("keystore.properties").setTarget("Google Inc.:Google APIs:16"));
  assertEquals(GEN_DIR + "/java/com/example/fb4a.apk",ruleInNonRootDirectory.getApkPath());
}
