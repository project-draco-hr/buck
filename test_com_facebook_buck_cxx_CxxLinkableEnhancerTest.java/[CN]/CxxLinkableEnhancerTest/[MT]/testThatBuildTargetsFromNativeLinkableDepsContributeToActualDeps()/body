{
  BuildRuleResolver resolver=new BuildRuleResolver();
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  BuildTarget fakeBuildTarget=BuildTargetFactory.newInstance("//:fake");
  FakeBuildRule fakeBuildRule=new FakeBuildRule(new FakeBuildRuleParamsBuilder(fakeBuildTarget).build());
  resolver.addToIndex(fakeBuildRule);
  FakeNativeLinkable nativeLinkable=createNativeLinkable("//:dep",new NativeLinkableInput(ImmutableSet.of(fakeBuildTarget),ImmutableList.<Path>of(),ImmutableList.<String>of()));
  CxxLink cxxLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(params,resolver,DEFAULT_LINKER,ImmutableList.<String>of(),ImmutableList.<String>of(),target,DEFAULT_OUTPUT,DEFAULT_INPUTS,ImmutableSortedSet.<BuildRule>of(nativeLinkable));
  assertTrue(cxxLink.getDeps().contains(fakeBuildRule));
}
