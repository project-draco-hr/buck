{
  BuildRuleResolver resolver=new BuildRuleResolver();
  SourcePathResolver pathResolver=new SourcePathResolver(resolver);
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  BuildTarget fakeBuildTarget=BuildTargetFactory.newInstance("//:fake");
  FakeBuildRule fakeBuildRule=new FakeBuildRule(new FakeBuildRuleParamsBuilder(fakeBuildTarget).build(),pathResolver);
  resolver.addToIndex(fakeBuildRule);
  NativeLinkableInput nativeLinkableInput=new NativeLinkableInput(ImmutableList.<SourcePath>of(new BuildRuleSourcePath(fakeBuildRule)),ImmutableList.<String>of());
  FakeNativeLinkable nativeLinkable=createNativeLinkable("//:dep",pathResolver,nativeLinkableInput,nativeLinkableInput);
  CxxLink cxxLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(CXX_PLATFORM,params,pathResolver,ImmutableList.<String>of(),ImmutableList.<String>of(),target,CxxLinkableEnhancer.LinkType.EXECUTABLE,Optional.<String>absent(),DEFAULT_OUTPUT,DEFAULT_INPUTS,NativeLinkable.Type.STATIC,ImmutableSortedSet.<BuildRule>of(nativeLinkable));
  assertTrue(cxxLink.getDeps().contains(fakeBuildRule));
}
