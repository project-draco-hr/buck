{
  CxxPlatform cxxPlatform=new DefaultCxxPlatform(new FakeBuckConfig());
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  String sentinel="bottom";
  NativeLinkableInput bottomInput=ImmutableNativeLinkableInput.of(ImmutableList.<SourcePath>of(),ImmutableList.of(sentinel));
  BuildRule bottom=createNativeLinkable("//:bottom",pathResolver,bottomInput,bottomInput);
  BuildRule middle=new FakeBuildRule("//:middle",pathResolver,bottom);
  NativeLinkableInput topInput=ImmutableNativeLinkableInput.of(ImmutableList.<SourcePath>of(),ImmutableList.<String>of());
  BuildRule top=createNativeLinkable("//:top",pathResolver,topInput,topInput,middle);
  NativeLinkableInput totalInput=NativeLinkables.getTransitiveNativeLinkableInput(cxxPlatform,ImmutableList.of(top),Linker.LinkableDepType.STATIC,true);
  assertTrue(bottomInput.getArgs().contains(sentinel));
  assertFalse(totalInput.getArgs().contains(sentinel));
}
