{
  CxxPlatform cxxPlatform=DefaultCxxPlatforms.build(new CxxBuckConfig(FakeBuckConfig.builder().build()));
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  String sentinel="bottom";
  NativeLinkableInput bottomInput=NativeLinkableInput.of(ImmutableList.<SourcePath>of(),ImmutableList.of(sentinel),ImmutableSet.<FrameworkPath>of(),ImmutableSet.<FrameworkPath>of());
  BuildRule bottom=createNativeLinkable("//:bottom",pathResolver,bottomInput,bottomInput);
  BuildRule middle=new FakeBuildRule("//:middle",pathResolver,bottom);
  NativeLinkableInput topInput=NativeLinkableInput.of(ImmutableList.<SourcePath>of(),ImmutableList.<String>of(),ImmutableSet.<FrameworkPath>of(),ImmutableSet.<FrameworkPath>of());
  BuildRule top=createNativeLinkable("//:top",pathResolver,topInput,topInput,middle);
  NativeLinkableInput totalInput=NativeLinkables.getTransitiveNativeLinkableInput(TargetGraph.EMPTY,cxxPlatform,ImmutableList.of(top),Linker.LinkableDepType.STATIC,ImmutableSet.<BuildTarget>of(),true);
  assertTrue(bottomInput.getArgs().contains(sentinel));
  assertFalse(totalInput.getArgs().contains(sentinel));
}
