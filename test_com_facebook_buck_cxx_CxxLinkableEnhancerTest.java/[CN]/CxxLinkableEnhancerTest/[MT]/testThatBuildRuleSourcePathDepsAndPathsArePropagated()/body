{
  BuildRuleResolver resolver=new BuildRuleResolver();
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  Genrule genrule1=(Genrule)GenruleBuilder.newGenruleBuilder(BuildTargetFactory.newInstance("//:genrule")).setOut("foo/bar.o").build(resolver);
  Genrule genrule2=(Genrule)GenruleBuilder.newGenruleBuilder(BuildTargetFactory.newInstance("//:genrule2")).setOut("foo/test.o").build(resolver);
  CxxLink cxxLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(params,DEFAULT_LINKER,ImmutableList.<String>of(),ImmutableList.<String>of(),target,CxxLinkableEnhancer.LinkType.EXECUTABLE,Optional.<String>absent(),DEFAULT_OUTPUT,ImmutableList.<SourcePath>of(new TestSourcePath("simple.o"),new BuildRuleSourcePath(genrule1),new BuildRuleSourcePath(genrule2)),NativeLinkable.Type.STATIC,EMPTY_DEPS);
  assertEquals(ImmutableSortedSet.<BuildRule>of(genrule1,genrule2),cxxLink.getDeps());
  assertEquals(ImmutableSet.of(Paths.get("simple.o"),genrule1.getPathToOutputFile(),genrule2.getPathToOutputFile()),ImmutableSet.copyOf(cxxLink.getInputsToCompareToOutput()));
}
