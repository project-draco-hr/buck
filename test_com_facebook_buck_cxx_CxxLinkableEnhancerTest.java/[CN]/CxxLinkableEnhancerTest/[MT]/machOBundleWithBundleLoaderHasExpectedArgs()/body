{
  BuildRuleResolver resolver=new BuildRuleResolver();
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=new FakeBuildRuleParamsBuilder(target).build();
  CxxLink cxxLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(TargetGraph.EMPTY,CXX_PLATFORM,params,new SourcePathResolver(resolver),target,Linker.LinkType.MACH_O_BUNDLE,Optional.<String>absent(),DEFAULT_OUTPUT,SourcePathArg.from(new SourcePathResolver(resolver),new FakeSourcePath("simple.o")),Linker.LinkableDepType.STATIC,EMPTY_DEPS,Optional.<SourcePath>of(new FakeSourcePath("path/to/MyBundleLoader")),ImmutableSet.<BuildTarget>of(),ImmutableSet.<FrameworkPath>of());
  assertThat(cxxLink.getArgs(),hasItem("-bundle"));
  assertThat(cxxLink.getArgs(),hasConsecutiveItems("-bundle_loader","path/to/MyBundleLoader"));
}
