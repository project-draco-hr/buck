{
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver(TargetGraph.EMPTY,new BuildTargetNodeToBuildRuleTransformer()));
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=new FakeBuildRuleParamsBuilder(target).build();
  String staticArg="static";
  NativeLinkableInput staticInput=NativeLinkableInput.of(ImmutableList.of(new StringArg(staticArg)),ImmutableSet.<FrameworkPath>of(),ImmutableSet.<FrameworkPath>of());
  String sharedArg="shared";
  NativeLinkableInput sharedInput=NativeLinkableInput.of(ImmutableList.of(new StringArg(sharedArg)),ImmutableSet.<FrameworkPath>of(),ImmutableSet.<FrameworkPath>of());
  FakeNativeLinkable nativeLinkable=createNativeLinkable("//:dep",pathResolver,staticInput,sharedInput);
  CxxLink staticLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(CXX_PLATFORM,params,pathResolver,target,Linker.LinkType.EXECUTABLE,Optional.<String>absent(),DEFAULT_OUTPUT,DEFAULT_INPUTS,Linker.LinkableDepType.STATIC,ImmutableSortedSet.<BuildRule>of(nativeLinkable),Optional.<SourcePath>absent(),ImmutableSet.<BuildTarget>of(),ImmutableSet.<FrameworkPath>of());
  assertTrue(staticLink.getArgs().contains(staticArg) || staticLink.getArgs().contains("-Wl," + staticArg));
  assertFalse(staticLink.getArgs().contains(sharedArg));
  assertFalse(staticLink.getArgs().contains("-Wl," + sharedArg));
  CxxLink sharedLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(CXX_PLATFORM,params,pathResolver,target,Linker.LinkType.EXECUTABLE,Optional.<String>absent(),DEFAULT_OUTPUT,DEFAULT_INPUTS,Linker.LinkableDepType.SHARED,ImmutableSortedSet.<BuildRule>of(nativeLinkable),Optional.<SourcePath>absent(),ImmutableSet.<BuildTarget>of(),ImmutableSet.<FrameworkPath>of());
  assertFalse(sharedLink.getArgs().contains(staticArg));
  assertFalse(sharedLink.getArgs().contains("-Wl," + staticArg));
  assertTrue(sharedLink.getArgs().contains(sharedArg) || sharedLink.getArgs().contains("-Wl," + sharedArg));
}
