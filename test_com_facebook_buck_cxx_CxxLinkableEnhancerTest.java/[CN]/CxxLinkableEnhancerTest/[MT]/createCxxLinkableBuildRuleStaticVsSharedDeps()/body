{
  SourcePathResolver pathResolver=new SourcePathResolver(new BuildRuleResolver());
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  String staticArg="static";
  NativeLinkableInput staticInput=NativeLinkableInput.of(ImmutableList.<SourcePath>of(),ImmutableList.of(staticArg));
  String sharedArg="shared";
  NativeLinkableInput sharedInput=NativeLinkableInput.of(ImmutableList.<SourcePath>of(),ImmutableList.of(sharedArg));
  FakeNativeLinkable nativeLinkable=createNativeLinkable("//:dep",pathResolver,staticInput,sharedInput);
  CxxLink staticLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(CXX_PLATFORM,params,pathResolver,ImmutableList.<String>of(),ImmutableList.<String>of(),target,Linker.LinkType.EXECUTABLE,Optional.<String>absent(),DEFAULT_OUTPUT,DEFAULT_INPUTS,Linker.LinkableDepType.STATIC,ImmutableSortedSet.<BuildRule>of(nativeLinkable));
  assertTrue(staticLink.getArgs().contains(staticArg) || staticLink.getArgs().contains("-Wl," + staticArg));
  assertFalse(staticLink.getArgs().contains(sharedArg));
  assertFalse(staticLink.getArgs().contains("-Wl," + sharedArg));
  CxxLink sharedLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(CXX_PLATFORM,params,pathResolver,ImmutableList.<String>of(),ImmutableList.<String>of(),target,Linker.LinkType.EXECUTABLE,Optional.<String>absent(),DEFAULT_OUTPUT,DEFAULT_INPUTS,Linker.LinkableDepType.SHARED,ImmutableSortedSet.<BuildRule>of(nativeLinkable));
  assertFalse(sharedLink.getArgs().contains(staticArg));
  assertFalse(sharedLink.getArgs().contains("-Wl," + staticArg));
  assertTrue(sharedLink.getArgs().contains(sharedArg) || sharedLink.getArgs().contains("-Wl," + sharedArg));
}
