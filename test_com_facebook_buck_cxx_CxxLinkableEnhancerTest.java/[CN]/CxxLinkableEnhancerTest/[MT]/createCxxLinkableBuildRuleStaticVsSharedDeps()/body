{
  BuildRuleResolver resolver=new BuildRuleResolver();
  BuildTarget target=BuildTargetFactory.newInstance("//foo:bar");
  BuildRuleParams params=BuildRuleParamsFactory.createTrivialBuildRuleParams(target);
  String staticArg="static";
  NativeLinkableInput staticInput=new NativeLinkableInput(ImmutableSet.<BuildTarget>of(),ImmutableList.<Path>of(),ImmutableList.of(staticArg));
  String sharedArg="shared";
  NativeLinkableInput sharedInput=new NativeLinkableInput(ImmutableSet.<BuildTarget>of(),ImmutableList.<Path>of(),ImmutableList.of(sharedArg));
  FakeNativeLinkable nativeLinkable=createNativeLinkable("//:dep",staticInput,sharedInput);
  CxxLink staticLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(params,resolver,DEFAULT_LINKER,ImmutableList.<String>of(),ImmutableList.<String>of(),target,CxxLinkableEnhancer.LinkType.EXECUTABLE,Optional.<String>absent(),DEFAULT_OUTPUT,DEFAULT_INPUTS,NativeLinkable.Type.STATIC,ImmutableSortedSet.<BuildRule>of(nativeLinkable));
  assertTrue(staticLink.getArgs().contains(staticArg));
  assertFalse(staticLink.getArgs().contains(sharedArg));
  CxxLink sharedLink=CxxLinkableEnhancer.createCxxLinkableBuildRule(params,resolver,DEFAULT_LINKER,ImmutableList.<String>of(),ImmutableList.<String>of(),target,CxxLinkableEnhancer.LinkType.EXECUTABLE,Optional.<String>absent(),DEFAULT_OUTPUT,DEFAULT_INPUTS,NativeLinkable.Type.SHARED,ImmutableSortedSet.<BuildRule>of(nativeLinkable));
  assertFalse(sharedLink.getArgs().contains(staticArg));
  assertTrue(sharedLink.getArgs().contains(sharedArg));
}
